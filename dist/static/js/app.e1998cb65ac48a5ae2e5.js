webpackJsonp([1],{0:function(e,t){},1:function(e,t){},"1/oy":function(e,t){},2:function(e,t){},"2fQU":function(e,t){},"9M+g":function(e,t){},"9cmv":function(e,t){},D4uH:function(e,t,a){"use strict";let s={};var r={name:"fa-icon",props:{name:{type:String,validator:e=>!e||e in s||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${e}".`+"\nPlease make sure you have imported this icon before using it."),!1)},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:e=>"horizontal"===e||"vertical"===e},label:String},data:()=>({x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}),computed:{normalizedScale(){let e=this.scale;return e=void 0===e?1:Number(e),isNaN(e)||e<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):e*this.outerScale},klass(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse,[this.$options.name]:!0}},icon(){return this.name?s[this.name]:null},box(){return this.icon?`0 0 ${this.icon.width} ${this.icon.height}`:`0 0 ${this.width} ${this.height}`},ratio(){if(!this.icon)return 1;let{width:e,height:t}=this.icon;return Math.max(e,t)/16},width(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw(){if(!this.icon||!this.icon.raw)return null;let e=this.icon.raw,t={};return e=(e=e.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(e,a,s)=>{let r=`fa-${(i++).toString(16)}`;return t[s]=r,` id="${r}"`})).replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(e,a,s,r)=>{let i=a||r;return i&&t[i]?`#${t[i]}`:e})}},mounted(){if(!this.name&&0===this.$children.length)return void console.warn('Invalid prop: prop "name" is required.');if(this.icon)return;let e=0,t=0;this.$children.forEach(a=>{a.outerScale=this.normalizedScale,e=Math.max(e,a.width),t=Math.max(t,a.height)}),this.childrenWidth=e,this.childrenHeight=t,this.$children.forEach(a=>{a.x=(e-a.width)/2,a.y=(t-a.height)/2})},register(e){for(let t in e){let a=e[t];a.paths||(a.paths=[]),a.d&&a.paths.push({d:a.d}),a.polygons||(a.polygons=[]),a.points&&a.polygons.push({points:a.points}),s[t]=a}},icons:s};let i=870711;var o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("svg",{class:e.klass,style:e.style,attrs:{version:"1.1",role:e.label?"img":"presentation","aria-label":e.label,x:e.x,y:e.y,width:e.width,height:e.height,viewBox:e.box}},[e._t("default",[e.icon&&e.icon.paths?e._l(e.icon.paths,function(t,s){return a("path",e._b({key:"path-"+s},"path",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.polygons?e._l(e.icon.polygons,function(t,s){return a("polygon",e._b({key:"polygon-"+s},"polygon",t,!1))}):e._e(),e._v(" "),e.icon&&e.icon.raw?[a("g",{domProps:{innerHTML:e._s(e.raw)}})]:e._e()])],2)},staticRenderFns:[]};var n=a("VU/8")(r,o,!1,function(e){a("jSVj")},null,null);t.a=n.exports},Dfiq:function(e,t){},GfHa:function(e,t){},Id91:function(e,t){},LZTc:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("7+uW"),r=a("ytdl"),i=a.n(r),o={user:{authenticated:!1,lang:"cat"},checkAuth(){var e=localStorage.getItem("access_token");this.user.authenticated=!!e},getAuthHeader:()=>({Authorization:"Bearer "+localStorage.getItem("access_token")}),decoded:()=>i()(localStorage.getItem("access_token")),setLang(){"cat"==this.user.lang?this.user.lang="es":this.user.lang="cat"},getLang(){return this.user.lang}},n={name:"App",data:()=>({user:"dpiscia"}),computed:{language:function(){return this.$i18n.locale()}},methods:{setLang(){console.log(o.getLang()),null==this.$i18n.locale()?this.$i18n.set("cat"):"cat"==this.$i18n.locale()?this.$i18n.set("es"):this.$i18n.set("cat")},getLang:()=>(console.log(o.getLang()),o.getLang()),goHome(){1==o.decoded().user_claims.admin?this.$router.replace(this.$route.query.redirect||"/admin"):this.$router.replace(this.$route.query.redirect||"/user")}},mounted(){this.setLang()}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"bg-primary",attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-primary bg-primary"},[a("a",{staticClass:"navbar-brand",staticStyle:{cursor:"pointer",color:"white"},on:{click:function(t){e.goHome()}}},[e._v("Encercla")]),e._v(" "),e._m(0),e._v(" "),"cat"==e.language?a("button",{attrs:{type:"button"},on:{click:function(t){e.setLang()}}},[e._v("ES")]):e._e(),e._v(" "),"es"==e.language?a("button",{attrs:{type:"button"},on:{click:function(t){e.setLang()}}},[e._v("CAT")]):e._e()]),e._v(" "),a("div",{staticClass:"container"},[a("router-view")],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[t("span",{staticClass:"navbar-toggler-icon"})])}]};var l=a("VU/8")(n,c,!1,function(e){a("SHlT")},null,null).exports,u=a("/ocq"),d={name:"HelloWorld",data:()=>({msg:"Welcome to Your Vue.js App"})},m={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"hello"},[t("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]};a("VU/8")(d,m,!1,function(e){a("qq3a")},"data-v-634646ce",null).exports;var h={name:"Login",data:()=>({email:"",password:"",error:"",lang:o.user.lang,string1:{cat:"iniciar  sessiò",es:"iniciar session"}}),computed:{language:function(){return this.$i18n.locale()}},methods:{setValue(e){this.lang=e},returnLanguage(){return console.log("fired"),this.lang=o.user.lang,o.getLang()},login(){this.$http.post("login",{username:this.email,password:this.password}).then(e=>this.loginSuccessful(e)).catch(()=>this.loginFailed())},loginSuccessful(e){e.data.access_token?(this.error=!1,localStorage.access_token=e.data.access_token,localStorage.refresh_token=e.data.refresh_token,o.user.authenticated=!0,console.log(o.decoded()),1==o.decoded().user_claims.admin?this.$router.replace(this.$route.query.redirect||"/admin"):this.$router.replace(this.$route.query.redirect||"/user")):this.loginFailed(e.data.message)},loginFailed(e){this.error=e,delete localStorage.token}},updated(){}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login-wrapper border border-light",staticStyle:{"background-color":"rgb(232,77,32)"}},[a("form",{staticClass:"form-signin",on:{submit:function(t){return t.preventDefault(),e.login(t)}}},[a("span",[e._v(e._s(e.language))]),e._v(" "),a("h2",{staticClass:"form-signin-heading"},[e._v(e._s(e._f("translate")("iniciar  sessiò")))]),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[e._v("Correu electronic")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:e._f("translate")("Correu electronic"),required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[e._v("Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:e._f("translate")("contrasenya"),required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[e._v(e._s(e._f("translate")("iniciar  sessiò")))]),e._v(" "),a("span",[e._v(e._s(e.error))])]),e._v(" "),e._m(0)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("a",{attrs:{href:"#/register"}},[t("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[this._v("Register")])])}]};var v=a("VU/8")(h,p,!1,function(e){a("LZTc")},null,null).exports,f={name:"Register",data:()=>({email:"",password:"",confirmPassword:"",error:"",admin:!0}),computed:{currentRoute(){return"/registerAdmin"==this.$route.path},comparePasswords(){return this.password===this.confirmPassword||(this.error=this.$i18n.translate("contrasenya no coincideix"),!1)}},methods:{register(){this.error="",this.comparePasswords&&(this.currentRoute?this.$http.post("adminregistration",{username:this.email,password:this.password,admin:this.admin},{headers:o.getAuthHeader()}).then(e=>{this.error="created",this.$router.replace(this.$route.query.redirect||"/registercompany/"+e.data.user_id)}).catch(()=>this.error=message):this.$http.post("registration",{username:this.email,password:this.password}).then(e=>this.registerSuccessful(e)).catch(()=>this.loginFailed()))},registerSuccessful(e){e.data.access_token?(this.error="",localStorage.access_token=e.data.access_token,localStorage.refresh_token=e.data.refresh_token,o.user.authenticated=!0,this.$router.replace(this.$route.query.redirect||"/registercompany")):this.loginFailed(e.data.message)},loginFailed(e){this.error=e,delete localStorage.token}}},g={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register-wrapper border border-light"},[a("form",{staticClass:"form-signin",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[a("h2",{staticClass:"form-signin-heading"},[e._v(e._s(e._f("translate")("Donar d'alta la meva empresa")))]),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[e._v("Email address")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:e._f("translate")("Correu electronic"),required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),e.currentRoute?a("div",{staticClass:"form-check float-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.admin,expression:"admin"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(e.admin)?e._i(e.admin,null)>-1:e.admin},on:{change:function(t){var a=e.admin,s=t.target,r=!!s.checked;if(Array.isArray(a)){var i=e._i(a,null);s.checked?i<0&&(e.admin=a.concat([null])):i>-1&&(e.admin=a.slice(0,i).concat(a.slice(i+1)))}else e.admin=r}}}),e._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[e._v("Administrator")])]):e._e(),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[e._v("Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:e._f("translate")("contrasenya"),required:""},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"confirmInputPassword"}},[e._v("Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmInputPassword",placeholder:e._f("translate")("contrasenya"),required:""},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[e._v("Registrar")]),e._v(" "),a("span",[e._v(e._s(e._f("translate")(e.error)))])])])},staticRenderFns:[]};var y=a("VU/8")(f,g,!1,function(e){a("hdeR")},"data-v-29973aff",null).exports,b=a("WIDu"),w=a.n(b),C=a("ESch"),A=(a("pYLg"),a("UcI+"),a("R3SC"),a("vDhf"),a("CFm9"),a("E8q/")),x=(a("Ea66"),a("EXyZ")),$=a("D4uH"),S={name:"RegisterCompany",components:{Icon:$.a,"b-button":A.a,"b-tooltip":x.a,"b-modal":C.a},data:()=>({sectors:[],sector:"",subsector:"",commercial_name:"",fiscal_name:"",nif:"",number_survey:"",duplication_survey:"",name_surname:"",telephone_number:"",description:"",comarca:"",territori_leader:"",number_workers:"",error:"",decoded:o.decoded(),company_id:"",status:"",comarcas:[],leaders:[]}),computed:{currentRoute(){return void 0!=this.$route.params.id},sectorCategories(){return w()(this.sectors.map(e=>e.sector))},subsectorCategories(){return this.sectors.filter(e=>e.sector==this.sector).map(e=>({item:e.subsector,info:e.info}))}},methods:{getSectors(){this.$http.get("sectors",{}).then(e=>this.sectors=e.data).catch(()=>"")},getComarcas(){this.$http.get("comarcas",{}).then(e=>this.comarcas=e.data).catch(()=>"")},getLeaders(){this.$http.get("leaders",{}).then(e=>this.leaders=e.data).catch(()=>"")},fetchCompany(){var e="";e=void 0!=this.$route.params.id?"company?user_id="+this.$route.params.id:"company",this.$http.get(e,{headers:o.getAuthHeader()}).then(e=>{""!=e.data.id?(this.status="Actualitzar",this.sector=e.data.sector,this.subsector=e.data.subsector,this.commercial_name=e.data.commercial_name,this.fiscal_name=e.data.fiscal_name,this.nif=e.data.nif,this.duplication_survey=!1,"True"==e.data.duplication_survey&&(this.duplication_survey=!0),this.name_surname=e.data.name_surname,this.telephone_number=e.data.telephone_number,this.description=e.data.description,this.comarca=e.data.comarca,this.territori_leader=e.data.territori_leader,this.number_workers=e.data.number_workers,this.company_id=e.data.id):this.status="Registrar"}).catch(()=>"")},register(){var e="";e=void 0!=this.$route.params.id?"registrationcompany?user_id="+this.$route.params.id:"registrationcompany",""==this.company_id?this.$http.post(e,{sector:this.sector,subsector:this.subsector,commercial_name:this.commercial_name,fiscal_name:this.fiscal_name,nif:this.nif,duplication_survey:this.duplication_survey,name_surname:this.name_surname,telephone_number:this.telephone_number,description:this.description,comarca:this.comarca,territori_leader:this.territori_leader,number_workers:this.number_workers},{headers:o.getAuthHeader()}).then(e=>this.registerSuccessful(e)).catch(()=>this.registerFailed()):this.$http.put("registrationcompany/"+this.company_id,{sector:this.sector,subsector:this.subsector,commercial_name:this.commercial_name,fiscal_name:this.fiscal_name,nif:this.nif,duplication_survey:this.duplication_survey,name_surname:this.name_surname,telephone_number:this.telephone_number,description:this.description,comarca:this.comarca,territori_leader:this.territori_leader,number_workers:this.number_workers},{headers:o.getAuthHeader()}).then(e=>this.registerSuccessful(e)).catch(()=>this.registerFailed())},registerSuccessful(e){void 0!=this.$route.params.id?this.$router.replace(this.$route.query.redirect||"/updatesurvey/"+this.$route.params.id):this.$router.replace(this.$route.query.redirect||"/users")},registerFailed(e){this.error=e}},mounted(){this.getSectors(),this.getComarcas(),this.getLeaders(),this.fetchCompany()}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register-wrapper border border-light"},[a("form",{staticClass:"form-signin",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[a("h2",{staticClass:"form-signin-heading"},[e._v("Registrar empresa")]),e._v("\n  "+e._s(e.decoded.identity)+"\n  \n  "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.sector,expression:"sector"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.sector=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Sector")]),e._v(" "),e._l(e.sectorCategories,function(t){return a("option",{domProps:{value:t}},[e._v(" \n    "+e._s(e._f("translate")(t))+"\n  ")])})],2)]),e._v(" "),e.sector?a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.subsector,expression:"subsector"}],staticClass:"form-control",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.subsector=t.target.multiple?a:a[0]}}},e._l(e.subsectorCategories,function(t,s){return a("option",{domProps:{value:t.item}},[e._v(" \n    "+e._s(e._f("translate")(t.item))+"  \n\n \n  ")])}))]):e._e(),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputcommercial_name"}},[e._v(e._s(e._f("translate")("nom comercial")))]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.commercial_name,expression:"commercial_name"}],staticClass:"form-control",attrs:{type:"text",id:"inputcommercial_name",placeholder:e._f("translate")("Nom comercial"),required:"",autofocus:""},domProps:{value:e.commercial_name},on:{input:function(t){t.target.composing||(e.commercial_name=t.target.value)}}}),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputfiscal_name"}},[e._v("fiscal_name ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.fiscal_name,expression:"fiscal_name"}],staticClass:"form-control",attrs:{type:"text",id:"inputfiscal_name",placeholder:"Fiscal Name",required:"",autofocus:""},domProps:{value:e.fiscal_name},on:{input:function(t){t.target.composing||(e.fiscal_name=t.target.value)}}}),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputnif"}},[e._v("nif ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.nif,expression:"nif"}],staticClass:"form-control",attrs:{type:"text",id:"inputnif",placeholder:"NIF",required:"",autofocus:""},domProps:{value:e.nif},on:{input:function(t){t.target.composing||(e.nif=t.target.value)}}}),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputname_surname"}},[e._v("nif ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.name_surname,expression:"name_surname"}],staticClass:"form-control",attrs:{type:"text",id:"inputname_surname",placeholder:e._f("translate")("Nom i cognoms"),required:"",autofocus:""},domProps:{value:e.name_surname},on:{input:function(t){t.target.composing||(e.name_surname=t.target.value)}}}),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputtelephone_number"}},[e._v("telephone_number ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.telephone_number,expression:"telephone_number"}],staticClass:"form-control",attrs:{type:"text",id:"inputtelephone_number",placeholder:e._f("translate")("Telèfon"),required:"",autofocus:""},domProps:{value:e.telephone_number},on:{input:function(t){t.target.composing||(e.telephone_number=t.target.value)}}}),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputdescription"}},[e._v("description ")]),e._v(" "),e.currentRoute?a("div",{staticClass:"form-check float-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.duplication_survey,expression:"duplication_survey"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(e.duplication_survey)?e._i(e.duplication_survey,null)>-1:e.duplication_survey},on:{change:function(t){var a=e.duplication_survey,s=t.target,r=!!s.checked;if(Array.isArray(a)){var i=e._i(a,null);s.checked?i<0&&(e.duplication_survey=a.concat([null])):i>-1&&(e.duplication_survey=a.slice(0,i).concat(a.slice(i+1)))}else e.duplication_survey=r}}}),e._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[e._v("Duplicacion questionari")])]):e._e(),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",id:"inputdescription",placeholder:e._f("translate")("Descripció activitat"),required:"",autofocus:""},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),e._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.comarca,expression:"comarca"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.comarca=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Comarca")]),e._v(" "),e._l(e.comarcas,function(t){return a("option",{domProps:{value:t}},[e._v(" \n    "+e._s(e._f("translate")(t))+"\n  ")])})],2)]),e._v(" "),a("div",{staticClass:"form-group"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.territori_leader,expression:"territori_leader"}],staticClass:"custom-select",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.territori_leader=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[e._v("Territori leader")]),e._v(" "),e._l(e.leaders,function(t){return a("option",{domProps:{value:t}},[e._v(" \n    "+e._s(e._f("translate")(t))+"\n  ")])})],2)]),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputnumber_workers"}},[e._v("territori_leader ")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.number_workers,expression:"number_workers"}],staticClass:"form-control",attrs:{type:"text",id:"inputnumber_workers",placeholder:e._f("translate")("Número de treballadors"),required:"",autofocus:""},domProps:{value:e.number_workers},on:{input:function(t){t.target.composing||(e.number_workers=t.target.value)}}}),e._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[e._v(e._s(e._f("translate")(e.status)))]),e._v(" "),a("span",[e._v(e._s(e.error))])])])},staticRenderFns:[]};var q=a("VU/8")(S,k,!1,function(e){a("2fQU")},"data-v-857f2bbe",null).exports,P=(a("gfF8"),a("v6UW"),{components:{Icon:$.a,"b-button":A.a,"b-tooltip":x.a,"b-modal":C.a},name:"Questions",data:()=>({msg:"Welcome to Your Vue.js App",questions:[],selected:0,answers:[],company_survey:"",selected_class:"list-group-item-primary",items:[1,2,3,4],timeoutId:1e3,error:""}),computed:{lang:function(){return this.$i18n.locale()},submittable:function(){console.log("sub");var e=[];return this.answers.map(function(t){-1!=t.score&&e.push(t.score)}),this.company_survey.score=e.reduce((e,t)=>e+t,0),e.length==this.answers.length}},methods:{deleteFile(){this.$http.delete("upload?answer="+this.answers[this.selected].id,{headers:o.getAuthHeader()}).then(e=>{console.log("deleted"),this.answers[this.selected].justification_file="",this.updateAnswer()}).catch(()=>"")},canMove(){return-1==this.answers[this.selected].score&&-1!=this.answers[this.selected].id_option?(this.error="you have to complete the answer",this.showModal(),!1):!(this.answers[this.selected].future&&this.answers[this.selected].future_justification_text.length<2)||(this.error="you have to complete the futurible answer",this.showModal(),!1)},scoreable(){return-1!=this.answers[this.selected].id_option&&(""!=this.answers[this.selected].justification_file||this.answers[this.selected].justification_text.length>2)},moveLeft(){this.canMove()&&(0!=this.selected?this.selected=this.selected-1:this.selected=this.questions.length-1,this.$refs.file.value="")},moveRight(){this.canMove()&&(this.canMove(),this.selected!=this.questions.length-1?this.selected=this.selected+1:this.selected=0,this.$refs.file.value="")},showModal(){this.$refs.myModalRef.show()},hideModal(){this.$refs.myModalRef.hide()},showModaltooltip(){this.$refs.tooltip.show()},hideModaltooltip(){this.$refs.tooltip.hide()},onInput(e){console.log("Textarea Change"),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.updateAnswer()},1e3)},submitSurvey(){this.company_survey.status="submitted";var e=this.company_survey;this.$http.put("companysurvey/"+e.id,{company_survey:e},{headers:o.getAuthHeader()}).then(e=>{console.log("OK"),this.$router.replace(this.$route.query.redirect||"/results/"+this.$route.params.id)}).catch(()=>this.company_survey.status="created")},updateAnswer(){var e=this.answers[this.selected];0!=this.scoreable()?(this.answers[this.selected].score=this.getpoints(this.questions[this.selected][this.lang],this.answers[this.selected].id_option),console.log("scoreable"),this.answers[this.selected].future_justification_text.length>2&&this.answers[this.selected].future?this.answers[this.selected].score_future=1-this.answers[this.selected].score:this.answers[this.selected].score_future=0):(this.answers[this.selected].score=-1,this.answers[this.selected].score_future=0,console.log("not scoreable")),this.$http.put("answer/"+e.id,{answer:e},{headers:o.getAuthHeader()}).then(e=>{console.log("OK")}).catch(()=>console.log("KO"))},fetchAnswers(e){this.$http.get("answers?ids="+e,{headers:o.getAuthHeader()}).then(e=>{this.answers=e.data.data}).catch(()=>"")},fetchQuestions(e){this.$http.get("questions?ids="+e,{headers:o.getAuthHeader()}).then(e=>{this.questions=e.data.data}).catch(()=>"")},fetchCompanySurvey(){this.$http.get("companysurvey/"+this.$route.params.id,{headers:o.getAuthHeader()}).then(e=>{this.company_survey=e.data,this.fetchQuestions(e.data.questions),this.fetchAnswers(e.data.answers)}).catch(()=>"")},setSelected(e){this.canMove()&&(this.selected=e,this.$refs.file.value="")},compare(e){return e==this.answers[this.selected].id_option?"background-color:#e84d20; color:white;":"background-color:white; color:black;"},getpoints(e,t){var a=2;return"-"!=e.q3&&(a=3),void 0!=e.q4&&"-"!=e.q4&&(a=4),t==a?1:1==t?0:2==t&3==a?.5:2==t&4==a?.33:.66},setOption(e){this.answers[this.selected].id_option=e,this.updateAnswer(this.answers[this.selected])},handleFileUpload(){this.answers[this.selected].justification_file=this.$refs.file.files[0].name;let e=new FormData;e.append("file",this.$refs.file.files[0]),this.$http.post("http://localhost:5000/upload?answer="+this.answers[this.selected].id,e,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{this.updateAnswer(this.answers[this.selected])}).catch(function(){console.log("FAILURE!!")})}},mounted(){this.fetchCompanySurvey()}}),E={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container bg-primary"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",[e._v("Company "+e._s(e.company_survey.name_survey)+"\n          "),a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"info-circle",scale:"1.5"}})],1)]),e._v(" "),a("div",{staticClass:"col-12"},[a("span",{on:{click:function(t){e.moveLeft()}}},[a("icon",{staticClass:"float-left",staticStyle:{height:"1em"},attrs:{name:"arrow-left",scale:"1.5"}})],1),e._v(" "),e._l(e.questions,function(t,s){return a("li",{staticStyle:{"background-color":"#e84d20"}},[a("span",{on:{click:function(t){e.setSelected(s)}}},[s==e.selected&&-1!=e.answers[e.selected].score?a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:"green"}}):e._e(),e._v(" "),s==e.selected&&-1==e.answers[e.selected].score?a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:"black"}}):e._e(),e._v(" "),s!=e.selected&&-1!=e.answers[s].score?a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle-o",color:"green"}}):e._e(),e._v(" "),s!=e.selected&&-1==e.answers[s].score?a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle-o",color:"black"}}):e._e()],1)])}),e._v(" "),a("span",{on:{click:function(t){e.moveRight()}}},[a("icon",{staticClass:"float-right",staticStyle:{height:"1em"},attrs:{scale:"1.5",name:"arrow-right"}})],1)],2)]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"padding-top":"1em"}},[a("div",{staticClass:"col-12"},[e._v("\n        Score: "+e._s(this.answers[this.selected].score)+" "+e._s(e.selected+1+"/"+e.answers.length)+"\n         "),a("h5",{staticClass:"text-left",staticStyle:{color:"white"}},[e._v("\n            "+e._s(e.questions[e.selected][e.lang].statement)+"\n            "),a("span",{attrs:{id:"exButton2"},on:{mouseover:function(t){e.showModaltooltip()}}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"question-circle",scale:"1.5"}})],1),e._v(" "),a("div",{staticClass:"container",staticStyle:{"max-width":"100%"},attrs:{id:"dav"}})])])]),e._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("ul",{staticClass:"list-group"},e._l(e.items,function(t){return"-"!=e.questions[e.selected][e.lang]["q"+t]?a("li",{staticClass:"list-group-item",style:e.compare(t),on:{click:function(a){e.setOption(t)}}},[e._v(" "+e._s(e.questions[e.selected][e.lang]["q"+t]))]):e._e()}))])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"padding-top":"1em"}},[""==e.answers[e.selected].justification_file?a("div",{staticClass:"col-sm-3"},[a("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(t){e.handleFileUpload()}}})]):a("div",{staticClass:"col-sm-3"},[e._v("\n         "+e._s(e.answers[e.selected].justification_file)+"\n         "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.deleteFile}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"remove",scale:"1.5"}})],1)])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"padding-top":"1em"}},[a("div",{staticClass:"col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.answers[e.selected].justification_text,expression:"answers[selected].justification_text"}],staticClass:"form-control",staticStyle:{height:"100px","background-color":"#e84d20",color:"white"},attrs:{type:"text",id:"inputcommercial_name",required:"",autofocus:""},domProps:{value:e.answers[e.selected].justification_text},on:{input:[function(t){t.target.composing||e.$set(e.answers[e.selected],"justification_text",t.target.value)},function(t){e.onInput()}]}})])]),e._v(" "),a("div",{staticClass:"row",staticStyle:{"padding-top":"2em"}},[a("div",{staticClass:"col-sm-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.answers[e.selected].future,expression:"answers[selected].future"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.answers[e.selected].future)?e._i(e.answers[e.selected].future,null)>-1:e.answers[e.selected].future},on:{change:function(t){var a=e.answers[e.selected].future,s=t.target,r=!!s.checked;if(Array.isArray(a)){var i=e._i(a,null);s.checked?i<0&&e.$set(e.answers[e.selected],"future",a.concat([null])):i>-1&&e.$set(e.answers[e.selected],"future",a.slice(0,i).concat(a.slice(i+1)))}else e.$set(e.answers[e.selected],"future",r)}}}),e._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[e._v(" Futurible")])]),e._v(" "),a("div",{staticClass:"col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.answers[e.selected].future_justification_text,expression:"answers[selected].future_justification_text"}],staticClass:"form-control",staticStyle:{height:"100px","background-color":"#e84d20",color:"white"},attrs:{type:"text",id:"inputcommercial_name",placeholder:e.questions[e.selected][e.lang].futurible,required:"",autofocus:""},domProps:{value:e.answers[e.selected].future_justification_text},on:{input:[function(t){t.target.composing||e.$set(e.answers[e.selected],"future_justification_text",t.target.value)},function(t){e.onInput()}]}})])]),e._v(" "),a("div",{staticStyle:{"padding-top":"1em"}},[a("span",{on:{click:function(t){e.moveLeft()}}},[a("icon",{staticClass:"float-left",staticStyle:{height:"1em"},attrs:{name:"arrow-left",scale:"1.5"}})],1),e._v(" "),a("b-button",{class:{disabled:!e.submittable},attrs:{variant:"success"},on:{click:function(t){e.submitSurvey()}}},[e._v("Submit")]),e._v(" "),a("span",{on:{click:function(t){e.moveRight()}}},[a("icon",{staticClass:"float-right",staticStyle:{height:"1em"},attrs:{scale:"1.5",name:"arrow-right"}})],1)],1),e._v(" "),a("b-modal",{ref:"myModalRef",attrs:{id:"myModal"}},[e._v("\n    "+e._s(this.error)+"\n     ")]),e._v(" "),a("b-modal",{ref:"tooltip",attrs:{id:"tooltip"}},[e._v("\n    "+e._s(e.questions[e.selected][e.lang].more_information)+"\n  "),a("img",{attrs:{src:"/static/img/"+e.questions[e.selected][e.lang].id+".jpg"}})])],1)},staticRenderFns:[]};var R=a("VU/8")(P,E,!1,function(e){a("Dfiq")},"data-v-31b8d0fa",null).exports,M=(a("15Ef"),a("7p6u"),a("dFBv"),a("i71b"),{components:{Icon:$.a},name:"Admin",data:()=>({msg:"Welcome to Your Vue.js App"})}),F={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("ul",{staticClass:"list-group"},[t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"#/admin/users"}},[this._v("Gestio usuari\n    "),t("icon",{staticStyle:{height:"1em","vertical-align":"middle"},attrs:{name:"user",scale:"4"}})],1)]),this._v(" "),t("li",{staticClass:"list-group-item"},[t("a",{attrs:{href:"#/admin/surveys"}},[this._v("Visualitzacio de questionaris\n\t\t"),t("icon",{staticStyle:{height:"1em","vertical-align":"middle"},attrs:{name:"clipboard",scale:"4"}})],1)]),this._v(" "),t("li",{staticClass:"list-group-item"},[this._v("Ranquing de resultats\n\t\t"),t("icon",{staticStyle:{height:"1em","vertical-align":"middle"},attrs:{name:"line-chart",scale:"4"}})],1),this._v(" "),t("li",{staticClass:"list-group-item"},[this._v("Extraccio d'informes\n\t\t"),t("icon",{staticStyle:{height:"1em","vertical-align":"middle"},attrs:{name:"download",scale:"4"}})],1)])])},staticRenderFns:[]};var N=a("VU/8")(M,F,!1,function(e){a("zDTP")},"data-v-3716bbf4",null).exports,U=(a("rcsw"),a("h+cp"),a("Vej+"),a("IF6D"),a("uXZL")),D=a.n(U),j=a("lDdF"),H={components:{Icon:$.a,"b-modal":C.a},name:"UsersManagement",data:()=>({users:[],error:"",filter_comarca:"",filter_leader:"",filtered:[]}),computed:{unique_comarca(){return w()(this.filtered.map(e=>e.comarca))},unique_leader(){return w()(this.filtered.map(e=>e.leader))},filtered_users(){var e=this.users;return""!=this.filter_comarca&&(e=_.filter(e,{comarca:this.filter_comarca})),""!=this.filter_leader&&(e=_.filter(e,{leader:this.filter_leader})),this.filtered=e,e}},methods:{setOption(e){this.users.forEach(function(t,a){a!=e&&(t.selected=!1)}),this.users[e].selected=!this.users[e].selected,console.log("sel")},exportUsers(){var e=D.a.utils.json_to_sheet(this.users),t=D.a.utils.book_new();D.a.utils.book_append_sheet(t,e,"People");var a=D.a.write(t,{bookType:"xlsx",type:"binary"});Object(j.saveAs)(new Blob([function(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),s=0;s!=e.length;++s)a[s]=255&e.charCodeAt(s);return t}(a)],{type:"application/octet-stream"}),"sheetjs.xlsx")},fetchUsers(){this.$http.get("users",{headers:o.getAuthHeader()}).then(e=>{e.data.data.map(function(e){e.selected=!1}),this.users=e.data.data}).catch(()=>"")},editUser(){var e;this.users.forEach(function(t,a){t.selected&&(e=t.id)}),void 0==e?(this.error="you have to select one user",this.showModalError()):this.$router.replace("/updateuseradmin?id="+e)},deleteUser(){var e;this.users.forEach(function(t,a){t.selected&&(e=t.id)}),void 0==e?(this.error="you have to select one user",this.showModalError()):this.$http.delete("user/"+e,{headers:o.getAuthHeader()}).then(e=>{console.log("deleted"),this.users=[],this.fetchUsers()}).catch(()=>"")},showModalError(){this.$refs.myModalError.show()},hideModalError(){this.$refs.myModalError.hide()}},mounted(){this.fetchUsers()}},I={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"container bg-primary"},[a("h4",[e._v("List of Users")]),e._v(" "),a("div",{staticClass:"col-sm-12"},[a("label",{staticClass:"control-label"},[e._v("Comarca")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filter_comarca,expression:"filter_comarca"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.filter_comarca=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),e._v(" "),e._l(e.unique_comarca,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2),e._v(" "),a("label",{staticClass:"control-label"},[e._v("Leader")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filter_leader,expression:"filter_leader"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.filter_leader=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),e._v(" "),e._l(e.unique_leader,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2)]),e._v(" "),a("a",{attrs:{href:"/#/registerAdmin"}},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"plus-circle",scale:"1.5"}})],1)]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){e.deleteUser()}}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"remove",scale:"1.5"}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){e.editUser()}}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"edit",scale:"1.5"}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){e.exportUsers()}}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"download",scale:"1.5"}})],1),e._v(" "),a("table",{staticClass:"table table-light table-bordered"},[e._m(0),e._v(" "),a("tbody",e._l(e.filtered_users,function(t,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selected)?e._i(t.selected,null)>-1:t.selected},on:{click:function(t){e.setOption(s)},change:function(a){var s=t.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=e._i(s,null);r.checked?o<0&&e.$set(t,"selected",s.concat([null])):o>-1&&e.$set(t,"selected",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(t,"selected",i)}}})]),e._v(" "),a("td",[e._v(e._s(t.email))]),e._v(" "),a("td",[e._v(e._s(t.company))]),e._v(" "),a("td",[e._v(e._s(t.type))])])}))])]),e._v(" "),a("b-modal",{ref:"myModalError",attrs:{id:"myModalError"}},[e._v("\n    "+e._s(this.error)+"\n     ")])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}}),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("User")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Company")]),this._v(" "),t("th",{attrs:{scope:"col"}},[this._v("Admin")])])])}]};var L=a("VU/8")(H,I,!1,function(e){a("bCdb")},"data-v-58f79c07",null).exports,T={components:{Icon:$.a,"b-modal":C.a},name:"UserPage",data:()=>({user:"dpiscia",company:{id:1},DARI_filename:"",survey:"",company_surveys:[],error:"",selected:""}),methods:{duplicate(){var e;this.company_surveys.forEach(function(t,a){t.selected&&(e=t.id)}),void 0==e?(this.error="you have to select one survey",this.showModalError()):this.$http.get("duplicatecompanysurvey/"+e,{headers:o.getAuthHeader()}).then(e=>{console.log("duplicated"),this.company_surveys=[],this.fetchCompanySurvey()}).catch(()=>"")},deleteSurvey(){var e;this.company_surveys.forEach(function(t,a){t.selected&&(e=t.id)}),void 0==e?(this.error="you have to select one survey",this.showModalError()):this.$http.delete("companysurvey/"+e,{headers:o.getAuthHeader()}).then(e=>{console.log("deleted"),this.company_surveys=[],this.fetchCompanySurvey()}).catch(()=>"")},setOption(e){this.company_surveys.forEach(function(t,a){a!=e&&(t.selected=!1)}),this.company_surveys[e].selected=!this.company_surveys[e].selected,console.log("sel")},fetchCompany(){this.$http.get("company",{headers:o.getAuthHeader()}).then(e=>this.company=e.data).catch(()=>"")},fetchSurvey(){this.$http.get("survey",{headers:o.getAuthHeader()}).then(e=>this.survey=e.data).catch(()=>"")},fetchCompanySurvey(){this.$http.get("companysurvey",{headers:o.getAuthHeader()}).then(e=>{e.data.map(function(e){e.selected=!1}),this.company_surveys=e.data}).catch(()=>"")},DARI_needed(){return"Industrial"==this.company.sector||"Agroalimentari"==this.company.sector},createCompanySurvey(){this.DARI_needed()&&""==this.DARI_filename?this.error="you need to upload a DARI file":this.$http.post("companysurvey",{id_survey:this.survey.id,file_dari:this.DARI_filename,id_company:this.company.id},{headers:o.getAuthHeader()}).then(e=>this.registerSuccessful(e)).catch(e=>this.registerFailed(e))},registerSuccessful(e){this.handleFileUpload(e.data.message.split(" ")[2]),this.company_surveys=[],this.fetchCompanySurvey(),this.hideModal(),this.showModalInstructions()},registerFailed(e){this.error=e.response.data.message},showModal(){this.DARI_filename,this.$refs.myModalRef.show()},hideModal(){this.$refs.myModalRef.hide()},showModalInstructions(){this.$refs.instructions.show()},hideModalInstructions(){this.$refs.instructions.hide()},showModalError(){this.$refs.myModalError.show()},hideModalError(){this.$refs.myModalError.hide()},setFileName(){this.DARI_filename=this.$refs.file.files[0].name},handleFileUpload(e){this.DARI_filename=this.$refs.file.files[0].name;let t=new FormData;t.append("file",this.$refs.file.files[0]),this.$http.post("http://localhost:5000/upload?surveycompany_id="+e,t,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{console.log("OK")}).catch(function(){console.log("FAILURE!!")})}},mounted(){this.fetchCompany(),this.fetchSurvey(),this.fetchCompanySurvey()}},B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h4",{staticStyle:{color:"white"}},[e._v(e._s(e.company.commercial_name)+"\n    "),a("a",{attrs:{href:"#/registercompany"}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"edit",color:"white",scale:"1.5"}})],1)]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.showModal}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"plus-circle",scale:"1.5"}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.deleteSurvey}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"remove",scale:"1.5"}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(t){e.duplicate()}}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"copy",scale:"1.5"}})],1),e._v(" "),a("table",{staticClass:"table table-light table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}}),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Nom questionari")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Estat")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Ultima data modificacio")]),e._v(" "),a("th",{attrs:{scope:"col"}},[a("icon",{staticStyle:{height:"1em","vertical-align":"middle"},attrs:{name:"line-chart",scale:"1"}}),e._v("Puntuacio obtinguda")],1),e._v(" "),a("th",{attrs:{scope:"col"}},[a("icon",{staticStyle:{height:"1em","vertical-align":"middle"},attrs:{name:"line-chart",scale:"1"}}),e._v("Puntuacio futurible")],1)])]),e._v(" "),a("tbody",e._l(e.company_surveys,function(t,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selected)?e._i(t.selected,null)>-1:t.selected},on:{click:function(t){e.setOption(s)},change:function(a){var s=t.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=e._i(s,null);r.checked?o<0&&e.$set(t,"selected",s.concat([null])):o>-1&&e.$set(t,"selected",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(t,"selected",i)}}})]),e._v(" "),"created"==t.status?a("td",{attrs:{color:"white"}},[a("a",{staticStyle:{color:"black"},attrs:{href:"#/questions/"+t.id}},[e._v(e._s(t.name_survey)+"  ")])]):e._e(),e._v(" "),"created"!=t.status?a("td",{attrs:{color:"white"}},[a("a",{staticStyle:{color:"black"},attrs:{href:"#/results/"+t.id}},[e._v(e._s(t.name_survey)+"  ")])]):e._e(),e._v(" "),a("td",[e._v(e._s(t.status))]),e._v(" "),a("td",[e._v(e._s(t.last_modified))]),e._v(" "),a("td",[a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:"green"}}),e._v("\n       "+e._s(t.score))],1),e._v(" "),a("td",[a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:"green"}}),e._v("\n       "+e._s(t.score+t.score_future))],1)])}))]),e._v(" "),a("b-modal",{ref:"myModalRef",attrs:{"hide-footer":"",title:""}},[a("div",{staticClass:"d-block text-center"},[a("h3",[e._v("Crear un formulari")]),e._v(" "),1==e.DARI_needed()?a("div",{staticClass:"custom-file"},[a("label",{staticClass:"custom-file-label",attrs:{for:"file"}},[e._v("Adjuntar DARI ")]),e._v(" "),a("input",{ref:"file",staticClass:"form-control-file",attrs:{type:"file",id:"file"},on:{change:function(t){e.setFileName()}}})]):e._e(),e._v("\n      \n      "+e._s(e.error)+"\n      ")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:e.hideModal}},[e._v("Cancel")]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:e.createCompanySurvey}},[e._v("Create")])]),e._v(" "),a("b-modal",{ref:"myModalError",attrs:{id:"myModalError"}},[e._v("\n    "+e._s(this.error)+"\n     ")]),e._v(" "),a("b-modal",{ref:"instructions",attrs:{id:"instructions"}},[e._v("\n    1. Fer clic al botó 'Crear'. Això generarà un qüestionari amb nom automàtic (nom empresa+any+versió) i mostrarà la pantalla amb la primera pregunta.\n2. Cada pregunta està composada dels següents elements:\na) Barra de progrés: mostra tants punts com preguntes a respondre. Els punts en verd representen preguntes que ja s'han respòs, mentre que els negres representen preguntes pendents.\nb) Enunciat de la pregunta: situa el tema que s'està avaluant\nc) Més informació sobre la pregunta: la icona (?) mostra informació extra sobre el tema avaluat\nd) Possibles respostes: 2,3 o 4 possibles respostes entre les que s'ha d'escollir la situació més propera a la realitat de l'empresa.\ne) Botó d'adjuntar document: \n     ")])],1)},staticRenderFns:[]};var z=a("VU/8")(T,B,!1,function(e){a("WSdz")},"data-v-6025b4bd",null).exports,V=(a("M4fF"),a("l9mu"),a("m/C5")),O=a.n(V),G={components:{"b-button":A.a},name:"Results",data:()=>({data:[{name:"Recursos",percent:14.3,id:1},{name:"Fabricació i distribució",percent:14.3,id:2},{name:"Ús",percent:14.3,id:3},{name:"Reparació",percent:14.3,id:4},{name:"Reús",percent:14.3,id:5},{name:"Remanufactura",percent:14.3,id:6},{name:"Reciclatge",percent:14.3,id:7}],questions:[],selected:0,answers:[],answerplus:[],company_survey:"",score:"",results_avg:"",results:"",results_avg_future:0,proposals:[]}),computed:{lang:function(){return this.$i18n.locale()}},methods:{exportToPDF:function(){console.log("exported");var e=window.document.getElementById("printable");O()(e)},filtered:function(e){var t=this.questions,a=[];return this.answers.filter(function(s,r){s.score<1&&t[r].cat.strategy==e&&a.push(r)}),a},computeScore(){var e;e=this.answers;var t;t=this.questions.map(e=>e.cat);var a=[];a=_.map(e,function(e){return _.assign(e,_.find(t,{id:e.id_question}))}).reduce(function(e,t){var a=e[t.strategy];return a?(a.score=a.score+t.score,a.score_future=a.score_future+t.score_future,a.nums=a.nums+1):(e[t.strategy]={score:t.score,score_future:t.score_future},e[t.strategy].nums=1),e},{});var s={score:0,score_future:0,numsector:0,avg:0,avg_future:0};for(var r in s.score=0,s.numsector=0,a)a[r].avg=a[r].score/a[r].nums,a[r].avg_future=a[r].score_future/a[r].nums,s.score=s.score+a[r].avg,s.score_future=s.score_future+a[r].avg_future,s.numsector=s.numsector+1;this.results=a,s.avg=Math.round(100*s.score/s.numsector*100)/100,s.avg_future=Math.round(100*s.score_future/s.numsector*100)/100,this.results_avg=s,this.company_survey.score=Math.round(100*s.avg)/100,this.company_survey.score_future=Math.round(100*s.avg_future)/100,""!=this.company_survey.pub_date&&this.updateCompanySurvey(),this.renderChart(this.$data.data)},fetchAnswers(e){this.$http.get("answers?ids="+e,{headers:o.getAuthHeader()}).then(e=>{this.answers=e.data.data,this.computeScore()}).catch(()=>"")},fetchQuestions(e,t){this.$http.get("questions?ids="+e,{headers:o.getAuthHeader()}).then(e=>{this.questions=e.data.data,this.fetchAnswers(t)}).catch(()=>"")},fetchCompanySurvey(){this.$http.get("companysurvey/"+this.$route.params.id,{headers:o.getAuthHeader()}).then(e=>{this.company_survey=e.data,this.fetchQuestions(e.data.questions,e.data.answers)}).catch(()=>"")},fetchProposals(){this.$http.get("proposals",{headers:o.getAuthHeader()}).then(e=>{this.proposals=e.data}).catch(()=>"")},updateCompanySurvey(){var e=this.company_survey;this.$http.put("companysurvey/"+e.id,{company_survey:e},{headers:o.getAuthHeader()}).then(e=>{console.log("OK")}).catch(()=>this.error="")},renderChart:function(e){var t=this.results,a=d3.layout.pie().value(function(e){return e.percent}).sort(null).padAngle(.03),s=d3.scale.category10(),r=d3.svg.arc().outerRadius(150).innerRadius(100),i=d3.select("#chart").append("svg").attr({width:600,height:600,class:"shadow"}).append("g").attr({transform:"translate(300,200)"}),o=(i.selectAll("path").data(a(e)).enter().append("path").attr({d:r,fill:function(e,a){return void 0==t[e.data.name]?"#DC58D8":t[e.data.name].avg<.2?"#F5F7F1":t[e.data.name].avg>=.2&&t[e.data.name].avg<.5?"#D8DE23":"#43AE1D"}}),i.selectAll("text").data(a(e)).enter().append("text").transition().duration(200).attr("transform",function(e){return"translate("+r.centroid(e)+")"}).attr("dy",".4em").attr("text-anchor","middle").text(function(e){return e.data.id+"."+e.data.name}).style({fill:"black","font-size":"10px"}),s=d3.scale.ordinal().domain(["Estratègia amb alt potencial de millora","Estratègia amb potencial de millora mitjà","Estratègia amb bona puntuació obtinguda","Estratègia no aplicable al sector de l'empresa"]).range(["#F5F7F1","#D8DE23","#43AE1D","#DC58D8"]),i.selectAll(".legend").data(s.domain()).enter().append("g").attr({class:"legend",transform:function(e,t){return"translate(-118,"+(100+47*t+100)+")"}}));o.append("rect").attr({width:40,height:40,rx:20,ry:20}).style({fill:s,stroke:s}),o.append("text").attr({x:50,y:15}).text(function(e){return e}).style({fill:"#929DAF","font-size":"14px"})}},mounted(){this.fetchCompanySurvey(),this.fetchProposals()}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello",attrs:{id:"printable"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"col-md-4 offset-md-4",staticStyle:{"background-color":"black","border-radius":"5ex !important"}},[a("p",{staticClass:"text-light"},[e._v(" Empresa  "+e._s(e.company_survey.company)+" ")]),e._v(" "),a("p",{staticClass:"text-light"},[e._v(" Nom questionari : "+e._s(e.company_survey.name_survey))]),e._v(" "),a("p",{staticClass:"text-light"},[e._v(" Data d'avaluacio "+e._s(e.company_survey.pub_date))]),e._v(" "),a("p",{staticClass:"text-light"},[e._v(" Punctuacio obtinguda  "+e._s(e.results_avg.avg)+"/100")]),e._v(" "),a("p",{staticClass:"text-light"},[e._v(" Punctuacio futurible  "+e._s(e.results_avg.avg+e.results_avg.avg_future)+"/100")])])]),e._v(" "),a("div",{staticClass:"chart",attrs:{id:"chart"}}),e._v(" "),a("p",{staticClass:"text-light"},[e._v("\n\tPropostes de millora per estrategia;\n  ")]),e._v(" "),e._l(e.results,function(t,s){return a("span",{staticClass:"demo"},[a("li",{staticClass:"list-group-item",staticStyle:{color:"#e84d20","border-top-left-radius":"5ex !important","border-top-right-radius":"5ex !important"}},[e._v(e._s(s))]),e._v(" "),t.avg<1?a("span",e._l(e.proposals[s][e.lang],function(t,s){return a("li",{staticClass:"list-group-item"},[a("p",[e._v("\n\n       "+e._s(t)+"\n      ")])])})):e._e(),e._v(" "),e._l(e.filtered(s),function(t,s){return a("li",{staticClass:"list-group-item"},[a("p",[e._v("\n\n\t\t   "+e._s(e.questions[t][e.lang].proposta_millora)+"\n\t\t  ")])])}),e._v(" "),a("li",{staticClass:"list-group-item",staticStyle:{"border-bottom-left-radius":"5ex !important","border-bottom-right-radius":"5ex !important"}}),e._v(" "),a("p")],2)}),e._v(" "),a("b-button",{on:{click:function(t){e.exportToPDF()}}},[e._v("Export")])],2)},staticRenderFns:[]};var W=a("VU/8")(G,Q,!1,function(e){a("9cmv")},"data-v-01b5b55c",null).exports,K={name:"Register",data:()=>({email:"",password:"",confirmPassword:"",error:"",admin:!0,user_id:""}),computed:{currentRoute(){return"/updateuseradmin"==this.$route.path},comparePasswords(){return this.password===this.confirmPassword||(error="Passwords don't match",!1)}},methods:{fetchUser(){var e="user";void 0!=this.$route.query.id?e="user/"+this.$route.query.id:this.user_id=-1,this.$http.get(e,{headers:o.getAuthHeader()}).then(e=>{this.email=e.data.email,void 0!=e.data.type_user&&1==e.data.type_user?this.admin=!0:this.admin=!1}).catch(()=>"")},register(){var e="user";void 0!=this.$route.query.id&&(e="user/"+this.$route.query.id);var t=this.$route.query.id;this.$http.put(e,{username:this.email,password:this.password,admin:this.admin},{headers:o.getAuthHeader()}).then(e=>{this.error="created",this.$router.replace(this.$route.query.redirect||"/registercompany/"+t)}).catch(()=>this.error=message)},registerSuccessful(e){e.data.access_token?(this.error="",this.$router.replace(this.$route.query.redirect||"/registercompany")):this.loginFailed(e.data.message)},loginFailed(e){this.error=e}},mounted(){this.fetchUser()}},Y={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register-wrapper border border-light"},[a("form",{staticClass:"form-signin",on:{submit:function(t){return t.preventDefault(),e.register(t)}}},[a("h2",{staticClass:"form-signin-heading"},[e._v("Change email")]),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[e._v("Email address")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),e.currentRoute?a("div",{staticClass:"form-check float-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.admin,expression:"admin"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(e.admin)?e._i(e.admin,null)>-1:e.admin},on:{change:function(t){var a=e.admin,s=t.target,r=!!s.checked;if(Array.isArray(a)){var i=e._i(a,null);s.checked?i<0&&(e.admin=a.concat([null])):i>-1&&(e.admin=a.slice(0,i).concat(a.slice(i+1)))}else e.admin=r}}}),e._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[e._v("Administrator")])]):e._e(),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[e._v("Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"confirmInputPassword"}},[e._v("Password")]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmInputPassword",placeholder:"Change Password"},domProps:{value:e.confirmPassword},on:{input:function(t){t.target.composing||(e.confirmPassword=t.target.value)}}}),e._v(" "),e.currentRoute?a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[e._v("Actualizar")]):a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[e._v("Register")]),e._v(" "),a("span",[e._v(e._s(e.error))])])])},staticRenderFns:[]};var Z=a("VU/8")(K,Y,!1,function(e){a("hCDT")},"data-v-0c8abd72",null).exports,J={name:"HelloWorld",data:()=>({company:"",survey:"",questions:"",questions_applied:""}),computed:{lang:function(){return this.$i18n.locale()}},methods:{updateSurvey(){var e=[];this.questions.map(function(t,a){t.selected&&e.push(a+1)}),this.$http.put("survey",{questions:e.join(),id_company:this.company.id},{headers:o.getAuthHeader()}).then(e=>{console.log("ok"),this.$router.replace(this.$route.query.redirect||"/admin/users")}).catch(()=>"")},fetchCompany(){this.$http.get("company?user_id="+this.$route.params.id,{headers:o.getAuthHeader()}).then(e=>{this.company=e.data,this.fetchQuestions()}).catch(()=>"")},fetchSurvey(){this.$http.get("survey?id="+this.company.id,{headers:o.getAuthHeader()}).then(e=>{this.survey=e.data,this.questions_applied=e.data.questions.split(",");var t=this.questions;this.questions_applied.forEach(function(e,a){t[e-1].selected=!0}),this.questions=t}).catch(()=>"")},fetchQuestions(e){this.$http.get("questions",{headers:o.getAuthHeader()}).then(e=>{e.data.data.map(function(e){e.selected=!1}),this.questions=e.data.data,this.fetchSurvey()}).catch(()=>"")}},mounted(){this.fetchCompany()}},X={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("table",{staticClass:"table table-light table-bordered"},[e._m(0),e._v(" "),a("tbody",e._l(e.questions,function(t,s){return a("tr",[a("td",[e._v(e._s(t[e.lang].statement))]),e._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selected)?e._i(t.selected,null)>-1:t.selected},on:{change:function(a){var s=t.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=e._i(s,null);r.checked?o<0&&e.$set(t,"selected",s.concat([null])):o>-1&&e.$set(t,"selected",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(t,"selected",i)}}})])])}))]),e._v(" "),a("button",{attrs:{variant:"success"},on:{click:function(t){e.updateSurvey()}}},[e._v("Desa")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("thead",[t("tr",[t("th",{attrs:{scope:"col"}})])])}]};var ee=a("VU/8")(J,X,!1,function(e){a("tWGf")},"data-v-225ae4f2",null).exports,te={components:{Icon:$.a,"b-modal":C.a},name:"UserPage",data:()=>({user:"dpiscia",company:{id:1},DARI_filename:"",survey:"",company_surveys:[],error:"",selected:"",filter_status:"",filter_sector:"",filter_subsector:"",filter_comarca:"",companies:"",filter_company:"",filtered:[],dataExcel:[]}),computed:{unique_status(){return w()(this.filtered.map(e=>e.status))},unique_company(){return w()(this.filtered.map(e=>e.commercial_name))},unique_sector(){return w()(this.filtered.map(e=>e.sector))},unique_subsector(){return w()(this.filtered.map(e=>e.subsector))},unique_comarca(){return w()(this.filtered.map(e=>e.comarca))},filtered_surveys(){var e=this.company_surveys;return""!=this.filter_company&&(e=_.filter(e,{commercial_name:this.filter_company})),""!=this.filter_status&&(e=_.filter(e,{status:this.filter_status})),""!=this.filter_sector&&(e=_.filter(e,{sector:this.filter_sector})),""!=this.filter_subsector&&(e=_.filter(e,{subsector:this.filter_subsector})),""!=this.filter_comarca&&(e=_.filter(e,{comarca:this.filter_comarca})),this.filtered=e,e}},methods:{downloadAnswers(){this.$http.get("dataExcel",{headers:o.getAuthHeader()}).then(e=>{var t=D.a.utils.json_to_sheet(e.data),a=D.a.utils.book_new();D.a.utils.book_append_sheet(a,t,"People");var s=D.a.write(a,{bookType:"xlsx",type:"binary"});Object(j.saveAs)(new Blob([function(e){for(var t=new ArrayBuffer(e.length),a=new Uint8Array(t),s=0;s!=e.length;++s)a[s]=255&e.charCodeAt(s);return t}(s)],{type:"application/octet-stream"}),"sheetjs.xlsx")}).catch(()=>"")},downloadAllSurvey(){this.$http.get("surveyFiles",{responseType:"arraybuffer",headers:o.getAuthHeader()}).then(e=>{console.log("download");let t=new Blob([e.data],{type:"application/zip"},name="prova"),a=window.URL.createObjectURL(t);t.name="survey",window.open(a)}).catch(()=>"")},downloadSurvey(){var e;this.filtered.forEach(function(t,a){t.selected&&(e=t.id_surveycompany)}),void 0==e?(this.error="you have to select one survey",this.showModalError()):this.$http.get("surveyFiles/"+e,{responseType:"arraybuffer",headers:o.getAuthHeader()}).then(e=>{console.log("download");let t=new Blob([e.data],{type:"application/zip"},name="prova"),a=window.URL.createObjectURL(t);t.name="survey",window.open(a)}).catch(()=>"")},deleteSurvey(){var e;this.filtered.forEach(function(t,a){t.selected&&(e=t.id_surveycompany)}),void 0==e?(this.error="you have to select one survey",this.showModalError()):this.$http.delete("companysurvey/"+e,{headers:o.getAuthHeader()}).then(e=>{console.log("deleted"),this.company_surveys=[],this.fetchCompanySurvey()}).catch(()=>"")},setOption(e){this.filtered.forEach(function(t,a){a!=e&&(t.selected=!1)}),this.filtered[e].selected=!this.company_surveys[e].selected,console.log("sel")},fetchCompanySurvey(){this.$http.get("companysurvey?type=all",{headers:o.getAuthHeader()}).then(e=>{e.data.map(function(e){e.selected=!1,e.id_surveycompany=e.id}),this.company_surveys=e.data,this.fetchCompanies()}).catch(()=>"")},fetchCompanies(){this.$http.get("companies",{headers:o.getAuthHeader()}).then(e=>{this.companies=e.data;var t=_.map(this.company_surveys,function(t){return _.merge(t,_.find(e.data,{id:t.id_company}))});this.company_surveys=t}).catch(()=>"")},fetchQuestions(e){this.$http.get("dataExcel",{headers:o.getAuthHeader()}).then(e=>{this.dataExcel=e.data.data}).catch(()=>"")},showModalError(){this.$refs.myModalError.show()},hideModalError(){this.$refs.myModalError.hide()}},mounted(){this.fetchCompanySurvey()}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("div",{staticClass:"col-sm-12"},[a("label",{staticClass:"control-label"},[e._v("Status")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filter_status,expression:"filter_status"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.filter_status=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),e._v(" "),e._l(e.unique_status,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2),e._v(" "),a("label",{staticClass:"control-label"},[e._v("Company")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filter_company,expression:"filter_company"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.filter_company=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),e._v(" "),e._l(e.unique_company,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2),e._v(" "),a("label",{staticClass:"control-label"},[e._v("Sector")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filter_sector,expression:"filter_sector"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.filter_sector=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),e._v(" "),e._l(e.unique_sector,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2),e._v(" "),a("label",{staticClass:"control-label"},[e._v("SubSector")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filter_subsector,expression:"filter_subsector"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.filter_subsector=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),e._v(" "),e._l(e.unique_subsector,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2),e._v(" "),a("label",{staticClass:"control-label"},[e._v("Comarca")]),e._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:e.filter_comarca,expression:"filter_comarca"}],on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){return"_value"in e?e._value:e.value});e.filter_comarca=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),e._v(" "),e._l(e.unique_comarca,function(t){return a("option",{domProps:{value:t}},[e._v(e._s(t))])})],2)]),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.deleteSurvey}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"remove",scale:"1.5"}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.downloadSurvey}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"download",scale:"1.5"}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.downloadAllSurvey}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"download",scale:"1.5"}})],1),e._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:e.downloadAnswers}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"download",scale:"1.5"}})],1),e._v(" "),a("table",{staticClass:"table table-light table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}}),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Nom compania")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Nom questionari")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Estat")]),e._v(" "),a("th",{attrs:{scope:"col"}},[e._v("Ultima data modificacio")]),e._v(" "),a("th",{attrs:{scope:"col"}},[a("icon",{staticStyle:{height:"1em","vertical-align":"middle"},attrs:{name:"line-chart",scale:"1"}}),e._v("Puntuacio obtinguda")],1),e._v(" "),a("th",{attrs:{scope:"col"}},[a("icon",{staticStyle:{height:"1em","vertical-align":"middle"},attrs:{name:"line-chart",scale:"1"}}),e._v("Puntuacio futurible")],1)])]),e._v(" "),a("tbody",e._l(e.filtered_surveys,function(t,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.selected)?e._i(t.selected,null)>-1:t.selected},on:{click:function(t){e.setOption(s)},change:function(a){var s=t.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=e._i(s,null);r.checked?o<0&&e.$set(t,"selected",s.concat([null])):o>-1&&e.$set(t,"selected",s.slice(0,o).concat(s.slice(o+1)))}else e.$set(t,"selected",i)}}})]),e._v(" "),a("td",[e._v(e._s(t.commercial_name))]),e._v(" "),a("td",{attrs:{color:"white"}},[a("a",{staticStyle:{color:"black"},attrs:{href:"#/questions/"+t.id}},[e._v(e._s(t.name_survey)+"  ")])]),e._v(" "),a("td",[e._v(e._s(t.status))]),e._v(" "),a("td",[e._v(e._s(t.last_modified))]),e._v(" "),a("td",[a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:"green"}}),e._v("\n       "+e._s(t.score))],1),e._v(" "),a("td",[a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:"green"}}),e._v("\n       "+e._s(t.score+t.score_future))],1)])}))]),e._v(" "),a("b-modal",{ref:"myModalError",attrs:{id:"myModalError"}},[e._v("\n    "+e._s(this.error)+"\n     ")])],1)},staticRenderFns:[]};var se=a("VU/8")(te,ae,!1,function(e){a("Nf/6")},"data-v-7779b682",null).exports,re={name:"HelloWorld",data:()=>({msg:"ADCC"}),computed:{lang:function(){return this.$i18n.locale()}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("h1",[e._v(e._s(e.msg))]),e._v(" "),"cat"==e.lang?a("div",[e._v('\n   \t"L’Associació pel Desenvolupament Rural de la Catalunya Central és una associació sense ànim de lucre, reconeguda com a Grup d’Acció Local (GAL) pel Departament d’agricultura, ramaderia, pesca i alimentació de la Generalitat de Catalunya, que té com objectiu principal “Catalunya central territori de qualitat” tenint com a pilars centrals :\n\n – La valorització del territori i l’entorn com a elements vertebradors d’una cohesió i responsabilitat territorial. \n– Fomentar l’esperit empresarial. \n– Apostar pel capital humà i la millora de l’ocupabilitat\n\nPer més informació, consultar el web http://www.catcentral.cat/pages/ca/inici.php"\n   ')]):a("div",[e._v('\n   \t"La Asociación por el Desarrollo Rural de la Cataluña Central es una asociación sin ánimo de lucro, reconocida como Grupo de Acción Local (GAL) por el Departamento de agricultura, ganadería, pesca y alimentación de la Generalitat de Catalunya, que tiene como objetivo principal ""Catalunya central territorio de calidad"" teniendo como pilares centrales:\n\n- La valorización del territorio y el entorno como elementos vertebradores de una cohesión y responsabilidad territorial.\n- Fomentar el espíritu empresarial.\n- Apostar por el capital humano y la mejora de la ocupabilidad.\n\nPara más información, consultar la web http://www.catcentral.cat/pages/ca/inici.php"\n   ')]),e._v(" "),a("img",{staticStyle:{width:"200px"},attrs:{src:"/static/img/ADCC.png"}}),e._v(" "),"cat"==e.lang?a("div",[e._v("\n   \tInèdit és un estudi d'ecoinnovació estratègica que treballa per a la transició cap a un futur intel·ligent, pròsper i sostenible. Ens aliem amb les organitzacions del demà acompanyant-les a gestionar el canvi que planteja l'economia circular.\n   ")]):a("div",[e._v("\n   \tInèdit es un estudio de ecoinnovación estratégica que trabaja para la transición hacia un futuro inteligente, próspero y sostenible. Nos aliamos con las organizaciones del mañana acompañándolas a gestionar el cambio que plantea la economía circular.\n   ")]),e._v(" "),a("img",{staticStyle:{width:"200px"},attrs:{src:"/static/img/inedit.png"}}),e._v(" "),"cat"==e.lang?a("div",[e._v("\n   \t\"Què és l'economia circular?\nL'economia circular és un model econòmic orientat a l'assoliment de sistemes de producció i consum més eficients, que preservin els recursos dins d'un cicle continu i n'optimitzin el seu valor.\nEls valors clau de l'economia circular són:\n- Prioritzar els recursos renovables\n- Conservar els recursos existents\n- Entendre els residus com recursos útils\n- Repensar el model de negoci\n- Ecodissenyar pel futur\n- Incorporar la tecnologia digital\n- Col·laborar per crear valor compartit\n\nQuins beneficis aporta?\nAmb l'economia circular, les economies es poden beneficiar d'estalvis en materials, reducció de l'exposició a la volatilitat de preus i riscs en subministrament, innovació, recerca i coneixement, creació de llocs de treball, reducció d'emissions de Gasos d'Efecte Hivernable i millora de la qualitat de vida.\"\n")]):a("div",[e._v('\n\t"¿Qué es la economía circular?\nLa economía circular es un modelo económico orientado al logro de sistemas de producción y consumo más eficientes, que preserven los recursos dentro de un ciclo continuo y optimicen su valor.\nLos valores clave de la economía circular son:\n- Priorizar los recursos renovables\n- Conservar lo recursos existentes\n- Entender los residuos como recursos útiles\n- Repensar el modelo de negocio\n- Ecodiseñar para el futuro\n- Incoroporar la tecnología digital\n- Colaborar para crear valor compartido\n\n¿Qué beneficios aporta?\nCon la economía circular, las economías se pueden beneficiar de ahorros en materiales, reducción de la exposición a la volatilidad de precios y riesgos en el suministro, innovación, investigación y conocimiento, creación de puestos de trabajo, reducción de emisiones de Gases de Efecto Invernadero y mejora de la calidad de vida."\n\t')])])},staticRenderFns:[]};var oe=a("VU/8")(re,ie,!1,function(e){a("PjRf")},"data-v-39a1f577",null).exports;s.a.use(u.a);const ne=new u.a({routes:[{path:"/",name:"Login",component:v},{path:"/quisom",name:"quisom",component:oe},{path:"/registerAdmin",name:"Register",component:y,secure:!0},{path:"/admin/surveys",name:"ManageSurvey",component:se,secure:!0},{path:"/register",name:"Register",component:y,secure:!1},{path:"/updatesurvey/:id",name:"EditSurvey",component:ee,secure:!0},{path:"/updateuser",name:"UpdateUser",component:Z,secure:!0},{path:"/updateuseradmin",name:"UpdateUser",component:Z,secure:!0},{path:"/registercompany",name:"RegisterCompany",component:q,secure:!0},{path:"/registercompany/:id",name:"RegisterCompany",component:q,secure:!0},{path:"/questions/:id",name:"Questions",component:R,secure:!0},{path:"/results/:id",name:"Results",component:W,secure:!0},{path:"/admin",name:"Admin",component:N,secure:!0},{path:"/admin/users",name:"UsersManagement",component:L,secure:!0},{path:"/user",name:"UserPage",component:z,secure:!0}]});console.log("interce"),ne.beforeEach((e,t,a)=>{ne.options.routes.forEach(t=>{e.matched[0].path===t.path&&t.secure&&ne.app.$http.post("http://localhost:5000/auth/loggedin","data",{headers:o.getAuthHeader()}).catch(e=>{if(200!=e.response.status)return a("/")})}),a()});var ce=ne,le=a("Rf8U"),ue=a.n(le),de=a("mtWM"),me=a.n(de);const he=Object({NODE_ENV:"production"}).API_URL||"http://ineditencercla.pythonanywhere.com";var pe=me.a.create({baseURL:he,headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token}});s.a.use(ue.a,pe);var ve=a("e6fC"),_e=a("NYxO"),fe=a("kmDT");a("qb6w"),a("9M+g");s.a.config.productionTip=!1,s.a.use(ve.a),s.a.use(_e.a);const ge=new _e.a.Store;s.a.use(fe.a.plugin,ge);const ye={"Correu electronic":"Correo electronico","iniciar  sessiò":"iniciar session",contrasenya:"contraseña","Donar d'alta la meva empresa":"Dar de alta mi empresa","contrasenya no coincideix":"contraseña no coincide","Usuari ja existeix":"el usuario ya existe ",User:"Usuario","Nom comercial":"Nombre comercial","Nom i cognoms":"Nombre y apellidos","Telèfon":"Teléfono","Descripció activitat":"Descripción actividad","Territori Leader":"Territorio Leader","Número de treballadors":"Número de trabajadores",Actualitzar:"Actualizar",Agroalimentari:"Agroalimentario","Agricultura i ramaderia":"Agricultura y ganadería","Pesca i caça":"Pesca y caza","Productes càrnics":"Productos cárnicos","Fruites i hortalisses":"Frutas y hortalizas",Oli:"Aceite","Productes lactis":"Productos lácteos","Productes de fleca":"Productos de panadería",Begudes:"Bebidas",Altres:"Otros",Fusta:"Madera","Maquinària":"Maquinaria","Química":"Química","Metal·lúrgia":"Metalurgia","Tèxtil":"Textil","Construcció":"Construcción",Altres:"Otros",Industrial:"Industrial","Comerç a l'engròs i al detall de productes d'alimentació":"Comercio al por mayor y al pormenor de productos de alimentación","Comerç a l'engròs i al detall d'altres productes":"Comercio al por mayor y al pormenor de otros productos","Transport i emmagatzematge":"Transporte y almacenaje","Restauració":"Restauración",Allotjament:"Alojamiento","Reparació de vehicles de motor i motocicletes":"Reparación de vehículos de motor y motocicletas","Activitats professionals, científiques i tècniques":"Actividades profesionales, científicas y técnicas","Activitats sanitàries":"Actividades sanitarias","Educació":"Educación","Activitats artístiques, recreatives i d'entreteniment":"Actividades artísticas, recreativas y de entretenimiento","Altres serveis":"Otros servicios","Administració pública":"Administración pública",Serveis:"Servicios","Públic":"Público","Alt Camp":"Alt Camp","Alt Empordà":"Alt Empordà","Alt Penedès":"Alt Penedès","Alt Urgell":"Alt Urgell","Alta Ribagorça":"Alta Ribagorça",Anoia:"Anoia",Bages:"Bages","Baix Camp":"Baix Camp","Baix Ebre":"Baix Ebre","Baix Empordà":"Baix Empordà","Baix Llobregat":"Baix Llobregat","Baix Penedès":"Baix Penedès","Barcelonès":"Barcelonès","Berguedà":"Berguedà",Cerdanya:"Cerdanya","Conca de Barberà":"Conca de Barberà",Garraf:"Garraf","Les Garrigues":"Les Garrigues",Garrotxa:"Garrotxa","Gironès":"Gironès",Maresme:"Maresme","Moianès":"Moianès","Montsià":"Montsià",Noguera:"Noguera",Osona:"Osona","Pallars Jussà":"Pallars Jussà","Pallars Sobirà":"Pallars Sobirà","Pla de l'Estany":"Pla de l'Estany","Pla d'Urgell":"Pla d'Urgell",Priorat:"Priorat","Ribera d'Ebre":"Ribera d'Ebre","Ripollès":"Ripollès",Segarra:"Segarra","Segrià":"Segrià",Selva:"Selva","Solsonès":"Solsonès","Tarragonès":"Tarragonès","Terra Alta":"Terra Alta",Urgell:"Urgell","Val d'Aran (Vall d'Aran)":"Val d'Aran (Vall d'Aran)","Vallès Occidental":"Vallès Occidental","Vallès Oriental":"Vallès Oriental"};s.a.i18n.add("es",ye),s.a.i18n.set("cat"),new s.a({el:"#app",router:ce,store:ge,axios:void 0,components:{App:l},template:"<App/>",http:{root:"http://localhost:5000"}})},"Nf/6":function(e,t){},PjRf:function(e,t){},SHlT:function(e,t){},WSdz:function(e,t){},bCdb:function(e,t){},hCDT:function(e,t){},hdeR:function(e,t){},jSVj:function(e,t){},qb6w:function(e,t){},qq3a:function(e,t){},tWGf:function(e,t){},zDTP:function(e,t){},zj2Q:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.e1998cb65ac48a5ae2e5.js.map