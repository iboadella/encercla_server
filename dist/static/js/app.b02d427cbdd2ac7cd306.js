webpackJsonp([1],{0:function(t,e){},"0Ipw":function(t,e){},1:function(t,e){},"1/oy":function(t,e){},2:function(t,e){},"6F2z":function(t,e){},"6epJ":function(t,e){},"9M+g":function(t,e){},Avoh:function(t,e){},BdQR:function(t,e){},D4uH:function(t,e,a){"use strict";let s={};var r={name:"fa-icon",props:{name:{type:String,validator:t=>!t||t in s||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${t}".`+"\nPlease make sure you have imported this icon before using it."),!1)},scale:[Number,String],spin:Boolean,inverse:Boolean,pulse:Boolean,flip:{validator:t=>"horizontal"===t||"vertical"===t},label:String},data:()=>({x:!1,y:!1,childrenWidth:0,childrenHeight:0,outerScale:1}),computed:{normalizedScale(){let t=this.scale;return t=void 0===t?1:Number(t),isNaN(t)||t<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.',this),this.outerScale):t*this.outerScale},klass(){return{"fa-icon":!0,"fa-spin":this.spin,"fa-flip-horizontal":"horizontal"===this.flip,"fa-flip-vertical":"vertical"===this.flip,"fa-inverse":this.inverse,"fa-pulse":this.pulse,[this.$options.name]:!0}},icon(){return this.name?s[this.name]:null},box(){return this.icon?`0 0 ${this.icon.width} ${this.icon.height}`:`0 0 ${this.width} ${this.height}`},ratio(){if(!this.icon)return 1;let{width:t,height:e}=this.icon;return Math.max(t,e)/16},width(){return this.childrenWidth||this.icon&&this.icon.width/this.ratio*this.normalizedScale||0},height(){return this.childrenHeight||this.icon&&this.icon.height/this.ratio*this.normalizedScale||0},style(){return 1!==this.normalizedScale&&{fontSize:this.normalizedScale+"em"}},raw(){if(!this.icon||!this.icon.raw)return null;let t=this.icon.raw,e={};return t=(t=t.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(t,a,s)=>{let r=`fa-${(i++).toString(16)}`;return e[s]=r,` id="${r}"`})).replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(t,a,s,r)=>{let i=a||r;return i&&e[i]?`#${e[i]}`:t})}},mounted(){if(!this.name&&0===this.$children.length)return void console.warn('Invalid prop: prop "name" is required.');if(this.icon)return;let t=0,e=0;this.$children.forEach(a=>{a.outerScale=this.normalizedScale,t=Math.max(t,a.width),e=Math.max(e,a.height)}),this.childrenWidth=t,this.childrenHeight=e,this.$children.forEach(a=>{a.x=(t-a.width)/2,a.y=(e-a.height)/2})},register(t){for(let e in t){let a=t[e];a.paths||(a.paths=[]),a.d&&a.paths.push({d:a.d}),a.polygons||(a.polygons=[]),a.points&&a.polygons.push({points:a.points}),s[e]=a}},icons:s};let i=870711;var o={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{class:t.klass,style:t.style,attrs:{version:"1.1",role:t.label?"img":"presentation","aria-label":t.label,x:t.x,y:t.y,width:t.width,height:t.height,viewBox:t.box}},[t._t("default",[t.icon&&t.icon.paths?t._l(t.icon.paths,function(e,s){return a("path",t._b({key:"path-"+s},"path",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.polygons?t._l(t.icon.polygons,function(e,s){return a("polygon",t._b({key:"polygon-"+s},"polygon",e,!1))}):t._e(),t._v(" "),t.icon&&t.icon.raw?[a("g",{domProps:{innerHTML:t._s(t.raw)}})]:t._e()])],2)},staticRenderFns:[]};var n=a("VU/8")(r,o,!1,function(t){a("jSVj")},null,null);e.a=n.exports},GfHa:function(t,e){},Id91:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("7+uW"),r=a("ytdl"),i=a.n(r),o={user:{authenticated:!1,lang:"cat"},checkAuth(){var t=localStorage.getItem("access_token");this.user.authenticated=!!t},getAuthHeader:()=>({Authorization:"Bearer "+localStorage.getItem("access_token")}),decoded:()=>(console.log("identity"),i()(localStorage.getItem("access_token"))),setLang(){"cat"==this.user.lang?this.user.lang="es":this.user.lang="cat"},getLang(){return this.user.lang}},n={name:"App",data:()=>({user:"",decoded:o,header:o.getAuthHeader(),auth:o}),computed:{language:function(){return this.$i18n.locale()},inside:function(){return console.log("/"==this.$route.path),console.log("authenticated "+o.user.authenticated),1==o.user.authenticated}},methods:{setLang(){console.log("1 lang "+o.getLang()),"cat"==this.$i18n.locale()?this.$i18n.set("es"):this.$i18n.set("cat"),console.log("2 lang "+o.getLang())},logout(){localStorage.removeItem("access_token"),o.user.authenticated=!1,this.$router.push("/")},getLang:()=>(console.log(o.getLang()),o.getLang()),goHome(){o.user.authenticated?1==o.decoded().user_claims.admin?this.$router.replace(this.$route.query.redirect||"/admin"):this.$router.replace(this.$route.query.redirect||"/user"):this.$router.push("/")}},mounted(){this.setLang()}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-primary",attrs:{id:"app",role:"navigation"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-primary bg-primary"},[a("a",{staticClass:"navbar-brand",staticStyle:{cursor:"pointer",color:"white"},on:{click:function(e){t.goHome()}}},[a("img",{staticClass:"img-thumbnail",attrs:{src:"/static/img/svgs/96.svg",alt:"Smiley face",height:"120",width:"120"}})]),t._v(" "),t._m(0),t._v(" "),"cat"==t.language?a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){t.setLang()}}},[t._v("ES")]):t._e(),t._v(" "),"es"==t.language?a("button",{staticClass:"btn",attrs:{type:"button"},on:{click:function(e){t.setLang()}}},[t._v("CAT")]):t._e(),t._v(" "),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[a("ul",{staticClass:"navbar-nav ml-auto"},[t.inside?a("li",{staticClass:"nav-item",staticStyle:{cursor:"pointer"}},[a("a",{staticClass:"nav-link",staticStyle:{color:"white"},on:{click:function(e){t.logout()}}},[t._v(t._s(t._f("translate")("Surt")))])]):t._e(),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",staticStyle:{color:"white"},attrs:{href:"#/conditions"}},[t._v(t._s(t._f("translate")("Condicions legals")))])]),t._v(" "),a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link",staticStyle:{color:"white"},attrs:{href:"#/quisom"}},[t._v(t._s(t._f("translate")("Qui som")))])]),t._v(" "),t.inside?a("li",{staticClass:"nav-item"},[a("b-dropdown",{staticClass:"m-2",staticStyle:{padding:"0px"},attrs:{text:t.decoded.decoded().identity,variant:"primary"}},[a("b-dropdown-item",{attrs:{href:"#/updateuser"}},[t._v(t._s(t._f("translate")("Canviar contrasenya")))]),t._v(" "),1!=t.decoded.decoded().user_claims.admin?a("b-dropdown-item",{attrs:{href:"#/registercompany/"}},[t._v(t._s(t._f("translate")("Modificar dades d'usuari")))]):t._e()],1)],1):t._e()])])]),t._v(" "),a("div",{staticClass:"container"},[a("router-view")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("button",{staticClass:"navbar-toggler btn btn-lg btn-primary btn-block",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[e("span",{staticClass:"navbar-toggler-icon"})])}]};var l=a("VU/8")(n,c,!1,function(t){a("YfuE")},null,null).exports,d=a("/ocq"),u={name:"HelloWorld",data:()=>({msg:"Welcome to Your Vue.js App"})},v={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]};a("VU/8")(u,v,!1,function(t){a("qq3a")},"data-v-634646ce",null).exports;var m={name:"Login",data:()=>({email:"",password:"",error:"",lang:o.user.lang,string1:{cat:"iniciar  sessiò",es:"iniciar session"},text1:"Al registrar-te acceptes les nostres Condicions i la Política de privacitat",text2:"AVÍS: Les dades introduïdes són confidencials i susceptibles de revisió per part del personal de la ADCC"}),computed:{language:function(){return this.$i18n.locale()}},methods:{setValue(t){this.lang=t},returnLanguage(){return console.log("fired"),this.lang=o.user.lang,o.getLang()},login(){this.$http.post("login",{username:this.email,password:this.password}).then(t=>this.loginSuccessful(t)).catch(()=>this.loginFailed())},loginSuccessful(t){t.data.access_token?(this.error="",localStorage.access_token=t.data.access_token,localStorage.refresh_token=t.data.refresh_token,o.user.authenticated=!0,console.log(o.decoded()),setTimeout(()=>{1==o.decoded().user_claims.admin?this.$router.replace(this.$route.query.redirect||"/admin"):this.$router.replace(this.$route.query.redirect||"/user")},100)):this.loginFailed(t.data.message)},loginFailed(t){this.error=t,delete localStorage.token}},updated(){}},p={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-wrapper border border-light",staticStyle:{"background-color":"rgb(232,77,32)"}},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.login(e)}}},[a("h2",{staticClass:"form-signin-heading"},[t._v(t._s(t._f("translate")("Iniciar sessió")))]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Correu electronic")]),t._v(" "),a("div",{staticClass:"input-group"},[t._m(0),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:t._f("translate")("Correu electronic"),required:"",autofocus:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),a("div",{staticClass:"input-group"},[t._m(1),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:t._f("translate")("contrasenya"),required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})]),t._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v(t._s(t._f("translate")("Iniciar sessió")))]),t._v(" "),a("span",[t._v(t._s(t._f("translate")(t.error)))])]),t._v(" "),a("a",{attrs:{href:"#/register"}},[a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v(t._s(t._f("translate")("Registrar-se")))])]),t._v(" "),a("p",[t._v(" "+t._s(t._f("translate")(t.text1)))]),t._v(" "),a("p",[t._v(" "+t._s(t._f("translate")(t.text2)))]),t._v(" "),a("a",{attrs:{href:"#/reset"}},[a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v(t._s(t._f("translate")("Recuperar contrasenya")))])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-addon"},[e("img",{attrs:{src:"/static/img/svgs/01.svg",alt:"Smiley face",height:"50",width:"50"}})])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"input-group-addon"},[e("img",{attrs:{src:"/static/img/svgs/02.svg",alt:"Smiley face",height:"47",width:"50"}})])}]};var h=a("VU/8")(m,p,!1,function(t){a("fdWs")},null,null).exports,f={name:"Register",data:()=>({email:"",password:"",confirmPassword:"",error:"",admin:!1,accept:!1}),computed:{currentRoute(){return"/registerAdmin"==this.$route.path},comparePasswords(){return this.password===this.confirmPassword||(this.error=this.$i18n.translate("contrasenya no coincideix"),!1)}},methods:{register(){if(this.error="",this.comparePasswords)if(this.currentRoute)this.$http.post("adminregistration",{username:this.email,password:this.password,admin:this.admin},{headers:o.getAuthHeader()}).then(t=>{this.error="created",this.admin?this.$router.replace(this.$route.query.redirect||"/admin/users"):this.$router.replace(this.$route.query.redirect||"/registercompany/?id="+t.data.user_id)}).catch(t=>{console.log("error"),this.error=t.response.data.message});else{if(!this.accept)return void(this.error="És necessari acceptar les condicions legals");this.$http.post("registration",{username:this.email,password:this.password}).then(t=>this.registerSuccessful(t)).catch(()=>this.loginFailed())}else this.error=this.$i18n.translate("contrasenya no coincideix")},registerSuccessful(t){t.data.access_token?(this.error="",localStorage.access_token=t.data.access_token,localStorage.refresh_token=t.data.refresh_token,o.user.authenticated=!0,console.log(o.decoded()),setTimeout(()=>{this.$router.replace(this.$route.query.redirect||"/registercompany")},100)):this.loginFailed(t.data.message)},loginFailed(t){this.error=t,delete localStorage.token}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register-wrapper border border-light",staticStyle:{"background-color":"rgb(232,77,32)"}},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[a("img",{attrs:{src:"/static/img/svgs/create.svg",alt:"Smiley face",height:"47",width:"50"}}),t._v(" "),a("h2",{staticClass:"form-signin-heading",staticStyle:{color:"white"}},[t._v(t._s(t._f("translate")("Donar d'alta la meva empresa")))]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:t._f("translate")("Correu electronic"),required:"",autofocus:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),t.currentRoute?a("div",{staticClass:"form-check float-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.admin,expression:"admin"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(t.admin)?t._i(t.admin,null)>-1:t.admin},on:{change:function(e){var a=t.admin,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,null);s.checked?i<0&&(t.admin=a.concat([null])):i>-1&&(t.admin=a.slice(0,i).concat(a.slice(i+1)))}else t.admin=r}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[t._v("Administrator")])]):t._e(),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:t._f("translate")("contrasenya"),required:""},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"confirmInputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmInputPassword",placeholder:t._f("translate")("contrasenya"),required:""},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}}),t._v(" "),t.currentRoute?t._e():a("div",{staticClass:"form-check float-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.accept,expression:"accept"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(t.accept)?t._i(t.accept,null)>-1:t.accept},on:{change:function(e){var a=t.accept,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,null);s.checked?i<0&&(t.accept=a.concat([null])):i>-1&&(t.accept=a.slice(0,i).concat(a.slice(i+1)))}else t.accept=r}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/conditions"}},[t._v(" "+t._s(t._f("translate")("Al registrar-te acceptes les nostres Condicions i la Política de privacitat")))])])]),t._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",staticStyle:{"background-color":"black"},attrs:{type:"submit"}},[t._v("Registrar")]),t._v(" "),a("span",{staticStyle:{color:"white"}},[t._v(t._s(t._f("translate")(t.error)))])])])},staticRenderFns:[]};var y=a("VU/8")(f,g,!1,function(t){a("BdQR")},"data-v-5c1b74b3",null).exports,b=a("WIDu"),w=a.n(b),C=a("ESch"),S=(a("pYLg"),a("UcI+"),a("R3SC"),a("vDhf"),a("CFm9"),a("E8q/")),x=(a("Ea66"),a("EXyZ")),A=a("D4uH"),q={name:"RegisterCompany",components:{Icon:A.a,"b-button":S.a,"b-tooltip":x.a,"b-modal":C.a},data:()=>({sectors:[],sector:"",user:"",subsector:"",commercial_name:"",fiscal_name:"",nif:"",number_survey:"",duplication_survey:"",name_surname:"",telephone_number:"",description:"",comarca:"",territori_leader:"",number_workers:"",error:"",decoded:o.decoded(),company_id:"",status:"",comarcas:[],leaders:[]}),computed:{lang:function(){return this.$i18n.locale()},currentRoute(){return void 0!=this.$route.query.id},sectorCategories(){return w()(this.sectors.map(t=>t.sector))},subsectorCategories(){return this.sectors.filter(t=>t.sector==this.sector).map(t=>({item:t.subsector,info:t.info}))}},methods:{getSectors(){this.$http.get("sectors",{}).then(t=>this.sectors=t.data).catch(()=>"")},getComarcas(){this.$http.get("comarcas",{}).then(t=>this.comarcas=t.data).catch(()=>"")},getLeaders(){this.$http.get("leaders",{}).then(t=>this.leaders=t.data).catch(()=>"")},fetchUser(){var t="user/"+this.$route.query.id;this.$http.get(t,{headers:o.getAuthHeader()}).then(t=>this.user=t.data).catch(()=>"")},fetchCompany(){var t="";void 0!=this.$route.query.id?(this.fetchUser(),t="company?user_id="+this.$route.query.id):t="company",this.$http.get(t,{headers:o.getAuthHeader()}).then(t=>{""!=t.data.id?(this.status="Actualitzar",this.sector=t.data.sector,this.subsector=t.data.subsector,this.commercial_name=t.data.commercial_name,this.fiscal_name=t.data.fiscal_name,this.nif=t.data.nif,this.duplication_survey=!1,this.duplication_survey=t.data.duplication_survey,this.name_surname=t.data.name_surname,this.telephone_number=t.data.telephone_number,this.description=t.data.description,this.comarca=t.data.comarca,this.territori_leader=t.data.territori_leader,this.number_workers=t.data.number_workers,this.company_id=t.data.id):this.status="Donar d'alta la meva empresa"}).catch(()=>"")},register(){var t="";t=void 0!=this.$route.query.id?"registrationcompany?user_id="+this.$route.query.id:"registrationcompany",""==this.company_id?this.$http.post(t,{sector:this.sector,subsector:this.subsector,commercial_name:this.commercial_name,fiscal_name:this.fiscal_name,nif:this.nif,duplication_survey:this.duplication_survey,name_surname:this.name_surname,telephone_number:this.telephone_number,description:this.description,comarca:this.comarca,territori_leader:this.territori_leader,number_workers:this.number_workers},{headers:o.getAuthHeader()}).then(t=>this.registerSuccessful(t)).catch(()=>this.registerFailed()):this.$http.put("registrationcompany/"+this.company_id,{sector:this.sector,subsector:this.subsector,commercial_name:this.commercial_name,fiscal_name:this.fiscal_name,nif:this.nif,duplication_survey:this.duplication_survey,name_surname:this.name_surname,telephone_number:this.telephone_number,description:this.description,comarca:this.comarca,territori_leader:this.territori_leader,number_workers:this.number_workers},{headers:o.getAuthHeader()}).then(t=>this.registerSuccessful(t)).catch(()=>this.registerFailed())},registerSuccessful(t){void 0!=this.$route.query.id?this.$router.replace(this.$route.query.redirect||"/updatesurvey/"+this.$route.query.id):this.$router.push("/user")},registerFailed(t){this.error=t},showModaltooltip(){this.$refs.tooltip.show()},hideModaltooltip(){this.$refs.tooltip.hide()}},mounted(){this.getSectors(),this.getComarcas(),this.getLeaders(),this.fetchCompany()}},k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register-wrapper border border-light",staticStyle:{"background-color":"rgb(232,77,32)"}},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[a("h2",{staticClass:"form-signin-heading",staticStyle:{color:"white"}},[t._v(t._s(t._f("translate")("Dades de l'empresa")))]),t._v(" "),void 0==t.user?a("span",[t._v(t._s(t.decoded.identity))]):a("span",[t._v(t._s(t.user.email))]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("span",{attrs:{id:"exButton2"},on:{click:function(e){t.showModaltooltip()}}},[a("img",{attrs:{src:"/static/img/svgs/question.svg",alt:"Smiley face",height:"25",width:"25"}})]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.sector,expression:"sector"}],staticClass:"custom-select",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.sector=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",hidden:""}},[t._v(t._s(t._f("translate")("Sector")))]),t._v(" "),t._l(t.sectorCategories,function(e){return a("option",{domProps:{value:e}},[t._v(" \n    "+t._s(t._f("translate")(e))+"\n  ")])})],2)]),t._v(" "),t.sector?a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.subsector,expression:"subsector"}],staticClass:"custom-select",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.subsector=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",hidden:""}},[t._v(t._s(t._f("translate")("Subsector")))]),t._v(" "),t._l(t.subsectorCategories,function(e,s){return a("option",{domProps:{value:e.item}},[t._v(" \n    "+t._s(t._f("translate")(e.item))+"  \n\n \n  ")])})],2)]):t._e(),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("label",{staticClass:"sr-only",attrs:{for:"inputcommercial_name"}},[t._v(t._s(t._f("translate")("nom comercial")))]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.commercial_name,expression:"commercial_name"}],staticClass:"form-control",attrs:{type:"text",id:"inputcommercial_name",placeholder:t._f("translate")("Nom comercial"),required:"",autofocus:""},domProps:{value:t.commercial_name},on:{input:function(e){e.target.composing||(t.commercial_name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("label",{staticClass:"sr-only",attrs:{for:"inputfiscal_name"}},[t._v("fiscal_name ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.fiscal_name,expression:"fiscal_name"}],staticClass:"form-control",attrs:{type:"text",id:"inputfiscal_name",placeholder:"Fiscal Name",required:"",autofocus:""},domProps:{value:t.fiscal_name},on:{input:function(e){e.target.composing||(t.fiscal_name=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("label",{staticClass:"sr-only",attrs:{for:"inputnif"}},[t._v("nif ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nif,expression:"nif"}],staticClass:"form-control",attrs:{type:"text",id:"inputnif",placeholder:"NIF",required:"",autofocus:""},domProps:{value:t.nif},on:{input:function(e){e.target.composing||(t.nif=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("span",{staticStyle:{color:"white"}},[t._v(t._s(t._f("translate")("Dades de la persona de contacte")))]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputname_surname"}},[t._v("nif ")])]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.name_surname,expression:"name_surname"}],staticClass:"form-control",attrs:{type:"text",id:"inputname_surname",placeholder:t._f("translate")("Nom i cognoms"),required:"",autofocus:""},domProps:{value:t.name_surname},on:{input:function(e){e.target.composing||(t.name_surname=e.target.value)}}}),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputtelephone_number"}},[t._v("telephone_number ")])]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.telephone_number,expression:"telephone_number"}],staticClass:"form-control",attrs:{type:"text",id:"inputtelephone_number",placeholder:t._f("translate")("Telèfon"),required:"",autofocus:""},domProps:{value:t.telephone_number},on:{input:function(e){e.target.composing||(t.telephone_number=e.target.value)}}}),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputdescription"}},[t._v("description ")])]),t._v(" "),t.currentRoute?a("div",{staticClass:"form-check float-left"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.duplication_survey,expression:"duplication_survey"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"exampleCheck1"},domProps:{checked:Array.isArray(t.duplication_survey)?t._i(t.duplication_survey,null)>-1:t.duplication_survey},on:{change:function(e){var a=t.duplication_survey,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,null);s.checked?i<0&&(t.duplication_survey=a.concat([null])):i>-1&&(t.duplication_survey=a.slice(0,i).concat(a.slice(i+1)))}else t.duplication_survey=r}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[t._v(t._s(t._f("translate")("Permís per duplicar qüestionaris activa")))])]):t._e(),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text",id:"inputdescription",placeholder:t._f("translate")("Descripció activitat"),required:"",autofocus:""},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.comarca,expression:"comarca"}],staticClass:"custom-select",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.comarca=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",selected:""}},[t._v("Comarca")]),t._v(" "),t._l(t.comarcas,function(e){return a("option",{domProps:{value:e}},[t._v(" \n    "+t._s(t._f("translate")(e))+"\n  ")])})],2)]),t._v(" "),a("div",{staticClass:"form-group",staticStyle:{"margin-bottom":"0.2rem"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.territori_leader,expression:"territori_leader"}],staticClass:"custom-select",attrs:{required:""},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.territori_leader=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",hidden:""}},[t._v(t._s(t._f("translate")("Territori Leader")))]),t._v(" "),t._l(t.leaders,function(e){return a("option",{domProps:{value:e}},[t._v(" \n    "+t._s(t._f("translate")(e))+"\n  ")])})],2)]),t._v(" "),a("div",{staticClass:"form-group"},[a("label",{staticClass:"sr-only",attrs:{for:"inputnumber_workers"}},[t._v("territori_leader ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.number_workers,expression:"number_workers"}],staticClass:"form-control ",attrs:{type:"text",id:"inputnumber_workers",placeholder:t._f("translate")("Número de treballadors"),required:"",autofocus:""},domProps:{value:t.number_workers},on:{input:function(e){e.target.composing||(t.number_workers=e.target.value)}}})]),t._v(" "),t.currentRoute?a("a",{staticClass:"btn btn-lg btn-danger btn-block",staticStyle:{"background-color":"black"},attrs:{href:"/#/admin/users",role:"button"}},[t._v("Cancelar")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-lg btn btn-block",attrs:{type:"submit"}},[t._v(t._s(t._f("translate")(t.status)))]),t._v(" "),a("span",[t._v(t._s(t.error))])]),t._v(" "),a("b-modal",{ref:"tooltip",attrs:{id:"tooltip"}},["cat"==t.lang?a("div",[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("td",[a("span",[t._v("Sector")])]),t._v(" "),a("td",[a("span",[t._v("Subsectors")])]),t._v(" "),a("td",[a("span",[t._v("Ampliació d’informació per l’usuari")])])]),t._v(" "),a("tr",[a("td",[a("span",[t._v("Agroalimentari")])]),t._v(" "),a("td",[a("span",[t._v("Agricultura i ramaderia")])]),t._v(" "),a("td",[a("span",[t._v("Conreus, vivers, producció ramadera, producció agrícola combinada amb la producció ramadera, activitats de suport a l'agricultura, ramaderia i preparació posterior a la collita")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Pesca i caça")])]),t._v(" "),a("td",[a("span",[t._v("Pesca, aqüicultura i caça")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Productes càrnics")])]),t._v(" "),a("td",[a("span",[t._v("Sacrifici de bestiar i conservació de carn i elaboració de productes càrnics")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Fruites i hortalisses")])]),t._v(" "),a("td",[a("span",[t._v("Preparació i conservació de fruites i hortalisses")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Oli")])]),t._v(" "),a("td",[a("span",[t._v("Fabricació d'oli d'oliva")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Productes lactis")])]),t._v(" "),a("td",[a("span",[t._v("Elaboració de gelats, fabricació de formatges, preparació de llet i altres productes lactis")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Productes de fleca")])]),t._v(" "),a("td",[a("span",[t._v("Pa, productes de fleca i pastes alimentàries")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Begudes")])]),t._v(" "),a("td",[a("span",[t._v("Cervesa, vins, sidra, begudes analcohòliques, aigües minerals i altres tipus d'aigües embotellades")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Altres")])]),t._v(" "),a("td",[a("span",[t._v("Elaboració i conservació de peix, crustacis i mol·luscos")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Fabricació d'olis (excepte d'oliva) i greixos")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Fabricació de productes per l'alimentació animal")])])]),t._v(" "),a("tr",[t._v(' "> '),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Indústries del tabac")])])]),t._v(" "),a("tr",[a("td",[a("span",[t._v("Industrial")])]),t._v(" "),a("td",[a("span",[t._v("Fusta")])]),t._v(" "),a("td",[a("span",[t._v("Indústries de la fusta, el suro, cistelleria i esparteria, fabricació de mobles")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Maquinària")])]),t._v(" "),a("td",[a("span",[t._v("Fabricació de maquinària agrària i forestal, fabricació de màquines eina, fabricació de vehicles de motor, remolcs i semiremolcs,")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Química")])]),t._v(" "),a("td",[a("span",[t._v("Fabricació de productes químics bàsics, compostos nitrogenats, fertilitzants, plàstics, productes agroquímics, pintures i vernissos, sabons, detergents i altres productes químics")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Metal·lúrgia")])]),t._v(" "),a("td",[a("span",[t._v("Fabricació de productes de ferro i acer, fabricació de productes metàl·lics, excepte maquinària")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Tèxtil")])]),t._v(" "),a("td",[a("span",[t._v("Industries tèxtils, confecció de peces de vestir, indústria del cuir i del calçat")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Construcció")])]),t._v(" "),a("td",[a("span",[t._v("Construcció d'immobles, construcció d'obres d'enginyeria civil, activitats especialitzades de la construcció")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Altres")])]),t._v(" "),a("td",[a("span",[t._v("Indústries extractives")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Subministrament d'energia elèctrica, gas, vapor i aire condicionat")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Subministrament d'aigua, activitats de sanejament, gestió de residus i descontaminació")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Indústries del paper i cartró")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Fabricació de productes farmacèutics")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Fabricació de productes informàtics, electrònics i òptics")])])]),t._v(" "),a("tr",[t._v(' "> '),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Altres indústries")])])]),t._v(" "),a("tr",[a("td",[a("span",[t._v("Comercial")])]),t._v(" "),a("td",[a("span",[t._v("Comerç a l'engròs i al detall de productes d'alimentació")])]),t._v(" "),a("td",[a("span",[t._v("Comerç a l'engròs i al detall de productes alimentaris i de begudes")])])]),t._v(" "),a("tr",[t._v(' "> '),t._v(" "),a("td",[a("span",[t._v("Comerç a l'engròs i al detall d'altres productes")])]),t._v(" "),a("td",[a("span",[t._v("Comerç a l’engròs i al detall de productes no alimentaris ni begudes")])])]),t._v(" "),a("tr",[a("td",[a("span",[t._v("Serveis")])]),t._v(" "),a("td",[a("span",[t._v("Transport i emmagatzematge")])]),t._v(" "),a("td",[a("span",[t._v("Transport terrestre, per canonades, marítim i aeri, emmagatzematge i activitats afins al transport, activitats postals i de correus")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Restauració")])]),t._v(" "),a("td",[a("span",[t._v("Restaurants i establiments de menjars, provisió de menjars preparats per a celebracions i altres serveis de menjars, establiments de begudes")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Allotjament")])]),t._v(" "),a("td",[a("span",[t._v("Hotels i allotjaments similars, allotjaments turístics, càmpings i altres tipus d'allotjaments")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Reparació de vehicles de motor i motocicletes")])]),t._v(" "),a("td",[a("span",[t._v("Manteniment i reparació de vehicles de motor i motocicletes")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Activitats professionals, científiques i tècniques")])]),t._v(" "),a("td",[a("span",[t._v("Activitats jurídiques, de consultoria, d'arquitectura i enginyeria, recerca i desenvolupament, publicitat, activitats veterinàries i altres activitats professionals, científiques i tècniques")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Activitats sanitàries")])]),t._v(" "),a("td",[a("span",[t._v("Activitats sanitàries, hospitalàries, mèdiques i odontològiques, i activitats de serveis socials")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Educació")])]),t._v(" "),a("td",[a("span",[t._v("Educació preprimària, primària, secundària, postsecundària i altres activitats d'educació")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Activitats artístiques, recreatives i d'entreteniment")])]),t._v(" "),a("td",[a("p",[a("span",[t._v("Activitats de creació, artístiques i d'espectacles; ")])]),t._v(" "),a("p",[a("span",[t._v("activitats de biblioteques, arxius, museus i")])]),t._v(" "),a("p",[a("span",[t._v(" altres activitats culturals; ")])]),t._v(" "),a("p",[a("span",[t._v("activitats relacionades amb els jocs d'atzar i les apostes; ")])]),t._v(" "),a("p",[a("span",[t._v("activitats esportives, recreatives i d'entreteniment")])])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Altres serveis")])]),t._v(" "),a("td",[a("span",[t._v("Informació i comunicacions")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Serveis financers i assegurances")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Activitats immobiliàries i de lloguer")])])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Activitats de neteja i jardineria")])])]),t._v(" "),a("tr",[t._v(' "> '),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[a("span",[t._v("Altres serveis")])])]),t._v(" "),a("tr",[a("td",[a("span",[t._v("Públic")])]),t._v(" "),a("td",[a("span",[t._v("Administració pública")])]),t._v(" "),a("td",[a("span",[t._v("Administració pública, Defensa i Seguretat Social obligatòria")])])])])])]):t._e(),t._v(" "),"es"==t.lang?a("div",[a("table",{staticClass:"table"},[a("tbody",[a("tr",[a("td",[t._v("Sector")]),t._v(" "),a("td",[t._v("Subsectores")]),t._v(" "),a("td",[t._v("Ampliación de información para el usuario")])]),t._v(" "),a("tr",[a("td",[t._v("Agroalimentario")]),t._v(" "),a("td",[t._v("Agricultura y ganadería")]),t._v(" "),a("td",[t._v("Cultivos, viveros, producción ganadera, producción agrícola combinada con la producción ganadera, actividades de apoyo a la agricultura, ganadería y preparación posterior a la cosecha")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Pesca y caza")]),t._v(" "),a("td",[t._v("Pesca, acuicultura y caza")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Productos cárnicos")]),t._v(" "),a("td",[t._v("Sacrificio de ganado y conservación de carne y elaboración de productos cárnicos")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Frutas y hortalizas")]),t._v(" "),a("td",[t._v("Preparación y conservación de frutas y hortalizas")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Aceite")]),t._v(" "),a("td",[t._v("Fabricación de aceite de oliva")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Productos lácteos")]),t._v(" "),a("td",[t._v("Elaboración de helados, fabricación de quesos, preparación de leche y otros productos lácteos")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Productos de panadería")]),t._v(" "),a("td",[t._v("Pan, productos de panadería y pastas alimentarias")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Bebidas")]),t._v(" "),a("td",[t._v("Cerveza, vinos, sidra, bebidas analcohólicas, aguas minerales y otros tipos de aguas embotelladas")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Otros")]),t._v(" "),a("td",[t._v("Elaboración y conservación de pescado, crustáceos y moluscos")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Fabricación de aceites (excepto de oliva) y grasas")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Fabricación de productos para la alimentación animal")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Industrias del tabaco")])]),t._v(" "),a("tr",[a("td",[t._v("Industrial")]),t._v(" "),a("td",[t._v("Madera")]),t._v(" "),a("td",[t._v("Industrias de la madera, el corcho, cestas y espartos, fabricación de muebles")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Maquinaria")]),t._v(" "),a("td",[t._v("Fabricación de maquinaria agraria y forestal, fabricación de máquinas herramienta, fabricación de vehículos de motor, remolques y semirremolques")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Química")]),t._v(" "),a("td",[t._v("Fabricación de productos químicos básicos, compuestos nitrogenados, fertilizantes, plásticos, productos agroquímicos, pinturas y barnices, jabones, detergentes y otros productos químicos")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Metalurgia")]),t._v(" "),a("td",[t._v("Fabricación de productos de hierro y acero, fabricación de productos metálicos, excepto maquinaria")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Textil")]),t._v(" "),a("td",[t._v("Industrias textiles, confección de piezas de vestir, industria del cuero y del calzado")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Construcción")]),t._v(" "),a("td",[t._v("Construcción de inmuebles, construcción de obras de ingeniería civil, actividades especializadas de la construcción")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Otros")]),t._v(" "),a("td",[t._v("Industrias extractivas")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Suministro de energía eléctrica, gas, vapor y aire acondicionado")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Suministro de agua, actividades de saneamiento, gestión de residuos y descontaminación")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Industrias del papel y cartón")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Fabricación de productos farmacéuticos")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Fabricación de productos informáticos, electrónicos y ópticos")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Otras industrias")])]),t._v(" "),a("tr",[a("td",[t._v("Comercial")]),t._v(" "),a("td",[t._v("Comercio al por mayor y al pormenor de productos de alimentación")]),t._v(" "),a("td",[t._v("Comercio al por mayor y al por menor de productos alimentarios y bebidas")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Comercio al por mayor y al pormenor de otros productos")]),t._v(" "),a("td",[t._v("Comercio al por mayor y al por menor de productos no alimentarios ni bebidas")])]),t._v(" "),a("tr",[a("td",[t._v("Servicios")]),t._v(" "),a("td",[t._v("Transporte y almacenaje")]),t._v(" "),a("td",[t._v("Transporte terrestre, por cañerías, marítimo y aéreo, almacenaje y actividades afines al transporte, actividades postales y de correos")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Restauración")]),t._v(" "),a("td",[t._v("Restaurantes y establecimientos de comida, provisión de comidas preparadas para celebraciones y otros servicios de comidas, establecimientos de bebidas")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Alojamiento")]),t._v(" "),a("td",[t._v("Hoteles y alojamientos similares, alojamientos turísticos, campings y otros tipos de alojamiento")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Reparación de vehículos de motor y motocicletas")]),t._v(" "),a("td",[t._v("Mantenimiento y reparación de vehículos de motor y motocicletas")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Actividades profesionales, científicas y técnicas")]),t._v(" "),a("td",[t._v("Actividades jurídicas, de consultoría, de arquitectura e ingeniería, investigación y desarrollo, publicidad, actividades veterinarias y otras actividades profesionales, científicas y técnicas")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Actividades sanitarias")]),t._v(" "),a("td",[t._v("Actividades sanitarias, hospitalarias, médicas y odontológicas, y actividades de servicios sociales")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Educación")]),t._v(" "),a("td",[t._v("Educación pre-primaria, secundaria, postsecundaria y otras actividades de educación")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Actividades artísticas, recreativas y de entretenimiento")]),t._v(" "),a("td",[t._v("Actividades de creación, artísticas y de espectáculos; actividades de bibliotecas, archivos, museos y otras actividades culturales; actividades relacionadas con los juegos de azar y las apuestas; actividades deportivas, recreativas y de entretenimiento")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Otros servicios")]),t._v(" "),a("td",[t._v("Información y comunicaciones")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Servicios financieros y seguros")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Actividades inmobiliarias y de alquiler")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Actividades de limpieza y jardinería")])]),t._v(" "),a("tr",[a("td",[t._v(" ")]),t._v(" "),a("td",[t._v(" ")]),t._v(" "),a("td",[t._v("Otros servicios")])]),t._v(" "),a("tr",[a("td",[t._v("Público")]),t._v(" "),a("td",[t._v("Administración pública")]),t._v(" "),a("td",[t._v("Administración pública, Defensa y Seguridad Social obligatoria")])])])])]):t._e()])],1)},staticRenderFns:[]};var E=a("VU/8")(q,k,!1,function(t){a("W4vv")},"data-v-3ce01642",null).exports,$=(a("gfF8"),a("v6UW"),{components:{Icon:A.a,"b-button":S.a,"b-tooltip":x.a,"b-modal":C.a},name:"Questions",data:()=>({msg:"Welcome to Your Vue.js App",questions:[],selected:0,answers:[],company_survey:"",selected_class:"list-group-item-primary",items:[1,2,3,4],timeoutId:1e3,error:"",future_text:"Informació projectes futuribles:Marca aquesta opció si l'empresa disposa d'un projecte en curs destinat a millorar la circularitat en relació a la pregunta plantejada.",future_text_2:"Si es marca aquesta opció, és obligatori descriure el projecte. La puntuació futurible del qüestionari mostrarà la millora en curs.",confirmation_text:"Estàs segur d’enviar el qüestionari a avaluar?",confirmation_text_2:"Això calcularà la puntuació actual i futurible de l’empresa, i no permetrà modificar ni esborrar el qüestionari"}),computed:{lang:function(){return this.$i18n.locale()},submittable:function(){console.log("sub");var t=[];return this.answers.map(function(e){-1!=e.score&&t.push(e.score)}),this.company_survey.score=t.reduce((t,e)=>t+e,0),t.length==this.answers.length}},methods:{showModalInstructions(){this.$refs.instructions.show()},hideModalInstructions(){this.$refs.instructions.hide()},showModalFutureInstructions(){this.$refs.futureinstructions.show()},hideModalFutureInstructions(){this.$refs.futureinstructions.hide()},deleteFile(){this.$http.delete("upload?answer="+this.answers[this.selected].id,{headers:o.getAuthHeader()}).then(t=>{console.log("deleted"),this.answers[this.selected].justification_file="",this.updateAnswer()}).catch(()=>"")},canMove(){return-1==this.answers[this.selected].score&&-1!=this.answers[this.selected].id_option?(this.error="No pots continuar sense justificar la teva resposta. Tria l'opció de justificació: mitjançant un document adjunt o una descripció explicativa.",this.showModal(),!1):!(this.answers[this.selected].future&&this.answers[this.selected].future_justification_text.length<2)||(this.error="No pots continuar sense justificar el te projecte en curs",this.showModal(),!1)},scoreable(){return-1!=this.answers[this.selected].id_option&&(""!=this.answers[this.selected].justification_file||this.answers[this.selected].justification_text.length>2)},moveLeft(){this.canMove()&&(0!=this.selected?this.selected=this.selected-1:this.selected=this.questions.length-1,this.$refs.file.value="")},moveRight(){this.canMove()&&(this.canMove(),this.selected!=this.questions.length-1?this.selected=this.selected+1:this.selected=0,this.$refs.file.value="")},showModal(){this.$refs.myModalRef.show()},hideModal(){this.$refs.myModalRef.hide()},showModaltooltip(){this.$refs.tooltip.show()},hideModaltooltip(){this.$refs.tooltip.hide()},showSubmitConfirmation(){this.$refs.SubmitConfirmation.show()},hideSubmitConfirmation(){this.$refs.SubmitConfirmation.hide()},onInput(t){console.log("Textarea Change"),clearTimeout(this.timeoutId),this.timeoutId=setTimeout(()=>{this.updateAnswer()},1e3)},submitSurvey(){if(this.submittable){this.company_survey.status="submitted";var t=this.company_survey;this.$http.put("companysurvey/"+t.id,{company_survey:t},{headers:o.getAuthHeader()}).then(t=>{console.log("OK"),this.$router.replace(this.$route.query.redirect||"/results/"+this.$route.params.id)}).catch(()=>this.company_survey.status="created")}},updateAnswer(){this.error="";var t=this.answers[this.selected];0!=this.scoreable()?(this.answers[this.selected].score=this.getpoints(this.questions[this.selected][this.lang],this.answers[this.selected].id_option),console.log("scoreable"),this.answers[this.selected].future_justification_text.length>2&&this.answers[this.selected].future?this.answers[this.selected].score_future=1-this.answers[this.selected].score:this.answers[this.selected].score_future=0):(this.answers[this.selected].score=-1,this.answers[this.selected].score_future=0,console.log("not scoreable")),this.$http.put("answer/"+t.id,{answer:t},{headers:o.getAuthHeader()}).then(t=>{console.log("OK")}).catch(()=>console.log("KO"))},fetchAnswers(t){this.$http.get("answers?ids="+t,{headers:o.getAuthHeader()}).then(t=>{this.answers=t.data.data}).catch(()=>"")},fetchQuestions(t){this.$http.get("questions?ids="+t,{headers:o.getAuthHeader()}).then(t=>{this.questions=t.data.data}).catch(()=>"")},fetchCompanySurvey(){this.$http.get("companysurvey/"+this.$route.params.id,{headers:o.getAuthHeader()}).then(t=>{this.company_survey=t.data,this.fetchQuestions(t.data.questions),this.fetchAnswers(t.data.answers)}).catch(()=>"")},setSelected(t){this.canMove()&&(this.selected=t,this.$refs.file.value="")},compare(t){return t==this.answers[this.selected].id_option?"background-color:#e84d20; color:white;":"background-color:white; color:black;"},getpoints(t,e){var a=2;return"-"!=t.q3&&(a=3),void 0!=t.q4&&"-"!=t.q4&&(a=4),e==a?1:1==e?0:2==e&3==a?.5:2==e&4==a?.33:.66},setOption(t){this.answers[this.selected].id_option=t,this.updateAnswer(this.answers[this.selected])},handleFileUpload(){var t=o.getAuthHeader();t["Content-Type"]="multipart/form-data",this.answers[this.selected].justification_file=this.$refs.file.files[0].name;let e=new FormData;e.append("file",this.$refs.file.files[0]),this.$http.post("upload?answer="+this.answers[this.selected].id,e,{headers:t}).then(t=>{this.updateAnswer(this.answers[this.selected])}).catch(function(){console.log("FAILURE!!")})}},mounted(){this.fetchCompanySurvey()}}),P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container bg-primary"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("span",[t._v(t._s(t._f("translate")("Empresa"))+" "+t._s(t.company_survey.name_survey)+"\n          "),a("span",{on:{click:function(e){t.showModalInstructions()}}},[a("img",{attrs:{src:"/static/img/svgs/55.svg",alt:"Smiley face",height:"30",width:"30"}})])])]),t._v(" "),a("div",{staticClass:"col-12"},[a("span",{on:{click:function(e){t.moveLeft()}}},[a("icon",{staticClass:"float-left",staticStyle:{height:"1em"},attrs:{name:"arrow-left",scale:"1.5"}})],1),t._v(" "),t._l(t.questions,function(e,s){return a("li",{staticStyle:{"background-color":"#e84d20"}},[a("span",{on:{click:function(e){t.setSelected(s)}}},[s==t.selected&&-1!=t.answers[t.selected].score?a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:"green"}}):t._e(),t._v(" "),s==t.selected&&-1==t.answers[t.selected].score?a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:"black"}}):t._e(),t._v(" "),s!=t.selected&&-1!=t.answers[s].score?a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle-o",color:"green"}}):t._e(),t._v(" "),s!=t.selected&&-1==t.answers[s].score?a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle-o",color:"black"}}):t._e()],1)])}),t._v("\n          "+t._s(t.selected+1+"/"+t.answers.length)+"\n        "),a("span",{on:{click:function(e){t.moveRight()}}},[a("icon",{staticClass:"float-right",staticStyle:{height:"1em"},attrs:{scale:"1.5",name:"arrow-right"}})],1)],2)]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"padding-top":"1em"}},[a("div",{staticClass:"col-12"},[a("h5",{staticClass:"text-left",staticStyle:{color:"white"}},[t._v("\n            "+t._s(t.questions[t.selected][t.lang].statement)+"\n            "),a("span",{attrs:{id:"exButton2"},on:{click:function(e){t.showModaltooltip()}}},[a("img",{attrs:{src:"/static/img/svgs/question.svg",alt:"Smiley face",height:"30",width:"30"}})]),t._v(" "),a("div",{staticClass:"container",staticStyle:{"max-width":"100%"},attrs:{id:"dav"}})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("ul",{staticClass:"list-group"},t._l(t.items,function(e){return"-"!=t.questions[t.selected][t.lang]["q"+e]?a("li",{staticClass:"list-group-item",style:t.compare(e),on:{click:function(a){t.setOption(e)}}},[t._v(" "+t._s(t.questions[t.selected][t.lang]["q"+e]))]):t._e()}))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("h4",{staticClass:"float-left",staticStyle:{color:"white","padding-top":"10px"}},[t._v("\n\n   \n"+t._s(t._f("translate")("Justificació"))+"   ")])]),t._v(" "),a("div",{staticClass:"col-sm-12"},[a("h6",{staticClass:"float-left",staticStyle:{color:"white","padding-top":"10px"}},[t._v("\n        "+t._s(t._f("translate")("Tria l'opció de justificació: mitjançant un document adjunt o una descripció explicativa."))+"\n      ")])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"padding-top":"1em"}},[""==t.answers[t.selected].justification_file?a("div",{staticClass:"col-sm-3"},[a("input",{ref:"file",attrs:{type:"file",id:"file"},on:{change:function(e){t.handleFileUpload()}}})]):a("div",{staticClass:"col-sm-3"},[t._v("\n         "+t._s(t.answers[t.selected].justification_file)+"\n         "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.deleteFile}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"remove",scale:"1.5"}})],1)])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"padding-top":"1em"}},[a("div",{staticClass:"col-12"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answers[t.selected].justification_text,expression:"answers[selected].justification_text"}],staticClass:"form-control",staticStyle:{height:"100px","background-color":"#e84d20",color:"white"},attrs:{maxlength:"500",type:"text",id:"inputcommercial_name",required:"",autofocus:""},domProps:{value:t.answers[t.selected].justification_text},on:{input:[function(e){e.target.composing||t.$set(t.answers[t.selected],"justification_text",e.target.value)},function(e){t.onInput()}]}})])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"padding-top":"2em"}},[a("div",{staticClass:"col-sm-12",staticStyle:{color:"white"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.answers[t.selected].future,expression:"answers[selected].future"}],staticClass:"form-check-input",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.answers[t.selected].future)?t._i(t.answers[t.selected].future,null)>-1:t.answers[t.selected].future},on:{change:function(e){var a=t.answers[t.selected].future,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,null);s.checked?i<0&&t.$set(t.answers[t.selected],"future",a.concat([null])):i>-1&&t.$set(t.answers[t.selected],"future",a.slice(0,i).concat(a.slice(i+1)))}else t.$set(t.answers[t.selected],"future",r)}}}),t._v(" "),a("label",{staticClass:"form-check-label",attrs:{for:"exampleCheck1"}},[t._v(" "+t._s(t.questions[t.selected][t.lang].futurible))]),t._v(" "),a("span",{on:{click:function(e){t.showModalFutureInstructions()}}},[a("icon",{staticStyle:{"vertical-align":"middle"},attrs:{name:"info-circle",scale:"1.5"}})],1)]),t._v(" "),a("div",{staticClass:"col-12"},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.answers[t.selected].future_justification_text,expression:"answers[selected].future_justification_text"}],staticClass:"form-control ",staticStyle:{height:"100px","background-color":"#e84d20",color:"white"},attrs:{maxlength:"500",type:"text",id:"inputcommercial_name",placeholder:t._f("translate")("Explica breument el teu projecte"),required:"",autofocus:""},domProps:{value:t.answers[t.selected].future_justification_text},on:{input:[function(e){e.target.composing||t.$set(t.answers[t.selected],"future_justification_text",e.target.value)},function(e){t.onInput()}]}})])]),t._v(" "),a("div",{staticStyle:{"padding-top":"1em"}},[a("span",{on:{click:function(e){t.moveLeft()}}},[a("icon",{staticClass:"float-left",staticStyle:{height:"1em"},attrs:{name:"arrow-left",scale:"1.5"}})],1),t._v(" "),t.submittable?a("b-button",{staticStyle:{"background-color":"white",color:"black"},on:{click:function(e){t.showSubmitConfirmation()}}},[t._v(t._s(t._f("translate")("Càlcul")))]):t._e(),t._v(" "),a("span",{on:{click:function(e){t.moveRight()}}},[a("icon",{staticClass:"float-right",staticStyle:{height:"1em"},attrs:{scale:"1.5",name:"arrow-right"}})],1)],1),t._v(" "),a("b-modal",{ref:"myModalRef",attrs:{id:"myModal"}},[t._v("\n    "+t._s(t._f("translate")(this.error))+"\n     ")]),t._v(" "),a("b-modal",{ref:"tooltip",attrs:{id:"tooltip",size:"lg"}},[a("div",{domProps:{innerHTML:t._s(t.questions[t.selected][t.lang].more_information)}}),t._v(" "),a("img",{attrs:{src:"/static/img/"+t.questions[t.selected][t.lang].id+t.lang+".jpg"}})]),t._v(" "),a("b-modal",{ref:"instructions",attrs:{id:"instructions","hide-footer":""}},[t._v("\n    1. Fer clic al botó 'Crear'. Això generarà un qüestionari amb nom automàtic (nom empresa+any+versió) i mostrarà la pantalla amb la primera pregunta.\n2. Cada pregunta està composada dels següents elements:\na) Barra de progrés: mostra tants punts com preguntes a respondre. Els punts en verd representen preguntes que ja s'han respòs, mentre que els negres representen preguntes pendents.\nb) Enunciat de la pregunta: situa el tema que s'està avaluant\nc) Més informació sobre la pregunta: la icona (?) mostra informació extra sobre el tema avaluat\nd) Possibles respostes: 2,3 o 4 possibles respostes entre les que s'ha d'escollir la situació més propera a la realitat de l'empresa.\ne) Botó d'adjuntar document: \n\n      "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:t.hideModalInstructions}},[t._v(t._s(t._f("translate")("OK")))])]),t._v(" "),a("b-modal",{ref:"futureinstructions",attrs:{id:"futureinstructions","hide-footer":""}},[a("p",[t._v(t._s(t._f("translate")(t.future_text)))]),t._v(" "),a("p",[t._v(t._s(t._f("translate")(t.future_text_2)))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:t.hideModalFutureInstructions}},[t._v(t._s(t._f("translate")("OK")))])]),t._v(" "),a("b-modal",{ref:"SubmitConfirmation",attrs:{id:"SubmitConfirmation","hide-footer":""}},[a("p",[t._v(t._s(t._f("translate")(t.confirmation_text)))]),t._v(" "),a("p",[t._v(t._s(t._f("translate")(t.confirmation_text_2)))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:t.hideSubmitConfirmation}},[t._v(t._s(t._f("translate")("Enrere")))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:function(e){t.submitSurvey()}}},[t._v(t._s(t._f("translate")("OK")))])])],1)},staticRenderFns:[]};var j=a("VU/8")($,P,!1,function(t){a("v+1N")},"data-v-1fe9d000",null).exports,R=(a("15Ef"),a("7p6u"),a("dFBv"),a("i71b"),{components:{Icon:A.a},name:"Admin",data:()=>({msg:"Welcome to Your Vue.js App"})}),M={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/users"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/14.svg",alt:"Smiley face",height:"100",width:"100"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Gestió d'usuaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-3"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/surveys"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/15.svg",alt:"Smiley face",height:"100",width:"100"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Visualització de qüestionaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-3"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/ranking"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/16.svg",alt:"Smiley face",height:"100",width:"100"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Rànquing de resultats")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-3"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/informes"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/17.svg",alt:"Smiley face",height:"100",width:"100"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Extracció d'informes")))])])])])])])},staticRenderFns:[]};var N=a("VU/8")(R,M,!1,function(t){a("6F2z")},"data-v-3bb8b1a2",null).exports,F=(a("rcsw"),a("h+cp"),a("Vej+"),a("IF6D"),a("uXZL")),I=a.n(F),D=a("lDdF"),B={components:{Icon:A.a,"b-modal":C.a},name:"UsersManagement",data:()=>({users:[],error:"",filter_comarca:"",filter_leader:"",filtered:[],sort_field:"email",sort_order:["asc","desc"]}),computed:{unique_comarca(){return w()(this.filtered.map(t=>t.comarca))},unique_leader(){return w()(this.filtered.map(t=>t.leader))},filtered_users(){var t=this.users;return""!=this.filter_comarca&&(t=_.filter(t,{comarca:this.filter_comarca})),""!=this.filter_leader&&(t=_.filter(t,{leader:this.filter_leader})),t=_.orderBy(t,["type",this.sort_field],this.sort_order),this.filtered=t,t}},methods:{sortBy(t){t==this.sort_field&&("desc"==this.sort_order[0]?this.sort_order=["asc","desc"]:this.sort_order=["desc","asc"]),this.sort_field=t},showModalConfirmation(){this.$refs.Confirmation.show()},hideModalConfirmation(){this.$refs.Confirmation.hide()},setOption(t){this.users.forEach(function(e,a){e.id!=t.id?e.selected=!1:e.selected=!e.selected}),console.log("sel")},exportUsers(){var t=[];this.$i18n.translate("usuari");this.users.forEach(function(e){0==e.type&&t.push({usuari:e.email,any:e.year,empresa:e.company,sector:e.sector,subsector:e.subsector,persona:e.name_contact,telefon:e.telephone_number,comarca:e.comarca,leader:e.leader})});var e=I.a.utils.json_to_sheet(t),a=I.a.utils.book_new();I.a.utils.book_append_sheet(a,e,"People");var s=I.a.write(a,{bookType:"xlsx",type:"binary"});Object(D.saveAs)(new Blob([function(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),s=0;s!=t.length;++s)a[s]=255&t.charCodeAt(s);return e}(s)],{type:"application/octet-stream"}),"sheetjs.xlsx")},fetchUsers(){this.$http.get("users",{headers:o.getAuthHeader()}).then(t=>{t.data.data.map(function(t){t.selected=!1}),this.users=t.data.data}).catch(()=>"")},editUser(){var t;this.users.forEach(function(e,a){e.selected&&(t=e.id)}),void 0==t?(this.error="has de seleccionar un usuari",this.showModalError()):this.$router.replace("/registercompany/?id="+t)},deleteUser(){var t;this.users.forEach(function(e,a){e.selected&&(t=e.id)}),void 0==t?(this.error="has de seleccionar un usuari",this.showModalError()):(this.hideModalConfirmation(),this.$http.delete("user/"+t,{headers:o.getAuthHeader()}).then(t=>{console.log("deleted"),this.users=[],this.fetchUsers()}).catch(()=>""))},showModalError(){this.$refs.myModalError.show()},hideModalError(){this.$refs.myModalError.hide()}},mounted(){this.fetchUsers()}},z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-2"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/users"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/14.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Gestió d'usuaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/surveys"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/15.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Visualització de qüestionaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/ranking"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/16.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Rànquing de resultats")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:""}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/17.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Extracció d'informes")))])])])])]),t._v(" "),a("div",{staticClass:"container bg-primary"},[a("div",{staticClass:"col-sm-12"},[a("label",{staticClass:"control-label",staticStyle:{color:"white"}},[t._v("Comarca")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_comarca,expression:"filter_comarca"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_comarca=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_comarca,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2),t._v(" "),a("label",{staticClass:"control-label",staticStyle:{color:"white"}},[t._v(t._s(t._f("translate")("Territori Leader")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_leader,expression:"filter_leader"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_leader=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_leader,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),t._m(0),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.showModalConfirmation()}}},[a("img",{attrs:{src:"/static/img/svgs/34.svg",alt:"Smiley face",height:"35",width:"35"}})]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.editUser()}}},[a("img",{attrs:{src:"/static/img/svgs/35.svg",alt:"Smiley face",height:"35",width:"35"}})]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.exportUsers()}}},[a("img",{attrs:{src:"/static/img/svgs/36.svg",alt:"Smiley face",height:"35",width:"35"}})]),t._v(" "),a("table",{staticClass:"table table-light table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}}),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("email")}}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/06.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v(" "),a("span",[t._v("\n        "+t._s(t._f("translate")("Usuari"))+"\n      ")])]),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("empresa")}}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/10.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Empresa")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/06.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v(t._s(t._f("translate")("Super-usuari")))])])]),t._v(" "),a("tbody",t._l(t.filtered_users,function(e,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selected)?t._i(e.selected,null)>-1:e.selected},on:{click:function(a){t.setOption(e)},change:function(a){var s=e.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=t._i(s,null);r.checked?o<0&&t.$set(e,"selected",s.concat([null])):o>-1&&t.$set(e,"selected",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"selected",i)}}})]),t._v(" "),a("td",[t._v(t._s(e.email))]),t._v(" "),a("td",[t._v(t._s(e.company))]),t._v(" "),a("td",[t._v(t._s(e.type))])])}))])]),t._v(" "),a("b-modal",{ref:"myModalError",attrs:{id:"myModalError"}},[t._v("\n    "+t._s(this.error)+"\n     ")]),t._v(" "),a("b-modal",{ref:"Confirmation",attrs:{id:"Confirmation","hide-footer":""}},[t._v("\n      "+t._s(t._f("translate")("Estàs segur d’esborrar el usuari?"))+"\n      "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:function(e){t.hideModalConfirmation()}}},[t._v(t._s(t._f("translate")("Enrere")))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:function(e){t.deleteUser()}}},[t._v("OK")])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:"/#/registerAdmin"}},[e("button",{staticClass:"btn btn-primary",attrs:{type:"button"}},[e("img",{attrs:{src:"/static/img/svgs/33.svg",alt:"Smiley face",height:"35",width:"35"}})])])}]};var L=a("VU/8")(B,z,!1,function(t){a("et0s")},"data-v-6cbf12d2",null).exports,H={components:{Icon:A.a,"b-modal":C.a},name:"UserPage",data:()=>({decoded:o.decoded(),user:"",company:{id:1},DARI_filename:"",convocatoria:!0,convocatoria_year:"",survey:"",company_surveys:[],error:"",selected:""}),computed:{},methods:{getStatus:t=>"submitted"==t?"Enviat":"Pendent",getColor:t=>t>=0&&t<50?"red":t>=50&&t<70?"orange":"green",goToSurvey(){this.$router.replace(this.$route.query.redirect||"/questions/"+this.company_surveys[this.company_surveys.length-1].id)},duplicate(){var t;this.company_surveys.forEach(function(e,a){e.selected&&(t=e.id)}),void 0==t?(this.error="you have to select one survey",this.showModalError()):this.$http.get("duplicatecompanysurvey/"+t,{headers:o.getAuthHeader()}).then(t=>{console.log("duplicated"),this.company_surveys=[],this.fetchCompanySurvey()}).catch(()=>{this.error="No es pot duplicar el qüestionari",this.showModalError()})},deleteSurvey(){var t,e;this.company_surveys.forEach(function(e,a){e.selected&&(t=e.id)}),this.company_surveys.forEach(function(t,a){t.selected&&(e=t.status)}),void 0==t?(this.error="has de seleccionar un usuari",this.showModalError()):"submitted"==e?(this.error="No es pot esborrar un qüestionari enviat",this.showModalError()):(this.hideModalConfirmation(),this.$http.delete("companysurvey/"+t,{headers:o.getAuthHeader()}).then(t=>{console.log("deleted"),this.company_surveys=[],this.fetchCompanySurvey()}).catch(()=>""))},setOption(t){this.company_surveys.forEach(function(e,a){a!=t&&(e.selected=!1)}),this.company_surveys[t].selected=!this.company_surveys[t].selected,console.log("sel")},fetchCompany(){this.$http.get("company",{headers:o.getAuthHeader()}).then(t=>{""==t.data.id?this.$router.replace(this.$route.query.redirect||"/registercompany/"):this.company=t.data}).catch(()=>"")},fetchSurvey(){this.$http.get("survey",{headers:o.getAuthHeader()}).then(t=>this.survey=t.data).catch(()=>"")},fetchCompanySurvey(){this.$http.get("companysurvey",{headers:o.getAuthHeader()}).then(t=>{t.data.map(function(t){t.selected=!1}),this.company_surveys=t.data}).catch(()=>"")},DARI_needed(){return"Industrial"==this.company.sector||"Agroalimentari"==this.company.sector},createCompanySurvey(){this.DARI_needed()&&""==this.DARI_filename?this.error="Adjuntar DARI":this.convocatoria&&""==this.convocatoria_year?this.error="Has de seleccionar un any ":this.$http.post("companysurvey",{id_survey:this.survey.id,file_dari:this.DARI_filename,convocatoria:this.convocatoria,convocatoria_year:this.convocatoria_year,id_company:this.company.id},{headers:o.getAuthHeader()}).then(t=>this.registerSuccessful(t)).catch(t=>this.registerFailed(t))},registerSuccessful(t){this.DARI_needed()&&this.handleFileUpload(t.data.message.split(" ")[2]),this.company_surveys=[],this.fetchCompanySurvey(),this.hideModal(),this.showModalInstructions()},registerFailed(t){this.error=t.response.data.message},showModal(){this.DARI_filename,this.$refs.myModalRef.show()},hideModal(){this.$refs.myModalRef.hide()},showModalInstructions(){this.$refs.instructions.show()},hideModalInstructions(){this.$refs.instructions.hide()},showModalError(){this.$refs.myModalError.show()},hideModalError(){this.$refs.myModalError.hide()},showModalConfirmation(){this.$refs.Confirmation.show()},hideModalConfirmation(){this.$refs.Confirmation.hide()},setFileName(){this.DARI_filename=this.$refs.file.files[0].name},handleFileUpload(t){var e=o.getAuthHeader();e["Content-Type"]="multipart/form-data",this.DARI_filename=this.$refs.file.files[0].name;let a=new FormData;a.append("file",this.$refs.file.files[0]),this.$http.post("upload?surveycompany_id="+t,a,{headers:e}).then(t=>{console.log("OK")}).catch(function(){console.log("FAILURE!!")})}},mounted(){this.fetchCompany(),this.fetchSurvey(),this.fetchCompanySurvey()}},U={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-3"},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/23.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v(" "),a("h4",{staticStyle:{color:"white"}},[t._v(t._s(t._f("translate")("Qüestionaris")))])]),t._v(" "),a("div",{staticClass:"col-sm-2 offset-sm-2"},[a("h4",{staticStyle:{color:"white"}},[t._v(t._s(t.company.commercial_name)+"\n      ")])])]),t._v(" "),a("div",{staticStyle:{color:"white"}},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.showModal}},[a("img",{attrs:{src:"/static/img/svgs/33.svg",alt:"Smiley face",height:"35",width:"35"}})]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.showModalConfirmation}},[a("img",{attrs:{src:"/static/img/svgs/34.svg",alt:"Smiley face",height:"35",width:"35"}})]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){t.duplicate()}}},[a("img",{attrs:{src:"/static/img/svgs/60.svg",alt:"Smiley face",height:"35",width:"35"}})]),t._v("\n\n"+t._s(t._f("translate")("Puntuació"))+"\n "),a("img",{attrs:{src:"/static/img/svgs/39.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v("\n 0-49\n "),a("img",{attrs:{src:"/static/img/svgs/41.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v("\n 50-69\n "),a("img",{attrs:{src:"/static/img/svgs/40.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v("\n 70-100\n")]),t._v(" "),a("table",{staticClass:"table table-light table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}}),t._v(" "),a("th",{attrs:{scope:"col"}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/58.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n      "+t._s(t._f("translate")("Nom qüestionari")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/57.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Estat")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/58.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Última data de modificació")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/59.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Puntuació obtinguda"))+" ")]),t._v(" "),a("th",{attrs:{scope:"col"}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/59.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Puntuació futurible")))])])]),t._v(" "),a("tbody",t._l(t.company_surveys,function(e,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selected)?t._i(e.selected,null)>-1:e.selected},on:{click:function(e){t.setOption(s)},change:function(a){var s=e.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=t._i(s,null);r.checked?o<0&&t.$set(e,"selected",s.concat([null])):o>-1&&t.$set(e,"selected",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"selected",i)}}})]),t._v(" "),"created"==e.status?a("td",{attrs:{color:"white"}},[a("a",{staticStyle:{color:"black"},attrs:{href:"#/questions/"+e.id}},[t._v(t._s(e.name_survey)+"  ")])]):t._e(),t._v(" "),"created"!=e.status?a("td",{attrs:{color:"white"}},[a("a",{staticStyle:{color:"black"},attrs:{href:"#/results/"+e.id}},[t._v(t._s(e.name_survey)+"  ")])]):t._e(),t._v(" "),a("td",[t._v(t._s(t._f("translate")(t.getStatus(e.status))))]),t._v(" "),a("td",[t._v(t._s(e.last_modified))]),t._v(" "),"submitted"==e.status?a("td",[a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:t.getColor(e.score)}}),t._v("\n       "+t._s(e.score)+"/100")],1):a("td",[t._v("       \n       - ")]),t._v(" "),"submitted"==e.status?a("td",[a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:t.getColor(e.score_future)}}),t._v("\n       "+t._s(e.score_future)+"/100")],1):a("td",[t._v("       \n       - ")])])}))]),t._v(" "),a("b-modal",{ref:"myModalRef",attrs:{"hide-footer":"",title:"",size:"lg"}},[a("div",{staticClass:"d-block text-center"},[a("h3",[t._v(t._s(t._f("translate")("Qüestionari nou")))]),t._v(" "),1==t.DARI_needed()?a("div",{staticClass:"custom-file"},[a("label",{staticClass:"custom-file-label",attrs:{for:"file"}}),t._v(" "),a("input",{ref:"file",staticClass:"form-control-file",attrs:{type:"file",id:"file"},on:{change:function(e){t.setFileName()}}}),t._v(" "),a("div",{staticStyle:{"padding-top":"10px"}},[a("p",[t._v(t._s(t._f("translate")("Adjuntar DARI (Declaració Anual de Residus Industrials) de l'any corresponent a l'exercici que s'està avaluant"))+" ")])])]):t._e(),t._v(" "),a("div",[a("div",[a("p",[t._v(" "+t._s(t._f("translate")("Qüestionari per presentar sol·licitud a una convocatòria d'ajuts Leader")))]),t._v(" "),a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.convocatoria,expression:"convocatoria"}],staticClass:"form-check-input",attrs:{type:"checkbox",name:"optionsRadios",id:"optionsRadios1"},domProps:{checked:Array.isArray(t.convocatoria)?t._i(t.convocatoria,null)>-1:t.convocatoria},on:{change:function(e){var a=t.convocatoria,s=e.target,r=!!s.checked;if(Array.isArray(a)){var i=t._i(a,null);s.checked?i<0&&(t.convocatoria=a.concat([null])):i>-1&&(t.convocatoria=a.slice(0,i).concat(a.slice(i+1)))}else t.convocatoria=r}}}),t._v("\n       "+t._s(t._f("translate")("Qüestionari per presentar sol·licitud a una convocatòria d'ajuts Leader"))+"\n      ")])]),t._v(" "),a("p",[t._v("\n    "+t._s(t._f("translate")("Any de convocatòria"))),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.convocatoria_year,expression:"convocatoria_year"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.convocatoria_year=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"",disabled:"",hidden:""}},[t._v(t._s(t._f("translate")("Any")))]),t._v(" "),a("option",{attrs:{value:"2017"}},[t._v("2017")]),t._v(" "),a("option",{attrs:{value:"2018"}},[t._v("2018")])])])])]),t._v("\n      \n      "+t._s(t.error)+"\n      ")]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:t.hideModal}},[t._v(t._s(t._f("translate")("Enrere")))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:t.createCompanySurvey}},[t._v(t._s(t._f("translate")("Crear")))])]),t._v(" "),a("b-modal",{ref:"myModalError",attrs:{id:"myModalError"}},[t._v("\n    "+t._s(this.error)+"\n     ")]),t._v(" "),a("b-modal",{ref:"instructions",attrs:{id:"instructions","hide-footer":""}},[t._v("\n    1. Fer clic al botó 'Crear'. Això generarà un qüestionari amb nom automàtic (nom empresa+any+versió) i mostrarà la pantalla amb la primera pregunta.\n2. Cada pregunta està composada dels següents elements:\na) Barra de progrés: mostra tants punts com preguntes a respondre. Els punts en verd representen preguntes que ja s'han respòs, mentre que els negres representen preguntes pendents.\nb) Enunciat de la pregunta: situa el tema que s'està avaluant\nc) Més informació sobre la pregunta: la icona (?) mostra informació extra sobre el tema avaluat\nd) Possibles respostes: 2,3 o 4 possibles respostes entre les que s'ha d'escollir la situació més propera a la realitat de l'empresa.\ne) Botó d'adjuntar document: \n      "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:t.hideModalInstructions}},[t._v(t._s(t._f("translate")("Enrere")))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:function(e){t.goToSurvey()}}},[t._v("OK")])]),t._v(" "),a("b-modal",{ref:"Confirmation",attrs:{id:"Confirmation","hide-footer":""}},[t._v("\n      "+t._s(t._f("translate")("Estàs segur d’esborrar el qüestionari?"))+"\n      "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:function(e){t.hideModalConfirmation()}}},[t._v(t._s(t._f("translate")("Enrere")))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:function(e){t.deleteSurvey()}}},[t._v("OK")])])],1)},staticRenderFns:[]};var T=a("VU/8")(H,U,!1,function(t){a("RayY")},"data-v-354f5a90",null).exports,O=(a("M4fF"),a("l9mu"),a("m/C5")),V=a.n(O),Q={components:{"b-button":S.a},name:"Results",data:()=>({data:[{name:"Recursos",percent:14.3,id:1},{name:"Fabricació i distribució",percent:14.3,id:2},{name:"Ús",percent:14.3,id:3},{name:"Reparació",percent:14.3,id:4},{name:"Reús",percent:14.3,id:5},{name:"Remanufactura",percent:14.3,id:6},{name:"Reciclatge",percent:14.3,id:7}],questions:[],selected:0,answers:[],answerplus:[],company_survey:"",score:"",results_avg:"",results:"",results_avg_future:0,proposals:[]}),computed:{lang:function(){return this.$i18n.locale()}},methods:{exportToPDF:function(){console.log("exported");var t=window.document.getElementById("printable");V()(t,{margin:.75,filename:"myfile.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:1},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}})},filtered:function(t){var e=this.questions,a=[];return this.answers.filter(function(s,r){s.score<1&&e[r].cat.strategy==t&&a.push(r)}),a},computeScore(){var t;t=this.answers;var e;e=this.questions.map(t=>t.cat);var a=[];a=_.map(t,function(t){return _.assign(t,_.find(e,{id:t.id_question}))}).reduce(function(t,e){var a=t[e.strategy];return a?(a.score=a.score+e.score,a.score_future=a.score_future+e.score_future,a.nums=a.nums+1):(t[e.strategy]={score:e.score,score_future:e.score_future},t[e.strategy].nums=1),t},{});var s={score:0,score_future:0,numsector:0,avg:0,avg_future:0};for(var r in s.score=0,s.numsector=0,a)a[r].avg=a[r].score/a[r].nums,a[r].avg_future=a[r].score_future/a[r].nums,s.score=s.score+a[r].avg,s.score_future=s.score_future+a[r].avg_future,s.numsector=s.numsector+1;this.results=a,s.avg=Math.round(100*s.score/s.numsector*100)/100,s.avg_future=Math.round(100*s.score_future/s.numsector*100)/100,this.results_avg=s,this.company_survey.score=Math.round(100*s.avg)/100,this.company_survey.score_future=this.company_survey.score+Math.round(100*s.avg_future)/100,""==this.company_survey.pub_date&&(this.company_survey.pub_date="now",this.updateCompanySurvey()),this.renderChart(this.$data.data)},fetchAnswers(t){this.$http.get("answers?ids="+t,{headers:o.getAuthHeader()}).then(t=>{this.answers=t.data.data;var e=this.answers.map(t=>t.id_question);this.fetchQuestions(e)}).catch(()=>"")},fetchQuestions(t){this.$http.get("questions?ids="+t,{headers:o.getAuthHeader()}).then(t=>{this.questions=t.data.data,this.computeScore()}).catch(()=>"")},fetchCompanySurvey(){this.$http.get("companysurvey/"+this.$route.params.id,{headers:o.getAuthHeader()}).then(t=>{this.company_survey=t.data,this.fetchAnswers(t.data.answers)}).catch(()=>"")},fetchProposals(){this.$http.get("proposals",{headers:o.getAuthHeader()}).then(t=>{this.proposals=t.data}).catch(()=>"")},updateCompanySurvey(){var t=this.company_survey;this.$http.put("companysurvey/"+t.id,{company_survey:t},{headers:o.getAuthHeader()}).then(t=>{console.log("OK")}).catch(()=>this.error="")},renderChart:function(t){var e=this.$i18n,a=this.results,s=d3.layout.pie().value(function(t){return t.percent}).sort(null).padAngle(.03),r=d3.scale.category10(),i=d3.svg.arc().outerRadius(200).innerRadius(80),o=d3.select("#chart").append("svg").attr({width:700,height:600,class:"shadow"}).append("g").attr({transform:"translate(350,200)"});o.selectAll("path").data(s(t)).enter().append("path").attr({d:i,fill:function(t,e){return void 0==a[t.data.name]?"#999":a[t.data.name].avg<.2?"#66b32e":a[t.data.name].avg>=.2&&a[t.data.name].avg<.5?"#ffcc03":"#43AE1D"}});o.append("circle").attr("cx",0).attr("cy",0).attr("r",60).attr("fill","none").attr("stroke","black").attr("stroke-width","4");o.selectAll("text").data(s(t)).enter().append("text").transition().duration(200).attr("transform",function(t){return"translate("+i.centroid(t)+")"}).attr("dy",".4em").attr("text-anchor","middle").text(function(t){return t.data.id+"."+e.translate(t.data.name)}).style({fill:"black","font-size":"10px"}),r=d3.scale.ordinal().domain([e.translate("Estratègia amb alt potencial de millora"),e.translate("Estratègia amb potencial de millora mitjà"),e.translate("Estratègia amb bona puntuació obtinguda"),e.translate("Estratègia no aplicable al sector de l'empresa")]).range(["#F5F7F1","#ffcc03","#66b32e","grey"]);var n=o.selectAll(".legend").data(r.domain()).enter().append("g").attr({class:"legend",transform:function(t,e){return"translate(-118,"+(100+47*e+100)+")"}});n.append("rect").attr({width:40,height:40,rx:20,ry:20}).style({fill:r,stroke:r}),n.append("text").attr({x:50,y:15}).text(function(t){return t}).style({fill:"#929DAF","font-size":"14px",color:"white"})}},mounted(){this.fetchCompanySurvey(),this.fetchProposals()}},G={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"hello",attrs:{id:"printable"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"col-md-4 offset-md-4",staticStyle:{"background-color":"black","border-radius":"5ex !important"}},[a("p",{staticClass:"text-light"},[t._v(" "+t._s(t._f("translate")("Nom empresa"))+"  "+t._s(t.company_survey.company)+" ")]),t._v(" "),a("p",{staticClass:"text-light"},[t._v(" "+t._s(t._f("translate")("Nom qüestionari"))+" : "+t._s(t.company_survey.name_survey))]),t._v(" "),a("p",{staticClass:"text-light"},[t._v(" "+t._s(t._f("translate")("Data d'avaluació"))+" : "+t._s(t.company_survey.pub_date))]),t._v(" "),a("p",{staticClass:"text-light"},[t._v(" "+t._s(t._f("translate")("Puntuació obtinguda"))+"  "+t._s(t.results_avg.avg)+"/100")]),t._v(" "),a("p",{staticClass:"text-light"},[t._v(" "+t._s(t._f("translate")("Puntuació futurible"))+"  "+t._s(t.results_avg.avg)+"/100")])])]),t._v(" "),a("div",{staticClass:"chart",attrs:{id:"chart"}}),t._v(" "),a("h4",{staticStyle:{"padding-top":"20px","padding-bottom":"20px"}},[t._v("\n\t"+t._s(t._f("translate")("Propostes de millora per estratègia"))+"\n  ")]),t._v(" "),t._l(t.results,function(e,s){return a("span",{staticClass:"demo"},[a("li",{staticClass:"list-group-item",staticStyle:{color:"#e84d20","border-top-left-radius":"5ex !important","border-top-right-radius":"5ex !important",padding:"0","border-color":"red","border-width":"4px","text-align":"center"}},[t._v(t._s(t._f("translate")(s)))]),t._v(" "),a("span",t._l(t.proposals[s][t.lang],function(e,s){return a("li",{staticClass:"list-group-item "},[a("p",{staticStyle:{"text-align":"left"}},[t._v("\n       "+t._s(e)+"\n      ")])])})),t._v(" "),t._l(t.filtered(s),function(e,s){return a("li",{staticClass:"list-group-item"},[a("p",{staticStyle:{"text-align":"left"}},[t._v("\n\n\t\t   "+t._s(t.questions[e][t.lang].proposta_millora)+"\n\t\t  ")])])}),t._v(" "),a("li",{staticClass:"list-group-item",staticStyle:{"border-bottom-left-radius":"5ex !important","border-bottom-right-radius":"5ex !important"}}),t._v(" "),a("p")],2)}),t._v(" "),a("div",{staticClass:"container",staticStyle:{"background-color":"white","border-radius":"5ex !important","text-align":"left"}},[a("h4",{staticStyle:{"text-align":"center"}},[t._v("Preguntes")]),t._v(" "),t._l(t.questions,function(e,s){return a("span",[a("p",{staticStyle:{"font-weight":"bold","text-align":"left"}},[t._v("\n      "+t._s(s+1)+" - "+t._s(e[t.lang].statement)+"\n    ")]),t._v(" "),a("p",{staticStyle:{"text-align":"left"}},[t._v("\n      "+t._s(e[t.lang]["q"+t.answers[s].id_option])+"\n    ")]),t._v(" "),a("span",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(t._f("translate")("Document adjunt"))+" ")]),t._v(" "),""!=t.answers[s].justification_file?a("p",[t._v("Si")]):a("p",[t._v("No")]),t._v(" "),a("span",{staticStyle:{"font-weight":"bold"}},[t._v(t._s(t._f("translate")("Explicació")))]),t._v(" "),""!=t.answers[s].justification_text?a("p",[t._v(t._s(t.answers[s].justification_text))]):a("p",[t._v("No")]),t._v(" "),a("span",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(t._f("translate")("Projecte futurible")))]),t._v(" "),""!=t.answers[s].future_justification_text?a("p",[t._v("Si")]):a("p",[t._v("No")]),t._v(" "),a("span",{staticStyle:{"font-weight":"bold"}},[t._v(" "+t._s(t._f("translate")("Explicació projecte futurible")))]),t._v(" "),""!=t.answers[s].future_justification_text?a("p",[t._v(t._s(t.answers[s].future_justification_text))]):a("p",[t._v("No")])])})],2)],2),t._v(" "),a("b-button",{on:{click:function(e){t.exportToPDF()}}},[t._v("Export")])],1)},staticRenderFns:[]};var W=a("VU/8")(Q,G,!1,function(t){a("gu59")},"data-v-48d811da",null).exports,Y={name:"Register",data:()=>({email:"",password:"",confirmPassword:"",error:"",admin:!0,user_id:""}),computed:{currentRoute(){return"/updateuseradmin"==this.$route.path},comparePasswords(){return""==this.password||(this.password===this.confirmPassword||(this.error=this.$i18n.translate("contrasenya no coincideix"),!1))}},methods:{fetchUser(){var t="user";void 0!=this.$route.query.id?t="user/"+this.$route.query.id:this.user_id=-1,this.$http.get(t,{headers:o.getAuthHeader()}).then(t=>{this.email=t.data.email,void 0!=t.data.type_user&&1==t.data.type_user?this.admin=!0:this.admin=!1}).catch(()=>"")},register(){if(this.comparePasswords){var t="user";void 0!=this.$route.query.id&&(t="user/"+this.$route.query.id);var e=this.$route.query.id;this.$http.put(t,{username:this.email,password:this.password,admin:this.admin},{headers:o.getAuthHeader()}).then(t=>{this.error="created",void 0!=e&&this.admin?this.$router.replace(this.$route.query.redirect||"/admin/users"):this.$router.replace(this.$route.query.redirect||"/user")}).catch(()=>this.error=message)}},registerSuccessful(t){t.data.access_token?(this.error="",this.$router.replace(this.$route.query.redirect||"/registercompany")):this.loginFailed(t.data.message)},loginFailed(t){this.error=t},getToken(){void 0!=this.$route.query.token&&(localStorage.access_token=this.$route.query.token)}},mounted(){this.fetchUser()}},K={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"register-wrapper border border-light"},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.register(e)}}},[a("h2",{staticClass:"form-signin-heading"},[t._v(t._s(t._f("translate")("Modificar dades d'usuari")))]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),t._v("\n      "+t._s(t.email)+"\n      "),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:t._f("translate")("Nova contrasenya")},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"confirmInputPassword"}},[t._v("Password")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmPassword,expression:"confirmPassword"}],staticClass:"form-control",attrs:{type:"password",id:"confirmInputPassword",placeholder:t._f("translate")("Repetir nova contrasenya")},domProps:{value:t.confirmPassword},on:{input:function(e){e.target.composing||(t.confirmPassword=e.target.value)}}}),t._v(" "),t.currentRoute?a("a",{staticClass:"btn btn-lg btn-danger btn-block",attrs:{href:"/#/admin/users",role:"button"}},[t._v("Cancelar")]):a("a",{staticClass:"btn btn-lg btn-danger btn-block",attrs:{href:"/#/user",role:"button"}},[t._v("Cancelar")]),t._v(" "),(t.currentRoute,a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"}},[t._v(t._s(t._f("translate")("Actualitzar")))])),t._v(" "),a("span",[t._v(t._s(t.error))])])])},staticRenderFns:[]};var J=a("VU/8")(Y,K,!1,function(t){a("Avoh")},"data-v-27900791",null).exports,X={name:"HelloWorld",data:()=>({company:"",survey:"",questions:"",questions_applied:""}),computed:{lang:function(){return this.$i18n.locale()}},methods:{updateSurvey(){var t=[];this.questions.map(function(e,a){e.selected&&t.push(a+1)}),this.$http.put("survey",{questions:t.join(),id_company:this.company.id},{headers:o.getAuthHeader()}).then(t=>{console.log("ok"),this.$router.replace(this.$route.query.redirect||"/admin/users")}).catch(()=>"")},fetchCompany(){this.$http.get("company?user_id="+this.$route.params.id,{headers:o.getAuthHeader()}).then(t=>{this.company=t.data,this.fetchQuestions()}).catch(()=>"")},fetchSurvey(){this.$http.get("survey?id="+this.company.id,{headers:o.getAuthHeader()}).then(t=>{this.survey=t.data,this.questions_applied=t.data.questions.split(",");var e=this.questions;this.questions_applied.forEach(function(t,a){e[t-1].selected=!0}),this.questions=e}).catch(()=>"")},fetchQuestions(t){this.$http.get("questions",{headers:o.getAuthHeader()}).then(t=>{t.data.data.map(function(t){t.selected=!1}),this.questions=t.data.data,this.fetchSurvey()}).catch(()=>"")}},mounted(){this.fetchCompany()}},Z={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h4",[t._v(t._s(t._f("translate")("Llistat de preguntes que apliquen a l'empresa")))]),t._v(" "),a("table",{staticClass:"table table-light table-bordered"},[t._m(0),t._v(" "),a("tbody",t._l(t.questions,function(e,s){return a("tr",[a("td",[t._v(t._s(e[t.lang].statement))]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selected)?t._i(e.selected,null)>-1:e.selected},on:{change:function(a){var s=e.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=t._i(s,null);r.checked?o<0&&t.$set(e,"selected",s.concat([null])):o>-1&&t.$set(e,"selected",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"selected",i)}}})])])}))]),t._v(" "),a("b-button",{attrs:{variant:"success"},on:{click:function(e){t.updateSurvey()}}},[t._v(t._s(t._f("translate")("Actualitzar")))])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",{attrs:{scope:"col"}})])])}]};var tt=a("VU/8")(X,Z,!1,function(t){a("bDgQ")},"data-v-4e4ae94e",null).exports,et=(a("b6br"),a("4NbC"),{components:{Icon:A.a,"b-modal":C.a},name:"UserPage",data:()=>({user:"dpiscia",company:{id:1},DARI_filename:"",survey:"",company_surveys:[],error:"",selected:"",filter_status:"",filter_sector:"",filter_subsector:"",filter_comarca:"",filter_leader:"",filter_year:"",filter_convocatoria:"",companies:"",filter_company:"",filtered:[],dataExcel:[],sort_field:"email",sort_order:["asc","desc"]}),computed:{unique_convocatoria(){return w()(this.filtered.map(t=>t.convocatoria))},unique_year(){return w()(this.filtered.map(t=>t.year))},unique_status(){return w()(this.filtered.map(t=>t.status))},unique_company(){return w()(this.filtered.map(t=>t.commercial_name))},unique_sector(){return w()(this.filtered.map(t=>t.sector))},unique_subsector(){return w()(this.filtered.map(t=>t.subsector))},unique_comarca(){return w()(this.filtered.map(t=>t.comarca))},unique_leader(){return w()(this.filtered.map(t=>t.territori_leader))},filtered_surveys(){var t=this.company_surveys;return""!=this.filter_company&&(t=_.filter(t,{commercial_name:this.filter_company})),""!=this.filter_status&&(t=_.filter(t,{status:this.filter_status})),""!=this.filter_sector&&(t=_.filter(t,{sector:this.filter_sector})),""!=this.filter_subsector&&(t=_.filter(t,{subsector:this.filter_subsector})),""!=this.filter_comarca&&(t=_.filter(t,{comarca:this.filter_comarca})),""!=this.filter_leader&&(t=_.filter(t,{territori_leader:this.filter_leader})),""!=this.filter_year&&(t=_.filter(t,{year:this.filter_year})),""!=this.filter_convocatoria&&(t=_.filter(t,{convocatoria:this.filter_convocatoria})),t=_.orderBy(t,["type",this.sort_field],this.sort_order),this.filtered=t,t}},methods:{sortBy(t){t==this.sort_field&&("desc"==this.sort_order[0]?this.sort_order=["asc","desc"]:this.sort_order=["desc","asc"]),this.sort_field=t},getStatus:t=>"submitted"==t?"Enviat":"Pendent",showModalConfirmation(){this.$refs.Confirmation.show()},hideModalConfirmation(){this.$refs.Confirmation.hide()},getColor:t=>(console.log(t),t>=0&&t<50?"red":t>=50&&t<70?"orange":"green"),downloadAnswers(){var t=this.filtered.map(t=>t.id_surveycompany).join(","),e=this.$i18n.locale();this.$http.get("dataExcel?ids="+t+"&lang="+e,{headers:o.getAuthHeader()}).then(t=>{var e=t.data,a={id:e[1].id};a.Preguntes=e[1].Preguntes;var s=e[1];delete s.id,delete s.Preguntes,Object.keys(s).sort().forEach(function(t){a[t]=e[1][t]}),e[1]=a;var r=I.a.utils.json_to_sheet(e),i=I.a.utils.book_new();I.a.utils.book_append_sheet(i,r,"People");var o=I.a.write(i,{bookType:"xlsx",type:"binary"});var n=new Date,c=n.getDate(),l=n.getMonth()+1,d=n.getFullYear(),u=n.getHours(),v=n.getMinutes();c<10&&(c="0"+c),l<10&&(l="0"+l),u<10&&(u="0"+u),v<10&&(v="0"+v);var m=c+l+d+"_"+u+v+".xlsx";Object(D.saveAs)(new Blob([function(t){for(var e=new ArrayBuffer(t.length),a=new Uint8Array(e),s=0;s!=t.length;++s)a[s]=255&t.charCodeAt(s);return e}(o)],{type:"application/octet-stream"}),m)}).catch(()=>"")},downloadAllSurvey(){var t=this.filtered.map(t=>t.id_surveycompany).join(",");this.$http.get("surveyFiles?ids="+t,{responseType:"arraybuffer",headers:o.getAuthHeader()}).then(t=>{var e=new Date,a=e.getDate(),s=e.getMonth()+1,r=e.getFullYear(),i=e.getHours(),o=e.getMinutes();a<10&&(a="0"+a),s<10&&(s="0"+s),i<10&&(i="0"+i),o<10&&(o="0"+o);var n=a+s+r+"_"+i+o+".zip";console.log("download"),Object(D.saveAs)(new Blob([t.data],{type:"application/zip"}),n)}).catch(()=>"")},downloadSurvey(){var t,e;this.filtered.forEach(function(e,a){e.selected&&(t=e.id_surveycompany)}),this.filtered.forEach(function(t,a){t.selected&&(e=t.status)}),void 0==t?(this.error="has de seleccionar un qüestionari",this.showModalError()):"created"==e?(this.error="No es pot fer servir aquesta funcionalitat amb un qüestionari pendent",this.showModalError()):this.$http.get("surveyFiles/"+t,{responseType:"arraybuffer",headers:o.getAuthHeader()}).then(t=>{var e=new Date,a=e.getDate(),s=e.getMonth()+1,r=e.getFullYear(),i=e.getHours(),o=e.getMinutes();a<10&&(a="0"+a),s<10&&(s="0"+s),i<10&&(i="0"+i),o<10&&(o="0"+o);var n=a+s+r+"_"+i+o+".zip";Object(D.saveAs)(new Blob([t.data],{type:"application/zip"}),n)}).catch(()=>"")},deleteSurvey(){var t,e;this.filtered.forEach(function(e,a){e.selected&&(t=e.id_surveycompany)}),this.filtered.forEach(function(t,a){t.selected&&(e=t.status)}),void 0==t?(this.error="has de seleccionar un qüestionari",this.showModalError()):"submitted"==e?(this.error="No es pot esborrar un qüestionari enviat",this.showModalError()):(this.hideModalConfirmation(),this.$http.delete("companysurvey/"+t,{headers:o.getAuthHeader()}).then(t=>{console.log("deleted"),this.company_surveys=[],this.fetchCompanySurvey()}).catch(()=>""))},setOption(t){this.filtered.forEach(function(e,a){a.id!=t?e.selected=!1:e.selected=!e.selected}),console.log("sel")},fetchCompanySurvey(){this.$http.get("companysurvey?type=all",{headers:o.getAuthHeader()}).then(t=>{t.data.map(function(t){t.selected=!1,t.id_surveycompany=t.id}),this.company_surveys=t.data,this.fetchCompanies()}).catch(()=>"")},fetchCompanies(){this.$http.get("companies",{headers:o.getAuthHeader()}).then(t=>{this.companies=t.data;var e=_.map(this.company_surveys,function(e){return _.merge(e,_.find(t.data,{id:e.id_company}))});this.company_surveys=e}).catch(()=>"")},fetchQuestions(t){this.$http.get("dataExcel",{headers:o.getAuthHeader()}).then(t=>{this.dataExcel=t.data.data}).catch(()=>"")},showModalError(){this.$refs.myModalError.show()},hideModalError(){this.$refs.myModalError.hide()}},mounted(){this.fetchCompanySurvey()}}),at={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/users"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/14.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Gestió d'usuaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/surveys"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/15.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Visualització de qüestionaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/ranking"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/16.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Rànquing de resultats")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:""}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/17.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Extracció d'informes")))])])])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{color:"white"}},[a("div",{staticClass:"col-sm"},[a("label",{staticClass:"control-label",staticStyle:{width:"120px","font-size":"0.9rem"}},[t._v(t._s(t._f("translate")("Estat")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_status,expression:"filter_status"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_status=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_status,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(t._f("translate")(t.getStatus(e))))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm"},[a("label",{staticClass:"control-label",staticStyle:{width:"120px","font-size":"0.9rem"}},[t._v(t._s(t._f("translate")("Empresa")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_company,expression:"filter_company"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_company=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_company,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm"},[a("label",{staticClass:"control-label",staticStyle:{width:"120px","font-size":"0.9rem"}},[t._v("Sector")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_sector,expression:"filter_sector"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_sector=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_sector,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(t._f("translate")(e)))])})],2)])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{color:"white"}},[a("div",{staticClass:"col-sm"},[a("label",{staticClass:"control-label",staticStyle:{width:"120px","font-size":"0.9rem"}},[t._v("Subsector")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_subsector,expression:"filter_subsector"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_subsector=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_subsector,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(t._f("translate")(e)))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm"},[a("label",{staticClass:"control-label",staticStyle:{width:"120px","font-size":"0.9rem"}},[t._v("Comarca")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_comarca,expression:"filter_comarca"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_comarca=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_comarca,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(t._f("translate")(e)))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm"},[a("label",{staticClass:"control-label",staticStyle:{width:"120px","font-size":"0.9rem"}},[t._v(t._s(t._f("translate")("Territori Leader")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_leader,expression:"filter_leader"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_leader=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_leader,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{color:"white"}},[a("div",{staticClass:"col-sm-5"},[a("label",{staticClass:"control-label",staticStyle:{width:"150px","font-size":"0.9rem"}},[t._v(t._s(t._f("translate")("Any de convocatòria")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_year,expression:"filter_year"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_year=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_year,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm-5"},[a("label",{staticClass:"control-label",staticStyle:{width:"150px","font-size":"0.9rem"}},[t._v(t._s(t._f("translate")("Es presenta a Leader")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_convocatoria,expression:"filter_convocatoria"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_convocatoria=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_convocatoria,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{color:"white"}},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.showModalConfirmation}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/34.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v(" "),a("figcaption",{staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(t._f("translate")("Esborrar el qüestionari")))])])]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.downloadSurvey}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/36.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v(" "),a("figcaption",{staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(t._f("translate")("Documents adjunts del qüestionari seleccionat")))])])]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.downloadAllSurvey}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/36.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v(" "),a("figcaption",{staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(t._f("translate")("Documents adjunts de tots els qüestionaris")))])])]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.downloadAnswers}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/36.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v(" "),a("figcaption",{staticStyle:{"font-size":"0.8rem"}},[t._v(t._s(t._f("translate")("Resum de respostes de tots els qüestionaris")))])])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm",staticStyle:{color:"white"}},[t._v("\n"+t._s(t._f("translate")("Puntuació"))+"\n "),a("img",{attrs:{src:"/static/img/svgs/39.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v("\n 0-49\n "),a("img",{attrs:{src:"/static/img/svgs/41.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v("\n 50-69\n "),a("img",{attrs:{src:"/static/img/svgs/40.svg",alt:"Smiley face",height:"35",width:"35"}}),t._v("\n 70-100\n")])]),t._v(" "),a("table",{staticClass:"table table-light table-bordered",staticStyle:{"font-size":"0.9rem"}},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}}),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("commercial_name")}}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/10.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Nom empresa")))]),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("name_survey")}}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/58.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Nom qüestionari")))]),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("status")}}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/57.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Estat"))+" ")]),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("last_modified")}}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/58.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n\n        "+t._s(t._f("translate")("Última data de modificació")))]),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("year")}}},[t._v("\n\n"+t._s(t._f("translate")("Any de convocatòria")))]),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("score")}}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/59.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Puntuació obtinguda")))]),t._v(" "),a("th",{attrs:{scope:"col"},on:{click:function(e){t.sortBy("commercial_name")}}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/59.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Puntuació futurible")))])])]),t._v(" "),a("tbody",t._l(t.filtered_surveys,function(e,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selected)?t._i(e.selected,null)>-1:e.selected},on:{click:function(a){t.setOption(e)},change:function(a){var s=e.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=t._i(s,null);r.checked?o<0&&t.$set(e,"selected",s.concat([null])):o>-1&&t.$set(e,"selected",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"selected",i)}}})]),t._v(" "),a("td",[t._v(t._s(e.commercial_name))]),t._v(" "),"created"==e.status?a("td",{attrs:{color:"white"}},[a("a",{staticStyle:{color:"black"},attrs:{href:"#/questions/"+e.id_surveycompany}},[t._v(t._s(e.name_survey)+"  ")])]):t._e(),t._v(" "),"created"!=e.status?a("td",{attrs:{color:"white"}},[a("a",{staticStyle:{color:"black"},attrs:{href:"#/results/"+e.id_surveycompany}},[t._v(t._s(e.name_survey)+"  ")])]):t._e(),t._v(" "),a("td",[t._v(t._s(t._f("translate")(t.getStatus(e.status))))]),t._v(" "),a("td",[t._v(t._s(e.last_modified))]),t._v(" "),a("td",[t._v(t._s(e.year))]),t._v(" "),"submitted"==e.status?a("td",[a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:t.getColor(e.score)}}),t._v("\n       "+t._s(e.score))],1):a("td",[t._v("       \n       - ")]),t._v(" "),"submitted"==e.status?a("td",[a("icon",{staticStyle:{height:"1em"},attrs:{name:"circle",color:t.getColor(e.score_future)}}),t._v("\n       "+t._s(e.score_future))],1):a("td",[t._v("       \n       - ")])])}))]),t._v(" "),a("b-modal",{ref:"myModalError",attrs:{id:"myModalError"}},[t._v("\n    "+t._s(t._f("translate")(this.error))+"\n     ")]),t._v(" "),a("b-modal",{ref:"Confirmation",attrs:{id:"Confirmation","hide-footer":""}},[t._v("\n      "+t._s(t._f("translate")("Estàs segur d’esborrar el qüestionari?"))+"\n      "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:function(e){t.hideModalConfirmation()}}},[t._v(t._s(t._f("translate")("Enrere")))]),t._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{variant:"outline-danger",block:""},on:{click:function(e){t.deleteSurvey()}}},[t._v("OK")])])],1)},staticRenderFns:[]};var st=a("VU/8")(et,at,!1,function(t){a("NYUC")},"data-v-2b551fe8",null).exports,rt={name:"HelloWorld",data:()=>({msg:"ADCC"}),computed:{lang:function(){return this.$i18n.locale()}}},it={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h1",[t._v(t._s(t.msg))]),t._v(" "),"cat"==t.lang?a("div",[t._v('\n   \t"L’Associació pel Desenvolupament Rural de la Catalunya Central és una associació sense ànim de lucre, reconeguda com a Grup d’Acció Local (GAL) pel Departament d’agricultura, ramaderia, pesca i alimentació de la Generalitat de Catalunya, que té com objectiu principal “Catalunya central territori de qualitat” tenint com a pilars centrals :\n\n – La valorització del territori i l’entorn com a elements vertebradors d’una cohesió i responsabilitat territorial. \n– Fomentar l’esperit empresarial. \n– Apostar pel capital humà i la millora de l’ocupabilitat\n\nPer més informació, consultar el web http://www.catcentral.cat/pages/ca/inici.php"\n   ')]):a("div",[t._v('\n   \t"La Asociación por el Desarrollo Rural de la Cataluña Central es una asociación sin ánimo de lucro, reconocida como Grupo de Acción Local (GAL) por el Departamento de agricultura, ganadería, pesca y alimentación de la Generalitat de Catalunya, que tiene como objetivo principal ""Catalunya central territorio de calidad"" teniendo como pilares centrales:\n\n- La valorización del territorio y el entorno como elementos vertebradores de una cohesión y responsabilidad territorial.\n- Fomentar el espíritu empresarial.\n- Apostar por el capital humano y la mejora de la ocupabilidad.\n\nPara más información, consultar la web http://www.catcentral.cat/pages/ca/inici.php"\n   ')]),t._v(" "),a("img",{staticStyle:{width:"200px"},attrs:{src:"/static/img/ADCC.png"}}),t._v(" "),"cat"==t.lang?a("div",[t._v("\n   \tInèdit és un estudi d'ecoinnovació estratègica que treballa per a la transició cap a un futur intel·ligent, pròsper i sostenible. Ens aliem amb les organitzacions del demà acompanyant-les a gestionar el canvi que planteja l'economia circular.\n   ")]):a("div",[t._v("\n   \tInèdit es un estudio de ecoinnovación estratégica que trabaja para la transición hacia un futuro inteligente, próspero y sostenible. Nos aliamos con las organizaciones del mañana acompañándolas a gestionar el cambio que plantea la economía circular.\n   ")]),t._v(" "),a("img",{staticStyle:{width:"200px"},attrs:{src:"/static/img/inedit.png"}}),t._v(" "),"cat"==t.lang?a("div",[t._v("\n   \t\"Què és l'economia circular?\nL'economia circular és un model econòmic orientat a l'assoliment de sistemes de producció i consum més eficients, que preservin els recursos dins d'un cicle continu i n'optimitzin el seu valor.\nEls valors clau de l'economia circular són:\n- Prioritzar els recursos renovables\n- Conservar els recursos existents\n- Entendre els residus com recursos útils\n- Repensar el model de negoci\n- Ecodissenyar pel futur\n- Incorporar la tecnologia digital\n- Col·laborar per crear valor compartit\n\nQuins beneficis aporta?\nAmb l'economia circular, les economies es poden beneficiar d'estalvis en materials, reducció de l'exposició a la volatilitat de preus i riscs en subministrament, innovació, recerca i coneixement, creació de llocs de treball, reducció d'emissions de Gasos d'Efecte Hivernable i millora de la qualitat de vida.\"\n")]):a("div",[t._v('\n\t"¿Qué es la economía circular?\nLa economía circular es un modelo económico orientado al logro de sistemas de producción y consumo más eficientes, que preserven los recursos dentro de un ciclo continuo y optimicen su valor.\nLos valores clave de la economía circular son:\n- Priorizar los recursos renovables\n- Conservar lo recursos existentes\n- Entender los residuos como recursos útiles\n- Repensar el modelo de negocio\n- Ecodiseñar para el futuro\n- Incoroporar la tecnología digital\n- Colaborar para crear valor compartido\n\n¿Qué beneficios aporta?\nCon la economía circular, las economías se pueden beneficiar de ahorros en materiales, reducción de la exposición a la volatilidad de precios y riesgos en el suministro, innovación, investigación y conocimiento, creación de puestos de trabajo, reducción de emisiones de Gases de Efecto Invernadero y mejora de la calidad de vida."\n\t')])])},staticRenderFns:[]};var ot=a("VU/8")(rt,it,!1,function(t){a("PjRf")},"data-v-39a1f577",null).exports,nt={components:{Icon:A.a,"b-modal":C.a},name:"Ranking",data:()=>({user:"dpiscia",company:{id:1},DARI_filename:"",survey:"",company_surveys:[],error:"",selected:"",filter_any:"",filter_sector:"",filter_subsector:"",filter_comarca:"",companies:"",filter_leader:"",filtered:[],filtered_evolution:[],filtered_evolution_avg:[],dataExcel:[],value:"score",plot:"compare"}),computed:{unique_any(){return w()(this.filtered.map(t=>t.pub_date))},unique_leader(){return w()(this.filtered.map(t=>t.territori_leader))},unique_sector(){return w()(this.filtered.map(t=>t.sector))},unique_subsector(){return w()(this.filtered.map(t=>t.subsector))},unique_comarca(){return w()(this.filtered.map(t=>t.comarca))},filtered_surveys(){var t=this.company_surveys;t=_.filter(t,{status:"submitted"}),""!=this.filter_leader&&(t=_.filter(t,{territori_leader:this.filter_leader})),""!=this.filter_sector&&(t=_.filter(t,{sector:this.filter_sector})),""!=this.filter_subsector&&(t=_.filter(t,{subsector:this.filter_subsector})),""!=this.filter_comarca&&(t=_.filter(t,{comarca:this.filter_comarca}));var e=_.groupBy(t,"id_company"),a=Object.keys(e).map(function(t){return _.maxBy(e[t],"score")});return t=[],a.map(function(e){t.push(e)}),this.filtered=t,t},keepMax(){return grouped=_.groupBy(this.filtered,"id_company"),maxScores=Object.keys(grouped).map(function(t){return _.maxBy(grouped[t],"score")}),maxScores}},methods:{exportToPDF:function(){console.log("exported");var t=window.document.getElementById("chart");V()(t,{margin:.75,filename:"myfile.pdf",image:{type:"jpeg",quality:.98},html2canvas:{scale:1},jsPDF:{unit:"in",format:"letter",orientation:"portrait"}})},setScore(t){this.value=t,"compare"==this.plot?this.renderBarChart():this.renderChart()},downloadSurvey(){var t;this.filtered.forEach(function(e,a){e.selected&&(t=e.id_surveycompany)}),void 0==t?(this.error="you have to select one survey",this.showModalError()):this.$http.get("surveyFiles/"+t,{responseType:"arraybuffer",headers:o.getAuthHeader()}).then(t=>{console.log("download");let e=new Blob([t.data],{type:"application/zip"},name="prova"),a=window.URL.createObjectURL(e);e.name="survey",window.open(a)}).catch(()=>"")},filtered_surveys_evolution(){var t=this.company_surveys;t=_.filter(t,{status:"submitted"}),t=_.filter(t,{id_company:1});var e=_.groupBy(t,"pub_date"),a=Object.keys(e).map(function(t){return _.maxBy(e[t],"score")});return t=[],a.map(function(e){t.push(e)}),this.filtered_evolution=t,t},filtered_surveys_evolution_avg(){var t=this.company_surveys;t=_.filter(t,{status:"submitted"}),t=_.filter(t,{sector:"Industrial"});var e=_.groupBy(t,"pub_date"),a=Object.keys(e).map(function(t){return _.meanBy(e[t],"score")});return t=[],a.map(function(e){t.push(e)}),this.filtered_evolution_avg=t,t},setOption(t){this.filtered.forEach(function(e,a){a!=t&&(e.selected=!1)}),this.filtered[t].selected=!this.company_surveys[t].selected,console.log("sel")},fetchCompanySurvey(){this.$http.get("companysurvey?type=all",{headers:o.getAuthHeader()}).then(t=>{t.data.map(function(t){t.selected=!1,t.id_surveycompany=t.id}),this.company_surveys=t.data,this.fetchCompanies()}).catch(()=>"")},fetchCompanies(){this.$http.get("companies",{headers:o.getAuthHeader()}).then(t=>{this.companies=t.data;var e=_.map(this.company_surveys,function(e){return _.merge(e,_.find(t.data,{id:e.id_company}))});this.company_surveys=e}).catch(()=>"")},fetchQuestions(t){this.$http.get("dataExcel",{headers:o.getAuthHeader()}).then(t=>{this.dataExcel=t.data.data}).catch(()=>"")},showModalError(){this.$refs.myModalError.show()},hideModalError(){this.$refs.myModalError.hide()},renderChart:function(t){this.filtered_surveys_evolution(),this.filtered_surveys_evolution_avg(),this.plot="evolution";var e=this.filtered_evolution.map(t=>t.score),a=this.filtered_evolution.map(t=>t.pub_date),s=this.filtered_evolution_avg.map(t=>t.score),r=(this.filtered_surveys,t=[{label:"Data Set 1",x:a,y:e},{label:"average",x:a,y:s}],function(){var t=440,e=480,a="X Axis Label",s="Y Axis Label";function r(r){r.each(function(r){var i={top:20,right:80,bottom:30,left:50},o=t-i.left-i.right,n=e-i.top-i.bottom,c=d3.scale.ordinal().range([0,o]).domain([d3.min(r,function(t){return d3.min(t.x)}),d3.max(r,function(t){return d3.max(t.x)})]),l=d3.scale.linear().range([n,0]).domain([d3.min(r,function(t){return d3.min(t.y)}),d3.max(r,function(t){return d3.max(t.y)})]),d=(d3.scale.category10().domain(d3.range(r.length)),d3.svg.axis().scale(c).orient("bottom")),u=d3.svg.axis().scale(l).orient("left"),v=d3.svg.axis().scale(c).orient("bottom").tickSize(-n).tickFormat(""),m=d3.svg.axis().scale(l).orient("left").tickSize(-o).tickFormat(""),_=d3.svg.line().interpolate("basis").x(function(t){return c(t[0])}).y(function(t){return l(t[1])}),p=d3.select(this).attr("width",t).attr("height",e).attr("fill","#e84d20").style("stroke","white").append("g").attr("transform","translate("+i.left+","+i.top+")");p.append("g").attr("class","x grid").attr("color","white").attr("transform","translate(0,"+n+")").call(v),p.append("g").attr("class","y grid").call(m),p.append("g").attr("class","x axis").attr("transform","translate(0,"+n+")").call(d.ticks(2)).append("text").attr("dy","-.71em").attr("x",o).style("text-anchor","end").text(a),p.append("g").attr("class","y axis").call(u).append("text").attr("color","white").attr("transform","rotate(-90)").attr("y",6).attr("dy","0.71em").style("text-anchor","end").style("color","white").text(s);var h=p.selectAll(".d3_xy_chart_line").data(r.map(function(t){return d3.zip(t.x,t.y)})).enter().append("g").attr("class","d3_xy_chart_line");h.append("path").attr("class","line").attr("d",function(t){return _(t)}).attr("stroke",function(t,e){return"white"}),h.append("text").datum(function(t,e){return{name:r[e].label,final:t[t.length-1]}}).attr("transform",function(t){return"translate("+c(t.final[0])+","+l(t.final[1])+")"}).attr("x",3).attr("dy",".35em").attr("fill",function(t,e){return"white"}).text(function(t){return t.name})})}return r.width=function(e){return arguments.length?(t=e,r):t},r.height=function(t){return arguments.length?(e=t,r):e},r.xlabel=function(t){return arguments.length?(a=t,r):a},r.ylabel=function(t){return arguments.length?(s=t,r):s},r}().width(600).height(500).xlabel("X Axis").ylabel("Y Axis"));d3.select("svg").remove();d3.select("#chart").append("svg").datum(t).call(r)},renderBarChart:function(){this.plot="compare";var t=this.value,e=this.filtered_surveys;e="score_future"==t?e.sort(function(e,a){return d3.ascending(e[t]+e.score,a[t]+a.score)}):e.sort(function(e,a){return d3.ascending(e[t],a[t])});var a=15,s=25,r=15,i=60,o=560-i-s,n=180-a-r;d3.select("svg").remove();var c=d3.select("#chart").append("svg").attr("width",o+i+s).attr("height",n+a+r).attr("fill","white").append("g").attr("transform","translate("+i+","+a+")"),l=d3.scale.linear().range([0,o]).domain([0,d3.max(e,function(e){return e[t]})]),d=d3.scale.ordinal().rangeRoundBands([n,0],.1).domain(e.map(function(t){return t.commercial_name})),u=d3.svg.axis().scale(d).tickSize(3).orient("left"),v=(c.append("g").attr("class","y axis").call(u),c.selectAll(".bar").data(e).enter().append("g"));v.append("rect").attr("class","bar").attr("y",function(t){return d(t.commercial_name)}).attr("height",d.rangeBand()).attr("x",0).attr("width",function(e){return l(e[t])}),v.append("text").attr("class","label").attr("color","black").attr("y",function(t){return d(t.commercial_name)+d.rangeBand()/2+4}).attr("x",function(e){return l(e[t])+3}).text(function(e){return e[t]})}},mounted(){this.fetchCompanySurvey()}},ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/users"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/14.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Gestió d'usuaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/surveys"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/15.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Visualització de qüestionaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2"},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/ranking"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/16.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Rànquing de resultats")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:""}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/17.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Extracció d'informes")))])])])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{color:"white"}},[a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"control-label"},[t._v("Any")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_any,expression:"filter_any"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_any=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_any,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"control-label"},[t._v("Sector")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_sector,expression:"filter_sector"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_sector=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_sector,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"control-label"},[t._v("Subsector")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_subsector,expression:"filter_subsector"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_subsector=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_subsector,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{color:"white"}},[a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"control-label"},[t._v("Comarca")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_comarca,expression:"filter_comarca"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_comarca=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_comarca,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"control-label"},[t._v(t._s(t._f("translate")("Territori Leader")))]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_leader,expression:"filter_leader"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_leader=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_leader,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-12"},[a("button",{staticClass:"btn btn-primary",staticStyle:{color:"#e84d20","background-color":"white"},on:{click:function(e){t.renderBarChart()}}},[t._v(t._s(t._f("translate")("Comparar")))]),t._v(" "),a("button",{staticClass:"btn btn-primary",staticStyle:{color:"#e84d20","background-color":"white"},on:{click:function(e){t.renderChart()}}},[t._v(t._s(t._f("translate")("Veure evolució")))])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.setScore("score")}}},[t._v(t._s(t._f("translate")("Puntuació obtinguda")))])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("button",{staticClass:"btn btn-primary",on:{click:function(e){t.setScore("score_future")}}},[t._v(t._s(t._f("translate")("Puntuació futurible")))])]),t._v(" "),a("div",{staticClass:"col-sm-6"},[a("table",{staticClass:"table table-light table-bordered"},[a("thead",[a("tr",[a("th",{attrs:{scope:"col"}}),t._v(" "),t._m(0),t._v(" "),a("th",{attrs:{scope:"col"}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/16.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n        "+t._s(t._f("translate")("Puntuació obtinguda")))]),t._v(" "),a("th",{attrs:{scope:"col"}},[a("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/16.svg",alt:"Smiley face",height:"33",width:"33"}}),t._v("\n "+t._s(t._f("translate")("Puntuació futurible")))])])]),t._v(" "),a("tbody",t._l(t.filtered_surveys,function(e,s){return a("tr",[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.selected,expression:"item.selected"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.selected)?t._i(e.selected,null)>-1:e.selected},on:{click:function(e){t.setOption(s)},change:function(a){var s=e.selected,r=a.target,i=!!r.checked;if(Array.isArray(s)){var o=t._i(s,null);r.checked?o<0&&t.$set(e,"selected",s.concat([null])):o>-1&&t.$set(e,"selected",s.slice(0,o).concat(s.slice(o+1)))}else t.$set(e,"selected",i)}}})]),t._v(" "),a("td",[t._v(t._s(e.commercial_name))]),t._v(" "),a("td",[t._v(t._s(e.score))]),t._v(" "),a("td",[t._v(t._s(e.score_future))])])}))]),t._v(" "),a("b-button",{on:{click:function(e){t.exportToPDF()}}},[t._v("Export")])],1),t._v(" "),t._m(1)]),t._v(" "),a("b-modal",{ref:"myModalError",attrs:{id:"myModalError"}},[t._v("\n    "+t._s(this.error)+"\n     ")])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("th",{attrs:{scope:"col"}},[e("img",{staticStyle:{float:"left"},attrs:{src:"/static/img/svgs/10.svg",alt:"Smiley face",height:"33",width:"33"}}),this._v("\n        Nom compania")])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-sm-6"},[e("div",{staticClass:"chart",staticStyle:{"background-color":"#e84d20"},attrs:{id:"chart"}})])}]};var lt=a("VU/8")(nt,ct,!1,function(t){a("i5QY")},"data-v-0f9f237a",null).exports,dt={name:"HelloWorld",data:()=>({msg:"Welcome to Your Vue.js App"})},ut={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]};a("VU/8")(dt,ut,!1,function(t){a("6epJ")},"data-v-0e1a37fb",null).exports;var vt={name:"LegalCondition",data:()=>({msg:"Condicions legals"})},mt={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("h1",[this._v(this._s(this.msg))])])},staticRenderFns:[]};var _t=a("VU/8")(vt,mt,!1,function(t){a("ngXW")},"data-v-91ccea1c",null).exports,pt={name:"ResetPassword",data:()=>({msg:"Welcome to Your Vue.js App",email:"",error:""}),methods:{callReset(){this.$http.get("password/"+this.email,{}).then(t=>this.error="Email enviada").catch(()=>this.error="Hi hagut un error")}}},ht={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-wrapper border border-light",staticStyle:{"background-color":"rgb(232,77,32)"}},[a("form",{staticClass:"form-signin",on:{submit:function(e){return e.preventDefault(),t.callReset(e)}}},[a("h2",{staticClass:"form-signin-heading"},[t._v(t._s(t._f("translate")("Recuperar contrasenya")))]),t._v(" "),a("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Correu electronic")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:t._f("translate")("Correu electronic"),required:"",autofocus:""},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}}),t._v(" "),a("button",{staticClass:"btn btn-lg btn-primary btn-block",attrs:{type:"submit"},on:{click:function(e){t.callReset()}}},[t._v(t._s(t._f("translate")("Recuperar contrasenya")))]),t._v(" "),a("span",[t._v(t._s(t._f("translate")(t.error)))])])])},staticRenderFns:[]};var ft=a("VU/8")(pt,ht,!1,function(t){a("0Ipw")},"data-v-0ded6816",null).exports,gt={name:"Inicial",data:()=>({msg:"Welcome to Your Vue.js App"})},yt={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"hello"},[e("img",{attrs:{src:"/static/img/svgs/99.svg",alt:"Smiley face"}})])}]};var bt=a("VU/8")(gt,yt,!1,function(t){a("WA69")},"data-v-110f1fe4",null).exports,wt={components:{Icon:A.a,"b-modal":C.a},name:"Informes",data:()=>({user:"dpiscia",company:{id:1},DARI_filename:"",survey:"",company_surveys:[],error:"",selected:"",filter_any:"",filter_sector:"",filter_subsector:"",filter_comarca:"",companies:"",filter_leader:"",filtered:[],filtered_evolution:[],filtered_evolution_avg:[],dataExcel:[],value:"score",plot:"compare",avg_score:0,avg_score_future:0,answers:[]}),computed:{unique_any(){return w()(this.filtered.map(t=>t.pub_date))},unique_sector(){return w()(this.filtered.map(t=>t.sector))},unique_subsector(){return w()(this.filtered.map(t=>t.subsector))},filtered_surveys(){var t=this.company_surveys;t=_.filter(t,{status:"submitted"}),""!=this.filter_any&&(t=_.filter(t,{pub_date:this.filter_any})),""!=this.filter_sector&&(t=_.filter(t,{sector:this.filter_sector})),""!=this.filter_subsector&&(t=_.filter(t,{subsector:this.filter_subsector}));var e=_.groupBy(t,"id_company"),a=Object.keys(e).map(function(t){return _.maxBy(e[t],"score")});t=[],a.map(function(e){t.push(e)}),this.avg_score=_.meanBy(a,t=>t.score),this.avg_score_future=_.meanBy(a,t=>t.score_future),this.filtered=t;var s=this.filtered.map(t=>t.id_surveycompany).join(","),r=this.$i18n.locale();return this.$http.get("dataExcel?ids="+s+"&lang="+r,{headers:o.getAuthHeader()}).then(t=>{t.data.forEach(function(t){delete t.id,delete t.Preguntes;var e=0,a=0,s=0;for(var r in t)r.endsWith("futurible")?a+=t[r]:e+=t[r],s+=1;t.score=e/(s/2),t.score_future=a/(s/2)}),this.answers=_.orderBy(t.data,["score"],["asc"]),console.log("s")}),d3.select("svg").remove(),d3.select("svg").remove(),this.renderBarChart("score"),this.renderBarChart("score_future"),!0},keepMax(){return grouped=_.groupBy(this.filtered,"id_company"),maxScores=Object.keys(grouped).map(function(t){return _.maxBy(grouped[t],"score")}),maxScores}},methods:{exportToPDF:function(){console.log("exported");window.document.getElementById("chart")},setScore(t){this.value=t,this.plot},downloadSurvey(){var t;this.filtered.forEach(function(e,a){e.selected&&(t=e.id_surveycompany)}),void 0==t?(this.error="you have to select one survey",this.showModalError()):this.$http.get("surveyFiles/"+t,{responseType:"arraybuffer",headers:o.getAuthHeader()}).then(t=>{console.log("download");let e=new Blob([t.data],{type:"application/zip"},name="prova"),a=window.URL.createObjectURL(e);e.name="survey",window.open(a)}).catch(()=>"")},filtered_surveys_evolution(){var t=this.filtered,e=_.groupBy(t,"pub_date"),a=Object.keys(e).map(function(t){return _.maxBy(e[t],"score")});return t=[],a.map(function(e){t.push(e)}),this.filtered_evolution=t,t},filtered_surveys_evolution_avg(){var t=this.company_surveys;t=_.filter(t,{status:"submitted"}),t=_.filter(t,{sector:"Industrial"});var e=_.groupBy(t,"pub_date"),a=Object.keys(e).map(function(t){return _.meanBy(e[t],"score")});return t=[],a.map(function(e){t.push(e)}),this.filtered_evolution_avg=t,t},setOption(t){this.filtered.forEach(function(e,a){a!=t&&(e.selected=!1)}),this.filtered[t].selected=!this.company_surveys[t].selected,console.log("sel")},fetchCompanySurvey(){this.$http.get("companysurvey?type=all",{headers:o.getAuthHeader()}).then(t=>{t.data.map(function(t){t.selected=!1,t.id_surveycompany=t.id}),this.company_surveys=t.data,this.fetchCompanies()}).catch(()=>"")},fetchCompanies(){this.$http.get("companies",{headers:o.getAuthHeader()}).then(t=>{this.companies=t.data;var e=_.map(this.company_surveys,function(e){return _.merge(e,_.find(t.data,{id:e.id_company}))});this.company_surveys=e}).catch(()=>"")},fetchQuestions(t){this.$http.get("dataExcel",{headers:o.getAuthHeader()}).then(t=>{this.dataExcel=t.data.data}).catch(()=>"")},showModalError(){this.$refs.myModalError.show()},hideModalError(){this.$refs.myModalError.hide()},renderBarChart:function(t){this.plot="compare";var e=t,a=this.filtered;"score_future"==e?("#chart_future",a=a.sort(function(t,a){return d3.ascending(t[e],a[e])})):a=a.sort(function(t,a){return d3.ascending(t[e],a[e])});var s=15,r=25,i=15,o=60,n=560-o-r,c=180-s-i,l=d3.select("#chart").append("svg").attr("width",n+o+r).attr("height",c+s+i).attr("fill","white").append("g").attr("transform","translate("+o+","+s+")"),d=d3.scale.linear().range([0,n]).domain([0,d3.max(a,function(t){return t[e]})]),u=d3.scale.ordinal().rangeRoundBands([c,0],.1).domain(a.map(function(t){return t.commercial_name})),v=d3.svg.axis().scale(u).tickSize(3).orient("left"),m=(l.append("g").attr("class","y axis").call(v),l.selectAll(".bar").data(a).enter().append("g"));m.append("rect").attr("class","bar").attr("y",function(t){return u(t.commercial_name)}).attr("height",u.rangeBand()).attr("x",0).attr("width",function(t){return d(t[e])}),m.append("text").attr("class","label").attr("color","black").attr("y",function(t){return u(t.commercial_name)+u.rangeBand()/2+4}).attr("x",function(t){return d(t[e])+3}).text(function(t){return t[e]})}},mounted(){this.fetchCompanySurvey()}},Ct={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/users"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/14.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Gestió d'usuaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/admin/surveys"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/15.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Visualització de qüestionaris")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2",staticStyle:{opacity:"0.4"}},[a("a",{staticStyle:{color:"white"},attrs:{href:"#/ranking"}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/16.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Rànquing de resultats")))])])])]),t._v(" "),a("div",{staticClass:"col-sm-2"},[a("a",{staticStyle:{color:"white"},attrs:{href:""}},[a("figure",[a("img",{attrs:{src:"/static/img/svgs/17.svg",alt:"Smiley face",height:"30",width:"30"}}),t._v(" "),a("figcaption",[t._v(t._s(t._f("translate")("Extracció d'informes")))])])])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{color:"white"}},[a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"control-label"},[t._v("Any")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_any,expression:"filter_any"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_any=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_any,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"control-label"},[t._v("Sector")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_sector,expression:"filter_sector"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_sector=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_sector,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)]),t._v(" "),a("div",{staticClass:"col-sm-4"},[a("label",{staticClass:"control-label"},[t._v("Subsector")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.filter_subsector,expression:"filter_subsector"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.filter_subsector=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:""}}),t._v(" "),t._l(t.unique_subsector,function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})],2)])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-sm-6"},[a("b-button",{on:{click:function(e){t.exportToPDF()}}},[t._v("Export")])],1),t._v(" "),a("div",{staticClass:"col-sm-6"},[t._v("\n\n\n "+t._s(t.filtered_surveys)+"\n\n "+t._s(t.avg_score)+"\n\n "+t._s(t.avg_score_future)+"\n\n Respostes\n\n "+t._s(t.answers[1])+"\n\n"+t._s(t.answers[23])+"\n\n"+t._s(t.answers)+"\n\n\n\n"),a("div",{staticClass:"chart",staticStyle:{"background-color":"#e84d20"},attrs:{id:"chart"}}),t._v(" "),a("div",{staticClass:"chart",staticStyle:{"background-color":"#e84d20"},attrs:{id:"chart_future"}})])]),t._v(" "),a("b-modal",{ref:"myModalError",attrs:{id:"myModalError"}},[t._v("\n    "+t._s(this.error)+"\n     ")])],1)},staticRenderFns:[]};var St=a("VU/8")(wt,Ct,!1,function(t){a("ybBs")},"data-v-6fe306f0",null).exports;s.a.use(d.a);const xt=new d.a({routes:[{path:"/",name:"Login",component:h},{path:"/inicial",name:"Inicial",component:bt},{path:"/conditions",name:"LegalConditions",component:_t},{path:"/reset",name:"ResetPassword",component:ft},{path:"/quisom",name:"quisom",component:ot},{path:"/registerAdmin",name:"Register",component:y,secure:!0},{path:"/informes",name:"Informes",component:St,secure:!0},{path:"/Ranking",name:"Ranking",component:lt,secure:!0},{path:"/admin/surveys",name:"ManageSurvey",component:st,secure:!0},{path:"/register",name:"Register",component:y,secure:!1},{path:"/updatesurvey/:id",name:"EditSurvey",component:tt,secure:!0},{path:"/updateuser",name:"UpdateUser",component:J,secure:!0},{path:"/updateuseradmin",name:"UpdateUser",component:J,secure:!0},{path:"/registercompany",name:"RegisterCompany",component:E,secure:!0},{path:"/registercompany/:id",name:"RegisterCompany",component:E,secure:!0},{path:"/questions/:id",name:"Questions",component:j,secure:!0},{path:"/results/:id",name:"Results",component:W,secure:!0},{path:"/admin",name:"Admin",component:N,secure:!0},{path:"/admin/users",name:"UsersManagement",component:L,secure:!0},{path:"/user",name:"UserPage",component:T,secure:!0}]});console.log("interce"),xt.beforeEach((t,e,a)=>{xt.options.routes.forEach(e=>{t.matched[0].path===e.path&&e.secure&&(void 0!=t.query.token&&(localStorage.access_token=t.query.token),xt.app.$http.post("auth/loggedin","data",{headers:o.getAuthHeader()}).then(()=>{console.log(o.user.authenticated),o.user.authenticated=!0,console.log("dopo "+o.user.authenticated)}).catch(t=>{if(200!=t.response.status)return a("/")}))}),a()});var At=xt,qt=a("Rf8U"),kt=a.n(qt),Et=a("mtWM"),$t=a.n(Et);const Pt=Object({NODE_ENV:"production"}).API_URL||"https://ineditencercla.pythonanywhere.com";var jt=$t.a.create({baseURL:Pt,headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.token}});s.a.use(kt.a,jt);var Rt=a("e6fC"),Mt=a("NYxO"),Nt=a("kmDT");a("qb6w"),a("9M+g");s.a.config.productionTip=!1,s.a.use(Rt.a),s.a.use(Mt.a);const Ft=new Mt.a.Store;s.a.use(Nt.a.plugin,Ft);const It={"Recuperar contrasenya":"Recuperar contraseña","Es presenta a Leader":"Se presenta a Leader","Nova contrasenya":"Nueva contraseña","Canviar contrasenya":"Cambiar contraseña","Repetir nova contrasenya":"Repetir nueva contraseña",Any:"Año","Any de convocatòria":"Año de la convocatoria","Qüestionari per presentar sol·licitud a una convocatòria d'ajuts Leader ":"Cuestionario para presentar solicitud a una convocatoria de ayuda Leader","Adjuntar DARI (Declaració Anual de Residus Industrials) de l'any corresponent a l'exercici que s'està avaluant":"Adjuntar DARI (Declaración Anual de Residuos Industriales )   del año correspondiente al ejercicio que se está evaluando",Surt:"Cerrar sesión","No es pot duplicar el qüestionari":"No se puede duplicar el cuestionario","No es ha trobat el usuari":"El usario no se ha encontrado","Contrasenya equivocada":"Contraseña equivocada","Aquest usuari no existeix":"Este usuario no existe","Empresa amb aquest NIF esta registrada":"Empresa con este NIF esta registrada","Document adjunt":"Documento adjuntado","Projecte futurible":"Proyecto futurible","Explicació projecte futurible":"Explicación proyecto futurible","Explicació":"Explicación","no autoritzat":"no autorizado","Has de seleccionar un any ":"Tienes que seleccionar un año","has de seleccionar un usuari ":"tienes que seleccionar un usuario","has de seleccionar un qüestionari ":"tienes que seleccionar un cuestionario","És necessari acceptar les condicions legals":"Es necesario aceptar las condiciones legales","Condicions legals":"Condiciones legales","No es pot esborrar un qüestionari enviat":"No se puede borrar un cuestionario enviado","No es pot fer servir aquesta funcionalitat amb un qüestionari pendent":"No se puede utilizar esta funcionalidad con un cuestionario pendiente","Qui som":"Quienes somos","Correu electronic":"Correo electronico",contrasenya:"contraseña","Donar d'alta la meva empresa":"Dar de alta mi empresa","contrasenya no coincideix":"contraseña no coincide","Usuari ja existeix":"el usuario ya existe ",User:"Usuario","Nom comercial":"Nombre comercial","Nom i cognoms":"Nombre y apellidos","Telèfon":"Teléfono","Descripció activitat":"Descripción actividad","Territori Leader":"Territorio Leader","Número de treballadors":"Número de trabajadores",Actualitzar:"Actualizar",Agroalimentari:"Agroalimentario","Agricultura i ramaderia":"Agricultura y ganadería","Pesca i caça":"Pesca y caza","Productes càrnics":"Productos cárnicos","Fruites i hortalisses":"Frutas y hortalizas",Oli:"Aceite","Productes lactis":"Productos lácteos","Productes de fleca":"Productos de panadería",Begudes:"Bebidas",Altres:"Otros",Fusta:"Madera","Maquinària":"Maquinaria","Química":"Química","Metal·lúrgia":"Metalurgia","Tèxtil":"Textil","Construcció":"Construcción",Altres:"Otros",Industrial:"Industrial","Comerç a l'engròs i al detall de productes d'alimentació":"Comercio al por mayor y al pormenor de productos de alimentación","Comerç a l'engròs i al detall d'altres productes":"Comercio al por mayor y al pormenor de otros productos","Transport i emmagatzematge":"Transporte y almacenaje","Restauració":"Restauración",Allotjament:"Alojamiento","Reparació de vehicles de motor i motocicletes":"Reparación de vehículos de motor y motocicletas","Activitats professionals, científiques i tècniques":"Actividades profesionales, científicas y técnicas","Activitats sanitàries":"Actividades sanitarias","Educació":"Educación","Activitats artístiques, recreatives i d'entreteniment":"Actividades artísticas, recreativas y de entretenimiento","Altres serveis":"Otros servicios","Administració pública":"Administración pública",Serveis:"Servicios","Públic":"Público","Alt Camp":"Alt Camp","Alt Empordà":"Alt Empordà","Alt Penedès":"Alt Penedès","Alt Urgell":"Alt Urgell","Alta Ribagorça":"Alta Ribagorça",Anoia:"Anoia",Bages:"Bages","Baix Camp":"Baix Camp","Baix Ebre":"Baix Ebre","Baix Empordà":"Baix Empordà","Baix Llobregat":"Baix Llobregat","Baix Penedès":"Baix Penedès","Barcelonès":"Barcelonès","Berguedà":"Berguedà",Cerdanya:"Cerdanya","Conca de Barberà":"Conca de Barberà",Garraf:"Garraf","Les Garrigues":"Les Garrigues",Garrotxa:"Garrotxa","Gironès":"Gironès",Maresme:"Maresme","Moianès":"Moianès","Montsià":"Montsià",Noguera:"Noguera",Osona:"Osona","Pallars Jussà":"Pallars Jussà","Pallars Sobirà":"Pallars Sobirà","Pla de l'Estany":"Pla de l'Estany","Pla d'Urgell":"Pla d'Urgell",Priorat:"Priorat","Ribera d'Ebre":"Ribera d'Ebre","Ripollès":"Ripollès",Segarra:"Segarra","Segrià":"Segrià",Selva:"Selva","Solsonès":"Solsonès","Tarragonès":"Tarragonès","Terra Alta":"Terra Alta",Urgell:"Urgell","Val d'Aran (Vall d'Aran)":"Val d'Aran (Vall d'Aran)","Vallès Occidental":"Vallès Occidental","Vallès Oriental":"Vallès Oriental",Inici:"Inicio","Qui som":"Quiénes somos","Diagnosi Economia Circular":"Evaluación Economía Circular","Iniciar sessió":"Iniciar sesión","Registrar-se":"Registrarse","Correu electrònic":"Correo electrónico",Contrasenya:"Contraseña","Has oblidat la contrasenya? Fes clic aquí":"¿Has olvidado tu contraseña? Haz clic aquí","Modificar dades d'usuari":"Modificar datos de usuario","Gestió d'usuaris":"Gestión de usuarios","Visualització de qüestionaris":"Visualización de cuestionarios","Rànquing de resultats":"Ranking de resultados","Extracció d'informes":"Extracción de informes",Comarca:"Comarca","Territori Leader":"Territorio Leader","Informació":"Información","Nombre de qüestionaris":"Número de cuestionarios",Sector:"Sector",Subsector:"Subsector","Permís per duplicar qüestionaris activa":"Permiso para duplicar cuestionarios activo","Super-usuari":"Super usuario",Usuari:"Usuario",Crear:"Crear",Editar:"Editar","Llistat de preguntes que apliquen a l'empresa":"Listado de preguntas que aplican a la empresa",Preguntes:"Preguntas",Aplica:"Aplica",Empresa:"Empresa",Sector:"Sector",Subsector:"Subsector",Comarca:"Comarca","Territori Leader":"Territorio Leader",Any:"Año",Estat:"Estado","Documents adjunts del qüestionari seleccionat":"Documentos adjuntos del cuestionario seleccionado","Documents adjunts de tots els qüestionaris":"Documentos adjuntos de todos los cuestionarios","Resum de respostes de tots els qüestionaris":"Resumen de respuestas de todos los cuestionarios","Puntuació":"Puntuación","Nom empresa":"Nombre empresa","Nom qüestionari":"Nombre cuestionario",Estat:"Estado","Última data de modificació":"Última fecha de modificación","Puntuació obtinguda":"Puntuación obtenida","Puntuació futurible":"Puntuación futurible",Enviat:"Enviado",Pendent:"Pendiente",Sector:"Sector",Subsector:"Subsector",Comarca:"Comarca","Territori Leader":"Territorio Leader",Any:"Año",Comparar:"Comparar","Rànquing":"Ranking","Puntuació obtinguda":"Puntuación obtenida","Puntuació futurible":"Puntuación futurible","Exportar rànquing PDF":"Exportar ranking PDF","Veure evolució":"Ver evolución","Puntuació":"Puntuación",Any:"Año",Blanc:"Blanco",Gris:"Gris","Puntuació mitjana":"Puntuación media","Sector/Subsector":"Sector/Subsector","Any de convocatòria":"Año de convocatoria","Donar d'alta la meva empresa":"Dar de alta mi empresa","Correu electrònic":"Correo electrónico",Contrasenya:"Contraseña",Registrar:"Registrar","Al registrar-te acceptes les nostres Condicions i la Política de privacitat":"Al registrarte aceptas nuestras Condiciones y la Política de privacidad de datos","AVÍS: Les dades introduïdes són confidencials i susceptibles de revisió per part del personal de la ADCC":"AVISO: Los datos introducidos son confidenciales y susceptibles de revisión por parte del personal de la ADCC","Dades de la persona de contacte":"Datos de la persona de contacto","Nom i cognoms":"Nombre y apellidos","Telèfon":"Teléfono","Dades de l'empresa":"Datos de la empresa",Sector:"Sector","Nom comercial":"Nombre comercial","Nom fiscal":"Nombre fiscal",NIF:"NIF","Descripció activitat":"Descripción actividad",Comarca:"Comarca","Territori Leader":"Territorio Leader","Número de treballadors":"Número de trabajadores","Al registrar-te acceptes les nostres Condicions i la Política de privacitat":"Al registrarte aceptas nuestras Condiciones y la Política de privacidad de datos","AVÍS: Les dades introduïdes són confidencials i susceptibles de revisió per part del personal de la ADCC":"AVISO: Los datos introducidos son confidenciales y susceptibles de revisión por parte del personal de la ADCC","Qüestionaris":"Cuestionarios","Nom qüestionari":"Nombre cuestionario",Estat:"Estado","Última data de modificació":"Última fecha de modificación","Puntuació obtinguda":"Puntuación obtenida","Puntuació futurible":"Puntuación futurible",Enviat:"Enviado",Pendent:"Pendiente","Qüestionari nou":"Cuestionario nuevo","Data d'avaluació":"Fecha de Evaluación",Instruccions:"Instrucciones","Següent":"Siguiente",Anterior:"Anterior",Enrere:"Atrás","Adjuntar document":"Adjuntar documento","Explica breument el teu projecte":"Explica tu proyecto brevemente","Càlcul":"Cálculo","Calcular l'índex de circularitat":"Calcular el índice de circularidad","Tornar al qüestionari":"Volver al cuestionario","Resultats i propostes de millora":"Resultados y propuestas de mejoras","Puntuació obtinguda":"Puntuación obtenida","Puntuació futurible":"Puntuación futurible",Recursos:"Recursos","Fabricació i distribució":"Fabricación y distribución","Ús":"Uso","Reparació":"Reparación","Reús":"Reuso",Remanufactura:"Remanufactura",Reciclatge:"Reciclaje","Justificació":"justificación ","Estratègia amb alt potencial de millora":"Estrategia con alto potencial de mejora","Estratègia amb potencial de millora mitjà":"Estrategia con potencial de mejora medio","Estratègia amb bona puntuació obtinguda":"Estrategia con buena puntuación obtenida","Estratègia no aplicable al sector de l'empresa":"Estrategia no aplicable al sector de la empresa","Propostes de millora per estratègia":"Propuestas de mejora por estrategia","No pots continuar sense justificar la teva resposta. Tria l'opció de justificació: mitjançant un document adjunt o una descripció explicativa.":"No puedes continuar sin justificar tu respuesta. Selecciona la opción de justificación: mediante un documento adjunto o una descripción explicativa.","Estàs segur d’esborrar el usuari?":"¿Estás seguro de borrar el usuario?","Estàs segur d’esborrar el qüestionari?":"¿Estás seguro de borrar el cuestionario?","No pots continuar sense justificar el te projecte en curs":"No puedes continuar sin justificar tu proyecto en curso","Informació projectes futuribles:Marca aquesta opció si l'empresa disposa d'un projecte en curs destinat a millorar la circularitat en relació a la pregunta plantejada.":"Información proyectos futuribles:Marca esta opción si la empresa dispone de un proyecto en curso destinado a mejorar la circularidad en relación a la cuestión planteada.","Si es marca aquesta opció, és obligatori descriure el projecte. La puntuació futurible del qüestionari mostrarà la millora en curs.":"Si se marca esta opción, es obligatorio describir el proyecto. La puntuación futurible del cuestionario mostrará la mejora en curso.","Estàs segur d’enviar el qüestionari a avaluar?":"¿Estás seguro de enviar el cuestionario a evaluar?","Això calcularà la puntuació actual i futurible de l’empresa, i no permetrà modificar ni esborrar el qüestionari":"Esto calculará la puntuación actual y futurible de la empresa, y no permitirá modificar ni borrar el cuestionario."};s.a.i18n.add("es",It),new s.a({el:"#app",router:At,store:Ft,axios:void 0,components:{App:l},template:"<App/>",http:{root:"http://localhost:5000"}})},NYUC:function(t,e){},PjRf:function(t,e){},RayY:function(t,e){},W4vv:function(t,e){},WA69:function(t,e){},YfuE:function(t,e){},bDgQ:function(t,e){},et0s:function(t,e){},fdWs:function(t,e){},gu59:function(t,e){},i5QY:function(t,e){},jSVj:function(t,e){},ngXW:function(t,e){},qb6w:function(t,e){},qq3a:function(t,e){},"v+1N":function(t,e){},ybBs:function(t,e){},zj2Q:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.b02d427cbdd2ac7cd306.js.map